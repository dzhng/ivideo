var isWebKit="undefined"!==typeof navigator.userAgent.split("WebKit/")[1],isChrome=-1<navigator.userAgent.toLowerCase().indexOf("chrome"),isMozilla=0<=navigator.appVersion.indexOf("Gecko/")||0<=navigator.userAgent.indexOf("Gecko")&&!this.isWebKit&&"undefined"!==typeof navigator.appVersion;isWebKit&&console.log("WebKit browser detected");isChrome&&console.log("Chrome browser detected");isMozilla&&console.log("Mozilla browser detected");!isWebKit&&!isChrome&&!isMozilla&&console.error("Browser unsupported");var Connection=function(d,j,t){this.segment=d;this.option=j;this.position=t};var Stack=function(){this.stack=[]};Stack.prototype.insert=function(d){for(var j=0;j<this.stack.length;j++)if(this.stack[j]==d)return!1;this.stack.push(d);return!0};Stack.prototype.remove=function(d){for(var j=0;j<this.stack.length;j++)if(this.stack[j]==d)return this.stack.splice(j,1),!0;return!1};Stack.prototype.pull=function(){return 1<this.stack.length?this.stack.shift():1==this.stack.length?this.stack.pop():null};Stack.prototype.size=function(){return this.stack.length};Function.prototype.bind=function(d){var j=this;return function(){return j.apply(d,arguments)}};var jiffy=0,Model=function(){this.width=window.innerWidth;this.height=window.innerHeight;var d=document.getElementById("controlOverlay");d.width=this.width;d.height=this.height;this.paper=Raphael(d,this.width,this.height);this.scoreElement=parent.document.getElementById("scoreNum");this.score=0;this.theme=new ThemeModel(this,"professional1",this.width,this.height);this.player=new Player(this,this.width,this.height);this.replay=!1;this.mousey=this.mousex=0;this.mouseMoveHandler=this.mouseMove.bind(this);
document.addEventListener("mousemove",this.mouseMoveHandler,!1);this.mouseUpHandler=this.mouseUp.bind(this);document.addEventListener("mouseup",this.mouseUpHandler,!1);this.tickId=setInterval(this.timerTick.bind(this),33);this.idleCounter=15;this.theme.showHomeScreen(this.restart);this.controlsVisible=!1};Model.prototype.mouseMove=function(d){this.mousex=d.pageX;this.mousey=d.pageY;this.idleCounter=15;!0==this.controlsVisible&&this.theme.showControls(this.player.isPaused())};
Model.prototype.mouseUp=function(){this.player.mouseInterrupt()};Model.prototype.playClicked=function(){!0==this.replay&&(this.player.segment.removeVideo(),this.player.reset());this.player.playVideo();this.controlsVisible=!0;this.theme.hideHomeScreen()};Model.prototype.playVideo=function(){this.player.playVideo()};Model.prototype.pauseVideo=function(){this.player.pauseVideo()};Model.prototype.videoComplete=function(){this.replay=!0;this.theme.showHomeScreen(this.restart);this.controlsVisible=!1};
Model.prototype.showOptions=function(d){for(var j=!1,t=Array(6),y=Array(6),v=0;6>v;v++)y[v]=d.getConnectionByPosition(v);if(null!=y[0])t[0]=y[0].option,j=!0;if(null!=y[1])t[1]=y[1].option,j=!0;if(null!=y[2])t[2]=y[2].option,j=!0;if(null!=y[3])t[3]=y[3].option,j=!0;if(null!=y[4])t[4]=y[4].option,j=!0;if(null!=y[5])t[5]=y[5].option,j=!0;if(!j)return!1;this.theme.showOptions(t);this.controlsVisible=!1;this.theme.hideControls(this.player.isPaused());return!0};
Model.prototype.selectOption=function(d){this.theme.hideOptions();this.player.chooseOption(d);this.controlsVisible=!0};Model.prototype.updateScore=function(d){this.score=null==d?0:this.score+d;if(null!=this.scoreElement)this.scoreElement.innerHTML=this.score;console.log("Current score: %d",this.score)};
Model.prototype.timerTick=function(){jiffy++;0>=--this.idleCounter&&this.theme.hideControls(this.player.isPaused());var d=Math.atan((this.theme.sely-this.mousey)/(this.mousex-this.theme.selx))-Math.PI/2;0>this.mousex-this.theme.selx&&(d-=Math.PI);this.theme.rotateSelector(-360*d/(2*Math.PI));this.player.timerEventCanTrigger?this.theme.showEventIndicator():this.theme.hideEventIndicator()};var Player=function(d,j,t){this.width=j;this.height=t;this.model=d;this.segment=null;this.timerEventCanTrigger=!1;this.timerEventSegment=null;this.timerId=setInterval(this.timerTick.bind(this),100);this.timerEventMode=0;this.videoStacked=!1;this.reset()};
Player.prototype.reset=function(){console.log("Resetting player");this.segment=S1;var d=this.segment.score;this.model.updateScore(null);this.model.updateScore(d);0!=this.segment.videoStack.size()?(this.videoStacked=!0,console.log("video is stacked, size: %d",this.segment.videoStack.size())):this.videoStacked=!1;this.segment.loadVideo(this);this.segment.setVisible();this.preloadVideo()};
Player.prototype.preloadVideo=function(){console.log("video has %d connections",this.segment.connections.length);for(var d=0;d<this.segment.connections.length;d++){var j=this.segment.connections[d].segment;j.loadVideo(this)}console.log("video has %d timed events",this.segment.timedEvents.length);for(d=0;d<this.segment.timedEvents.length;d++)j=this.segment.timedEvents[d].segment,j.loadVideo(this)};
Player.prototype.playVideo=function(){this.segment.setVisible();this.segment.play();console.log("Now playing %s, duration: %d seconds",this.segment.url,this.segment.video.duration)};Player.prototype.skipToEnd=function(){};Player.prototype.pauseVideo=function(){this.segment.pause()};Player.prototype.isPaused=function(){return this.segment.video.paused};Player.prototype.setSegment=function(d){this.segment.removeVideo();this.segment=d;this.model.updateScore(this.segment.score);this.preloadVideo();this.playVideo()};
Player.prototype.chooseOption=function(d){console.log("option %d choosen",d);d=this.segment.chooseConnection(d).segment;0!=d.videoStack.size()?(this.videoStacked=!0,console.log("video is stacked, size: %d",this.segment.videoStack.size())):this.videoStacked=!1;this.setSegment(d)};Player.prototype.timerTick=function(){var d=this.segment;null!=d&&null!=d.video&&d.video.currentTime>=d.video.duration&&this.videoEnded()};
Player.prototype.mouseInterrupt=function(){var d=this.segment;if(null!=d&&null!=d.video)for(var j=0;j<d.timedEvents.length;j++){var t=d.timedEvents[j];if(d.video.currentTime>t.startTime&&d.video.currentTime<t.endTime)switch(d=t.segment,t=t.mode,console.log("event executed, mode %d",t),t){case 0:this.setSegment(d);break;case 1:this.segment.videoStack.insert(d)?(this.videoStacked=!0,this.model.theme.clickEffect(!0)):this.model.theme.clickEffect(!1);break;case 2:this.segment.videoStack.remove(d)?(this.videoStacked=
0==this.segment.videoStack.size?!1:!0,this.model.theme.clickEffect(!0)):this.model.theme.clickEffect(!1);break;default:console.error("Illegal timer event mode")}}};
Player.prototype.videoEnded=function(){if(this.videoStacked){this.videoStacked=!1;console.log("stacked videos detected, unstacking...");var d=this.segment,j=d.connections,t=d.defaultPos,y=d.videoStack;for(d.connections=[];null!=(s=y.pull());)d.insertDirect(s),d=s;d.connections=j;d.defaultPos=t;this.chooseOption(this.segment.defaultPos)}else-1!=this.segment.defaultPos?(console.log("direct video detected, not showing options"),this.chooseOption(this.segment.defaultPos)):this.model.showOptions(this.segment)||
this.model.videoComplete()};var Segment=function(d,j){this.url=d;this.score=j||0;this.defaultPos=-1;this.connections=[];this.timedEvents=[];this.videoStack=new Stack;this.player=this.video=null};Segment.prototype.setVisible=function(){this.video.style.visibility="visible"};Segment.prototype.play=function(){this.video.play()};Segment.prototype.pause=function(){this.video.pause()};
Segment.prototype.getConnectionByPosition=function(d){for(var j=0;j<this.connections.length;j++)if(this.connections[j].position===d)return this.connections[j];return null};Segment.prototype.chooseConnection=function(d){for(var j,t=0;t<this.connections.length;t++)this.connections[t].position===d?j=t:this.connections[t].segment.removeVideo();return this.connections[j]};Segment.prototype.insertDirect=function(d){this.defaultPos++;this.connections.push(new Connection(d,"",this.defaultPos))};
Segment.prototype.insertConnection=function(d,j,t){this.connections.push(new Connection(d,j,t))};Segment.prototype.insertTimedEvent=function(d,j,t){this.timedEvents.push(new TimedEvent(d,j,t))};Segment.prototype.insertTimedStack=function(d,j,t,y){!0===y&&this.videoStack.insert(d);this.timedEvents.push(new TimedEvent(d,j,t,y?2:1))};
Segment.prototype.loadVideo=function(d){this.player=d;if(null==this.video)d=document.createElement("video"),d.controls=!1,d.volume=1,d.preload="auto",d.style.visibility="hidden",d.style.position="absolute",d.width=this.player.width,d.height=this.player.height,document.body.insertBefore(d,document.getElementById("controlOverlay")),this.video=d;this.video.src=setVideoUrl(this.url);this.video.load()};
Segment.prototype.removeVideo=function(){if(null!=this.video)document.body.removeChild(this.video),this.video=null};var setVideoUrl=function(d){return""==d||null==d?null:isMozilla?"http://static.simply.io/"+d+".ogv":"http://static.simply.io/"+d+".mp4"};var TimedEvent=function(d,j,t,y){this.segment=d;this.startTime=j;this.endTime=t;this.mode=y||0};(function(d){var j=/[\.\/]/,t=function(){},y=function(d,j){return d-j},v,N,R={n:{}},z=function(d,j){var t=N,A=Array.prototype.slice.call(arguments,2),h=z.listeners(d),G=0,q,P=[],L={},J=[];v=d;N=0;for(var C=0,I=h.length;C<I;C++)"zIndex"in h[C]&&(P.push(h[C].zIndex),0>h[C].zIndex&&(L[h[C].zIndex]=h[C]));for(P.sort(y);0>P[G];)if(q=L[P[G++]],J.push(q.apply(j,A)),N)return N=t,J;for(C=0;C<I;C++)if(q=h[C],"zIndex"in q)if(q.zIndex==P[G]){J.push(q.apply(j,A));if(N)return N=t,J;do if(G++,q=L[P[G]],q&&J.push(q.apply(j,
A)),N)return N=t,J;while(q)}else L[q.zIndex]=q;else if(J.push(q.apply(j,A)),N)return N=t,J;N=t;return J.length?J:null};z.listeners=function(d){var d=d.split(j),t=R,v,A,h,G,q,y,z,J,C=[t],I=[];for(G=0,q=d.length;G<q;G++){J=[];for(y=0,z=C.length;y<z;y++)for(t=C[y].n,A=[t[d[G]],t["*"]],h=2;h--;)v=A[h],v&&(J.push(v),I=I.concat(v.f||[]));C=J}return I};z.on=function(d,v){for(var y=d.split(j),A=R,h=0,G=y.length;h<G;h++)A=A.n,!A[y[h]]&&(A[y[h]]={n:{}}),A=A[y[h]];A.f=A.f||[];for(h=0,G=A.f.length;h<G;h++)if(A.f[h]==
v)return t;A.f.push(v);return function(d){+d==+d&&(v.zIndex=+d)}};z.stop=function(){N=1};z.nt=function(d){return d?RegExp("(?:\\.|\\/|^)"+d+"(?:\\.|\\/|$)").test(v):v};z.unbind=function(d,t){var v=d.split(j),A,h,y,q,z,L,J=[R];for(q=0,z=v.length;q<z;q++)for(L=0;L<J.length;L+=y.length-2){y=[L,1];A=J[L].n;if("*"!=v[q])A[v[q]]&&y.push(A[v[q]]);else for(h in A)A.hasOwnProperty(h)&&y.push(A[h]);J.splice.apply(J,y)}for(q=0,z=J.length;q<z;q++)for(A=J[q];A.n;){if(t){if(A.f){for(L=0,v=A.f.length;L<v;L++)if(A.f[L]==
t){A.f.splice(L,1);break}!A.f.length&&delete A.f}for(h in A.n)if(A.n.hasOwnProperty(h)&&A.n[h].f){y=A.n[h].f;for(L=0,v=y.length;L<v;L++)if(y[L]==t){y.splice(L,1);break}!y.length&&delete A.n[h].f}}else for(h in delete A.f,A.n)A.n.hasOwnProperty(h)&&A.n[h].f&&delete A.n[h].f;A=A.n}};z.once=function(d,j){var t=function(){j.apply(this,arguments);z.unbind(d,t)};return z.on(d,t)};z.version="0.4.0";z.toString=function(){return"You are running Eve 0.4.0"};"undefined"!=typeof module&&module.exports?module.exports=
z:d.eve=z})(this);
(function(){function d(a,l,m,x,b,c){var m=H(m),d,e,k,i,p,r,n=a.ms,j={},h={},D={};if(x)for(w=0,B=M.length;w<B;w++){var Q=M[w];if(Q.el.id==l.id&&Q.anim==a){Q.percent!=m?(M.splice(w,1),k=1):e=Q;l.attr(Q.totalOrigin);break}}else x=+h;for(var w=0,B=a.percents.length;w<B;w++){if(a.percents[w]==m||a.percents[w]>x*a.top){m=a.percents[w];p=a.percents[w-1]||0;n=n/a.top*(m-p);i=a.percents[w+1];d=a.anim[m];break}x&&l.attr(a.anim[a.percents[w]])}if(d){if(e)e.initstatus=x,e.start=new Date-e.ms*x;else{for(var o in d)if(d[G](o)&&
(ja[G](o)||l.paper.customAttributes[G](o)))switch(j[o]=l.attr(o),null==j[o]&&(j[o]=Na[o]),h[o]=d[o],ja[o]){case u:D[o]=(h[o]-j[o])/n;break;case "colour":j[o]=g.getRGB(j[o]);w=g.getRGB(h[o]);D[o]={r:(w.r-j[o].r)/n,g:(w.g-j[o].g)/n,b:(w.b-j[o].b)/n};break;case "path":var w=aa(j[o],h[o]),q=w[1];j[o]=w[0];D[o]=[];for(w=0,B=j[o].length;w<B;w++){D[o][w]=[0];for(var y=1,A=j[o][w].length;y<A;y++)D[o][w][y]=(q[w][y]-j[o][w][y])/n}break;case "transform":w=l._;if(q=Oa(w[o],h[o])){j[o]=q.from;h[o]=q.to;D[o]=
[];D[o].real=!0;for(w=0,B=j[o].length;w<B;w++){D[o][w]=[j[o][w][0]];for(y=1,A=j[o][w].length;y<A;y++)D[o][w][y]=(h[o][w][y]-j[o][w][y])/n}}else q=l.matrix||new v,w={_:{transform:w.transform},getBBox:function(){return l.getBBox(1)}},j[o]=[q.a,q.b,q.c,q.d,q.e,q.f],Pa(w,h[o]),h[o]=w._.transform,D[o]=[(w.matrix.a-q.a)/n,(w.matrix.b-q.b)/n,(w.matrix.c-q.c)/n,(w.matrix.d-q.d)/n,(w.matrix.e-q.e)/n,(w.matrix.e-q.f)/n];break;case "csv":q=F(d[o])[f](W);B=F(j[o])[f](W);if("clip-rect"==o)for(j[o]=B,D[o]=[],w=
B.length;w--;)D[o][w]=(q[w]-j[o][w])/n;h[o]=q;break;default:for(q=[][E](d[o]),B=[][E](j[o]),D[o]=[],w=l.paper.customAttributes[o].length;w--;)D[o][w]=((q[w]||0)-(B[w]||0))/n}o=d.easing;w=g.easing_formulas[o];if(!w)if((w=F(o).match(Qa))&&5==w.length)var z=w,w=function(a){return t(a,+z[1],+z[2],+z[3],+z[4],n)};else w=Ra;r=d.start||a.start||+new Date;Q={anim:a,percent:m,timestamp:r,start:r+(a.del||0),status:0,initstatus:x||0,stop:!1,ms:n,easing:w,from:j,diff:D,to:h,el:l,callback:d.callback,prev:p,next:i,
repeat:c||a.times,origin:l.attr(),totalOrigin:b};M.push(Q);if(x&&!e&&!k&&(Q.stop=!0,Q.start=new Date-n*x,1==M.length))return ka();k&&(Q.start=new Date-Q.ms*x);1==M.length&&xa(ka)}eve("anim.start."+l.id,l,a)}}function j(a,l){var m=[],x={};this.ms=l;this.times=1;if(a){for(var b in a)a[G](b)&&(x[H(b)]=a[b],m.push(H(b)));m.sort(Sa)}this.anim=x;this.top=m[m.length-1];this.percents=m}function t(a,l,m,x,b,c){function d(a,l){var m,x,b,c;for(b=a,x=0;8>x;x++){c=((k*b+e)*b+f)*b-a;if(p(c)<l)return b;m=(3*k*b+
2*e)*b+f;if(1.0E-6>p(m))break;b-=c/m}m=0;x=1;b=a;if(b<m)return m;if(b>x)return x;for(;m<x;){c=((k*b+e)*b+f)*b;if(p(c-a)<l)break;a>c?m=b:x=b;b=(x-m)/2+m}return b}var f=3*l,e=3*(x-l)-f,k=1-f-e,g=3*m,i=3*(b-m)-g,n=1-g-i;return function(a,l){var m=d(a,l);return((n*m+i)*m+g)*m}(a,1/(200*c))}function y(){return this.x+T+this.y+T+this.width+" \u00d7 "+this.height}function v(a,l,m,x,b,c){null!=a?(this.a=+a,this.b=+l,this.c=+m,this.d=+x,this.e=+b,this.f=+c):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=
0)}function N(a){for(var l=[],m=0,x=a.length;x-2>m;m+=2){var b=[{x:+a[m],y:+a[m+1]},{x:+a[m],y:+a[m+1]},{x:+a[m+2],y:+a[m+3]},{x:+a[m+4],y:+a[m+5]}];x-4==m?(b[0]={x:+a[m-2],y:+a[m-1]},b[3]=b[2]):m&&(b[0]={x:+a[m-2],y:+a[m-1]});l.push(["C",(-b[0].x+6*b[1].x+b[2].x)/6,(-b[0].y+6*b[1].y+b[2].y)/6,(b[1].x+6*b[2].x-b[3].x)/6,(b[1].y+6*b[2].y-b[3].y)/6,b[2].x,b[2].y])}return l}function R(){return this.hex}function z(a,l,m){function x(){var b=Array.prototype.slice.call(arguments,0),c=b.join("\u2400"),f=
x.cache=x.cache||{},d=x.count=x.count||[];if(f[G](c)){a:for(var b=d,d=c,e=0,k=b.length;e<k;e++)if(b[e]===d){b.push(b.splice(e,1)[0]);break a}return m?m(f[c]):f[c]}1E3<=d.length&&delete f[d.shift()];d.push(c);f[c]=a[I](l,b);return m?m(f[c]):f[c]}return x}function g(a){if(g.is(a,"function"))return V?a():eve.on("DOMload",a);if(g.is(a,o))return g._engine.create[I](g,a.splice(0,3+g.is(a[0],u))).add(a);var l=Array.prototype.slice.call(arguments,0);if(g.is(l[l.length-1],"function")){var m=l.pop();return V?
m.call(g._engine.create[I](g,l)):eve.on("DOMload",function(){m.call(g._engine.create[I](g,l))})}return g._engine.create[I](g,arguments)}g.version="2.0.1";g.eve=eve;var V,W=/[, ]+/,A={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},h=/\{(\d+)\}/g,G="hasOwnProperty",q={doc:document,win:window},P=Object.prototype[G].call(q.win,"Raphael"),L=q.win.Raphael,J=function(){this.ca=this.customAttributes={}},C,I="apply",E="concat",O="createTouch"in q.doc,T=" ",F=String,f="split",n="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[f](T),
r={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},b=F.prototype.toLowerCase,c=Math,e=c.max,k=c.min,p=c.abs,i=c.pow,B=c.PI,u="number",o="array",Ta=Object.prototype.toString;g._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i;var Ua=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
Va={NaN:1,Infinity:1,"-Infinity":1},Qa=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,la=c.round,H=parseFloat,X=parseInt,ya=F.prototype.toUpperCase,Na=g._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,
rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ja=g._availableAnimAttrs={blur:u,"clip-rect":"csv",cx:u,cy:u,fill:"colour","fill-opacity":u,"font-size":u,height:u,opacity:u,path:"path",r:u,rx:u,ry:u,stroke:"colour","stroke-opacity":u,"stroke-width":u,transform:"transform",width:u,x:u,y:u},ma=/\s*,\s*/,Wa=
{hs:1,rg:1},Xa=/,?([achlmqrstvxz]),?/gi,Ya=/([achlmrqstvz])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,Za=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,za=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)\s*,?\s*/ig;g._radial_gradient=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/;var ba={},Sa=function(a,l){return H(a)-H(l)},$a=function(){},Ra=function(a){return a},na=g._rectPath=function(a,l,m,x,b){return b?[["M",a+b,l],["l",m-2*b,0],["a",b,b,0,0,1,b,b],["l",0,x-2*b],["a",b,b,0,0,1,-b,b],["l",2*b-m,0],["a",
b,b,0,0,1,-b,-b],["l",0,2*b-x],["a",b,b,0,0,1,b,-b],["z"]]:[["M",a,l],["l",m,0],["l",0,x],["l",-m,0],["z"]]},Aa=function(a,l,m,x){null==x&&(x=m);return[["M",a,l],["m",0,-x],["a",m,x,0,1,1,0,2*x],["a",m,x,0,1,1,0,-2*x],["z"]]},oa=g._getPath={path:function(a){return a.attr("path")},circle:function(a){a=a.attrs;return Aa(a.cx,a.cy,a.r)},ellipse:function(a){a=a.attrs;return Aa(a.cx,a.cy,a.rx,a.ry)},rect:function(a){a=a.attrs;return na(a.x,a.y,a.width,a.height,a.r)},image:function(a){a=a.attrs;return na(a.x,
a.y,a.width,a.height)},text:function(a){a=a._getBBox();return na(a.x,a.y,a.width,a.height)}},Ba=g.mapPath=function(a,l){if(!l)return a;var m,x,b,c,f,d,e,a=aa(a);for(b=0,f=a.length;b<f;b++){e=a[b];for(c=1,d=e.length;c<d;c+=2)m=l.x(e[c],e[c+1]),x=l.y(e[c],e[c+1]),e[c]=m,e[c+1]=x}return a};g._g=q;g.type=q.win.SVGAngle||q.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if("VML"==g.type){var pa=q.doc.createElement("div"),da;pa.innerHTML='<v:shape adj="1"/>';
da=pa.firstChild;da.style.behavior="url(#default#VML)";if(!da||"object"!=typeof da.adj)return g.type="";pa=null}g.svg=!(g.vml="VML"==g.type);g._Paper=J;g.fn=C=J.prototype=g.prototype;g._id=0;g._oid=0;g.is=function(a,l){l=b.call(l);return"finite"==l?!Va[G](+a):"array"==l?a instanceof Array:"null"==l&&null===a||l==typeof a&&null!==a||"object"==l&&a===Object(a)||"array"==l&&Array.isArray&&Array.isArray(a)||Ta.call(a).slice(8,-1).toLowerCase()==l};g.angle=function(a,l,m,x,b,f){return null==b?(a-=m,l-=
x,!a&&!l?0:(180*c.atan2(-l,-a)/B+540)%360):g.angle(a,l,b,f)-g.angle(m,x,b,f)};g.rad=function(a){return a%360*B/180};g.deg=function(a){return 180*a/B%360};g.snapTo=function(a,l,m){m=g.is(m,"finite")?m:10;if(g.is(a,o))for(var x=a.length;x--;){if(p(a[x]-l)<=m)return a[x]}else{a=+a;x=l%a;if(x<m)return l-x;if(x>a-m)return l-x+a}return l};g.createUUID=function(a,l){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,l).toUpperCase()}}(/[xy]/g,function(a){var l=16*c.random()|0;return("x"==
a?l:l&3|8).toString(16)});g.setWindow=function(a){eve("setWindow",g,q.win,a);q.win=a;q.doc=q.win.document;g._engine.initWin&&g._engine.initWin(q.win)};var ea=function(a){if(g.vml){var l=/^\s+|\s+$/g,m;try{var x=new ActiveXObject("htmlfile");x.write("<body>");x.close();m=x.body}catch(b){m=createPopup().document.body}var c=m.createTextRange();ea=z(function(a){try{m.style.color=F(a).replace(l,"");var x=c.queryCommandValue("ForeColor");return"#"+("000000"+((x&255)<<16|x&65280|(x&16711680)>>>16).toString(16)).slice(-6)}catch(b){return"none"}})}else{var f=
q.doc.createElement("i");f.title="Rapha\u00ebl Colour Picker";f.style.display="none";q.doc.body.appendChild(f);ea=z(function(a){f.style.color=a;return q.doc.defaultView.getComputedStyle(f,"").getPropertyValue("color")})}return ea(a)},ab=function(){return"hsb("+[this.h,this.s,this.b]+")"},bb=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ca=function(){return this.hex},Da=function(a,l,m){null==l&&g.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(m=a.b,l=a.g,a=a.r);if(null==l&&g.is(a,"string"))m=g.getRGB(a),
a=m.r,l=m.g,m=m.b;if(1<a||1<l||1<m)a/=255,l/=255,m/=255;return[a,l,m]},Ea=function(a,l,m,x){a*=255;l*=255;m*=255;a={r:a,g:l,b:m,hex:g.rgb(a,l,m),toString:Ca};g.is(x,"finite")&&(a.opacity=x);return a};g.color=function(a){var l;g.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(l=g.hsb2rgb(a),a.r=l.r,a.g=l.g,a.b=l.b,a.hex=l.hex):g.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(l=g.hsl2rgb(a),a.r=l.r,a.g=l.g,a.b=l.b,a.hex=l.hex):(g.is(a,"string")&&(a=g.getRGB(a)),g.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(l=
g.rgb2hsl(a),a.h=l.h,a.s=l.s,a.l=l.l,l=g.rgb2hsb(a),a.v=l.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1));a.toString=Ca;return a};g.hsb2rgb=function(a,l,m,x){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(m=a.b,l=a.s,a=a.h,x=a.o);a*=360;var b,c,f,d,e;a=a%360/60;e=m*l;d=e*(1-p(a%2-1));b=c=f=m-e;a=~~a;b+=[e,d,0,0,d,e][a];c+=[d,e,e,d,0,0][a];f+=[0,0,d,e,e,d][a];return Ea(b,c,f,x)};g.hsl2rgb=function(a,l,m,x){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(m=a.l,l=a.s,a=a.h);if(1<a||1<l||1<m)a/=
360,l/=100,m/=100;var a=360*a,b,c,f,d,e;a=a%360/60;e=2*l*(0.5>m?m:1-m);d=e*(1-p(a%2-1));b=c=f=m-e/2;a=~~a;b+=[e,d,0,0,d,e][a];c+=[d,e,e,d,0,0][a];f+=[0,0,d,e,e,d][a];return Ea(b,c,f,x)};g.rgb2hsb=function(a,l,m){m=Da(a,l,m);a=m[0];l=m[1];m=m[2];var x,b,c;b=e(a,l,m);c=b-k(a,l,m);x=0==c?null:b==a?(l-m)/c:b==l?(m-a)/c+2:(a-l)/c+4;x=60*((x+360)%6)/360;a=0==c?0:c/b;return{h:x,s:a,b:b,toString:ab}};g.rgb2hsl=function(a,l,m){m=Da(a,l,m);a=m[0];l=m[1];m=m[2];var x,b,c,f,d;c=e(a,l,m);f=k(a,l,m);d=c-f;x=0==
d?null:c==a?(l-m)/d:c==l?(m-a)/d+2:(a-l)/d+4;x=60*((x+360)%6)/360;b=(c+f)/2;a=0==d?0:0.5>b?d/(2*b):d/(2-2*b);return{h:x,s:a,l:b,toString:bb}};g._path2string=function(){return this.join(",").replace(Xa,"$1")};g._preload=function(a,l){var m=q.doc.createElement("img");m.style.cssText="position:absolute;left:-9999em;top:-9999em";m.onload=function(){l.call(this);this.onload=null;q.doc.body.removeChild(this)};m.onerror=function(){q.doc.body.removeChild(this)};q.doc.body.appendChild(m);m.src=a};g.getRGB=
z(function(a){if(!a||(a=F(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:R};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:R};!Wa[G](a.toLowerCase().substring(0,2))&&"#"!=a.charAt()&&(a=ea(a));var l,m,b,c,d,e;if(a=a.match(Ua)){a[2]&&(b=X(a[2].substring(5),16),m=X(a[2].substring(3,5),16),l=X(a[2].substring(1,3),16));a[3]&&(b=X((d=a[3].charAt(3))+d,16),m=X((d=a[3].charAt(2))+d,16),l=X((d=a[3].charAt(1))+d,16));a[4]&&(e=a[4][f](ma),l=H(e[0]),"%"==e[0].slice(-1)&&(l*=2.55),
m=H(e[1]),"%"==e[1].slice(-1)&&(m*=2.55),b=H(e[2]),"%"==e[2].slice(-1)&&(b*=2.55),"rgba"==a[1].toLowerCase().slice(0,4)&&(c=H(e[3])),e[3]&&"%"==e[3].slice(-1)&&(c/=100));if(a[5])return e=a[5][f](ma),l=H(e[0]),"%"==e[0].slice(-1)&&(l*=2.55),m=H(e[1]),"%"==e[1].slice(-1)&&(m*=2.55),b=H(e[2]),"%"==e[2].slice(-1)&&(b*=2.55),("deg"==e[0].slice(-3)||"\u00b0"==e[0].slice(-1))&&(l/=360),"hsba"==a[1].toLowerCase().slice(0,4)&&(c=H(e[3])),e[3]&&"%"==e[3].slice(-1)&&(c/=100),g.hsb2rgb(l,m,b,c);if(a[6])return e=
a[6][f](ma),l=H(e[0]),"%"==e[0].slice(-1)&&(l*=2.55),m=H(e[1]),"%"==e[1].slice(-1)&&(m*=2.55),b=H(e[2]),"%"==e[2].slice(-1)&&(b*=2.55),("deg"==e[0].slice(-3)||"\u00b0"==e[0].slice(-1))&&(l/=360),"hsla"==a[1].toLowerCase().slice(0,4)&&(c=H(e[3])),e[3]&&"%"==e[3].slice(-1)&&(c/=100),g.hsl2rgb(l,m,b,c);a={r:l,g:m,b:b,toString:R};a.hex="#"+(16777216|b|m<<8|l<<16).toString(16).slice(1);g.is(c,"finite")&&(a.opacity=c);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:R}},g);g.hsb=z(function(a,
l,m){return g.hsb2rgb(a,l,m).hex});g.hsl=z(function(a,l,m){return g.hsl2rgb(a,l,m).hex});g.rgb=z(function(a,l,m){return"#"+(16777216|m|l<<8|a<<16).toString(16).slice(1)});g.getColor=function(a){var a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75},l=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;1<a.h&&(a.h=0,a.s-=0.2,0>=a.s&&(this.getColor.start={h:0,s:1,b:a.b}));return l.hex};g.getColor.reset=function(){delete this.start};g.parsePathString=z(function(a){if(!a)return null;var l={a:7,c:6,h:1,l:2,
m:2,r:4,q:4,s:4,t:2,v:1,z:0},m=[];g.is(a,o)&&g.is(a[0],o)&&(m=ca(a));m.length||F(a).replace(Ya,function(a,b,c){var d=[],a=b.toLowerCase();c.replace(za,function(a,l){l&&d.push(+l)});"m"==a&&2<d.length&&(m.push([b][E](d.splice(0,2))),a="l",b="m"==b?"l":"L");if("r"==a)m.push([b][E](d));else for(;d.length>=l[a]&&!(m.push([b][E](d.splice(0,l[a]))),!l[a]););});m.toString=g._path2string;return m});g.parseTransformString=z(function(a){if(!a)return null;var l=[];g.is(a,o)&&g.is(a[0],o)&&(l=ca(a));l.length||
F(a).replace(Za,function(a,x,c){var d=[];b.call(x);c.replace(za,function(a,l){l&&d.push(+l)});l.push([x][E](d))});l.toString=g._path2string;return l});g.findDotsAtSegment=function(a,l,m,b,d,f,e,k,g){var p=1-g,n=i(p,3),r=i(p,2),j=g*g,o=j*g,u=n*a+3*r*g*m+3*p*g*g*d+o*e,n=n*l+3*r*g*b+3*p*g*g*f+o*k,r=a+2*g*(m-a)+j*(d-2*m+a),o=l+2*g*(b-l)+j*(f-2*b+l),D=m+2*g*(d-m)+j*(e-2*d+m),j=b+2*g*(f-b)+j*(k-2*f+b),a=p*a+g*m,l=p*l+g*b,d=p*d+g*e,f=p*f+g*k,k=90-180*c.atan2(r-D,o-j)/B;(r>D||o<j)&&(k+=180);return{x:u,y:n,
m:{x:r,y:o},n:{x:D,y:j},start:{x:a,y:l},end:{x:d,y:f},alpha:k}};g._removedFactory=function(a){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+a+"\u201d of removed object");}};var Fa=z(function(a){if(!a)return{x:0,y:0,width:0,height:0};for(var a=aa(a),l=0,m=0,b=[],c=[],d,f=0,g=a.length;f<g;f++)d=a[f],"M"==d[0]?(l=d[1],m=d[2],b.push(l),c.push(m)):(l=cb(l,m,d[1],d[2],d[3],d[4],d[5],d[6]),b=b[E](l.min.x,l.max.x),c=c[E](l.min.y,l.max.y),l=d[5],m=d[6]);a=k[I](0,b);d=k[I](0,
c);return{x:a,y:d,width:e[I](0,b)-a,height:e[I](0,c)-d}},null,function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}}),ca=function(a){var l=[];if(!g.is(a,o)||!g.is(a&&a[0],o))a=g.parsePathString(a);for(var b=0,x=a.length;b<x;b++){l[b]=[];for(var c=0,d=a[b].length;c<d;c++)l[b][c]=a[b][c]}l.toString=g._path2string;return l},db=g._pathToRelative=z(function(a){if(!g.is(a,o)||!g.is(a&&a[0],o))a=g.parsePathString(a);var l=[],m=0,c=0,d=0,f=0,e=0;"M"==a[0][0]&&(m=a[0][1],c=a[0][2],d=m,f=c,e++,l.push(["M",
m,c]));for(var k=a.length;e<k;e++){var i=l[e]=[],p=a[e];if(p[0]!=b.call(p[0]))switch(i[0]=b.call(p[0]),i[0]){case "a":i[1]=p[1];i[2]=p[2];i[3]=p[3];i[4]=p[4];i[5]=p[5];i[6]=+(p[6]-m).toFixed(3);i[7]=+(p[7]-c).toFixed(3);break;case "v":i[1]=+(p[1]-c).toFixed(3);break;case "m":d=p[1],f=p[2];default:for(var n=1,r=p.length;n<r;n++)i[n]=+(p[n]-(n%2?m:c)).toFixed(3)}else{l[e]=[];"m"==p[0]&&(d=p[1]+m,f=p[2]+c);i=0;for(n=p.length;i<n;i++)l[e][i]=p[i]}p=l[e].length;switch(l[e][0]){case "z":m=d;c=f;break;case "h":m+=
+l[e][p-1];break;case "v":c+=+l[e][p-1];break;default:m+=+l[e][p-2],c+=+l[e][p-1]}}l.toString=g._path2string;return l},0,ca),Ga=g._pathToAbsolute=z(function(a){if(!g.is(a,o)||!g.is(a&&a[0],o))a=g.parsePathString(a);if(!a||!a.length)return[["M",0,0]];var l=[],b=0,c=0,d=0,f=0,e=0;"M"==a[0][0]&&(b=+a[0][1],c=+a[0][2],d=b,f=c,e++,l[0]=["M",b,c]);for(var k,p=e,i=a.length;p<i;p++){l.push(e=[]);k=a[p];if(k[0]!=ya.call(k[0]))switch(e[0]=ya.call(k[0]),e[0]){case "A":e[1]=k[1];e[2]=k[2];e[3]=k[3];e[4]=k[4];
e[5]=k[5];e[6]=+(k[6]+b);e[7]=+(k[7]+c);break;case "V":e[1]=+k[1]+c;break;case "H":e[1]=+k[1]+b;break;case "R":for(var n=[b,c][E](k.slice(1)),r=2,j=n.length;r<j;r++)n[r]=+n[r]+b,n[++r]=+n[r]+c;l.pop();l=l[E](N(n));break;case "M":d=+k[1]+b,f=+k[2]+c;default:for(r=1,j=k.length;r<j;r++)e[r]=+k[r]+(r%2?b:c)}else if("R"==k[0])n=[b,c][E](k.slice(1)),l.pop(),l=l[E](N(n)),e=["R"][E](k.slice(-2));else{r=0;for(j=k.length;r<j;r++)e[r]=k[r]}switch(e[0]){case "Z":b=d;c=f;break;case "H":b=e[1];break;case "V":c=
e[1];break;case "M":d=e[e.length-2],f=e[e.length-1];default:b=e[e.length-2],c=e[e.length-1]}}l.toString=g._path2string;return l},null,ca),Ha=function(a,l,b,c,d,e){var f=1/3,k=2/3;return[f*a+k*b,f*l+k*c,f*d+k*b,f*e+k*c,d,e]},Ia=function(a,l,b,d,e,k,g,i,r,n){var j=120*B/180,o=B/180*(+e||0),u=[],h,q=z(function(a,b,l){var m=a*c.cos(l)-b*c.sin(l),a=a*c.sin(l)+b*c.cos(l);return{x:m,y:a}});if(n)w=n[0],h=n[1],k=n[2],D=n[3];else{h=q(a,l,-o);a=h.x;l=h.y;h=q(i,r,-o);i=h.x;r=h.y;c.cos(B/180*e);c.sin(B/180*e);
h=(a-i)/2;w=(l-r)/2;D=h*h/(b*b)+w*w/(d*d);1<D&&(D=c.sqrt(D),b*=D,d*=D);var D=b*b,Q=d*d,D=(k==g?-1:1)*c.sqrt(p((D*Q-D*w*w-Q*h*h)/(D*w*w+Q*h*h))),k=D*b*w/d+(a+i)/2,D=D*-d*h/b+(l+r)/2,w=c.asin(((l-D)/d).toFixed(9));h=c.asin(((r-D)/d).toFixed(9));w=a<k?B-w:w;h=i<k?B-h:h;0>w&&(w=2*B+w);0>h&&(h=2*B+h);g&&w>h&&(w-=2*B);!g&&h>w&&(h-=2*B)}if(p(h-w)>j){var u=h,Q=i,t=r;h=w+j*(g&&h>w?1:-1);i=k+b*c.cos(h);r=D+d*c.sin(h);u=Ia(i,r,b,d,e,0,g,Q,t,[h,u,k,D])}k=h-w;e=c.cos(w);j=c.sin(w);g=c.cos(h);h=c.sin(h);k=c.tan(k/
4);b=4/3*b*k;k*=4/3*d;d=[a,l];a=[a+b*j,l-k*e];l=[i+b*h,r-k*g];i=[i,r];a[0]=2*d[0]-a[0];a[1]=2*d[1]-a[1];if(n)return[a,l,i][E](u);u=[a,l,i][E](u).join()[f](",");n=[];i=0;for(r=u.length;i<r;i++)n[i]=i%2?q(u[i-1],u[i],o).y:q(u[i],u[i+1],o).x;return n},fa=function(a,b,m,c,d,e,f,k,g){var p=1-g;return{x:i(p,3)*a+3*i(p,2)*g*m+3*p*g*g*d+i(g,3)*f,y:i(p,3)*b+3*i(p,2)*g*c+3*p*g*g*e+i(g,3)*k}},cb=z(function(a,b,m,d,f,g,i,r){var n=f-2*m+a-(i-2*f+m),j=2*(m-a)-2*(f-m),o=a-m,h=(-j+c.sqrt(j*j-4*n*o))/2/n,u=(-j-c.sqrt(j*
j-4*n*o))/2/n,q=[b,r],B=[a,i],D;"1e12"<p(h)&&(h=0.5);"1e12"<p(u)&&(u=0.5);0<h&&1>h&&(D=fa(a,b,m,d,f,g,i,r,h),B.push(D.x),q.push(D.y));0<u&&1>u&&(D=fa(a,b,m,d,f,g,i,r,u),B.push(D.x),q.push(D.y));n=g-2*d+b-(r-2*g+d);j=2*(d-b)-2*(g-d);o=b-d;h=(-j+c.sqrt(j*j-4*n*o))/2/n;u=(-j-c.sqrt(j*j-4*n*o))/2/n;"1e12"<p(h)&&(h=0.5);"1e12"<p(u)&&(u=0.5);0<h&&1>h&&(D=fa(a,b,m,d,f,g,i,r,h),B.push(D.x),q.push(D.y));0<u&&1>u&&(D=fa(a,b,m,d,f,g,i,r,u),B.push(D.x),q.push(D.y));return{min:{x:k[I](0,B),y:k[I](0,q)},max:{x:e[I](0,
B),y:e[I](0,q)}}}),aa=g._path2curve=z(function(a,b){var m=Ga(a),c=b&&Ga(b),d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k=function(a,b){var l,c;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"][E](Ia[I](0,[b.x,b.y][E](a.slice(1))));break;case "S":l=b.x+(b.x-(b.bx||b.x));c=b.y+(b.y-(b.by||b.y));a=["C",l,c][E](a.slice(1));break;case "T":b.qx=b.x+(b.x-(b.qx||b.x));
b.qy=b.y+(b.y-(b.qy||b.y));a=["C"][E](Ha(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"][E](Ha(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"][E]([b.x,b.y,a[1],a[2],a[1],a[2]]);break;case "H":a=["C"][E]([b.x,b.y,a[1],b.y,a[1],b.y]);break;case "V":a=["C"][E]([b.x,b.y,b.x,a[1],b.x,a[1]]);break;case "Z":a=["C"][E]([b.x,b.y,b.X,b.Y,b.X,b.Y])}return a},g=function(a,b){if(7<a[b].length){a[b].shift();for(var l=a[b];l.length;)a.splice(b++,0,["C"][E](l.splice(0,6)));a.splice(b,
1);r=e(m.length,c&&c.length||0)}},i=function(a,b,l,d,f){a&&b&&"M"==a[f][0]&&"M"!=b[f][0]&&(b.splice(f,0,["M",d.x,d.y]),l.bx=0,l.by=0,l.x=a[f][1],l.y=a[f][2],r=e(m.length,c&&c.length||0))},p=0,r=e(m.length,c&&c.length||0);for(;p<r;p++){m[p]=k(m[p],d);g(m,p);c&&(c[p]=k(c[p],f));c&&g(c,p);i(m,c,d,f,p);i(c,m,f,d,p);var n=m[p],j=c&&c[p],h=n.length,o=c&&j.length;d.x=n[h-2];d.y=n[h-1];d.bx=H(n[h-4])||d.x;d.by=H(n[h-3])||d.y;f.bx=c&&(H(j[o-4])||f.x);f.by=c&&(H(j[o-3])||f.y);f.x=c&&j[o-2];f.y=c&&j[o-1]}return c?
[m,c]:m},null,ca);g._parseDots=z(function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e={},f=a[c].match(/^([^:]*):?([\d\.]*)/);e.color=g.getRGB(f[1]);if(e.color.error)return null;e.color=e.color.hex;f[2]&&(e.offset=f[2]+"%");b.push(e)}for(c=1,d=b.length-1;c<d;c++)if(!b[c].offset){a=H(b[c-1].offset||0);f=0;for(e=c+1;e<d;e++)if(b[e].offset){f=b[e].offset;break}f||(f=100,e=d);f=H(f);for(f=(f-a)/(e-c+1);c<e;c++)a+=f,b[c].offset=a+"%"}return b});var ga=g._tear=function(a,b){a==b.top&&(b.top=a.prev);a==
b.bottom&&(b.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)};g._tofront=function(a,b){b.top!==a&&(ga(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)};g._toback=function(a,b){b.bottom!==a&&(ga(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)};g._insertafter=function(a,b,c){ga(a,c);b==c.top&&(c.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a};g._insertbefore=function(a,b,c){ga(a,c);b==c.bottom&&(c.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;
b.prev=a;a.next=b};var Pa=g._extractTransform=function(a,b){if(null==b)return a._.transform;var b=F(b).replace(/\.{3}|\u2026/g,a._.transform||""),c=g.parseTransformString(b),d=0,e=0,f=0,k=1,i=1,p=a._,n=new v;p.transform=c||[];if(c)for(var r=0,j=c.length;r<j;r++){var h=c[r],o=h.length,u=F(h[0]).toLowerCase(),q=h[0]!=u,B=q?n.invert():0,w,t,y,A,z;"t"==u&&3==o?q?(w=B.x(0,0),t=B.y(0,0),y=B.x(h[1],h[2]),A=B.y(h[1],h[2]),n.translate(y-w,A-t)):n.translate(h[1],h[2]):"r"==u?2==o?(z=z||a.getBBox(1),n.rotate(h[1],
z.x+z.width/2,z.y+z.height/2),d+=h[1]):4==o&&(q?(y=B.x(h[2],h[3]),A=B.y(h[2],h[3]),n.rotate(h[1],y,A)):n.rotate(h[1],h[2],h[3]),d+=h[1]):"s"==u?2==o||3==o?(z=z||a.getBBox(1),n.scale(h[1],h[o-1],z.x+z.width/2,z.y+z.height/2),k*=h[1],i*=h[o-1]):5==o&&(q?(y=B.x(h[3],h[4]),A=B.y(h[3],h[4]),n.scale(h[1],h[2],y,A)):n.scale(h[1],h[2],h[3],h[4]),k*=h[1],i*=h[2]):"m"==u&&7==o&&n.add(h[1],h[2],h[3],h[4],h[5],h[6]);p.dirtyT=1;a.matrix=n}a.matrix=n;p.sx=k;p.sy=i;p.deg=d;p.dx=e=n.e;p.dy=f=n.f;1==k&&1==i&&!d&&
p.bbox?(p.bbox.x+=+e,p.bbox.y+=+f):p.dirtyT=1},Ja=function(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},Oa=g._equaliseTransform=function(a,b){b=F(b).replace(/\.{3}|\u2026/g,a);a=g.parseTransformString(a)||[];b=g.parseTransformString(b)||[];for(var c=e(a.length,b.length),d=[],f=[],k=0,i,p,n,r;k<c;k++){n=a[k]||Ja(b[k]);r=b[k]||Ja(n);
if(n[0]!=r[0]||"r"==n[0].toLowerCase()&&(n[2]!=r[2]||n[3]!=r[3])||"s"==n[0].toLowerCase()&&(n[3]!=r[3]||n[4]!=r[4]))return;d[k]=[];f[k]=[];for(i=0,p=e(n.length,r.length);i<p;i++)i in n&&(d[k][i]=n[i]),i in r&&(f[k][i]=r[i])}return{from:d,to:f}};g._getContainer=function(a,b,c,d){var e;e=null==d&&!g.is(a,"object")?q.doc.getElementById(a):a;if(null!=e)return e.tagName?null==b?{container:e,width:e.style.pixelWidth||e.offsetWidth,height:e.style.pixelHeight||e.offsetHeight}:{container:e,width:b,height:c}:
{container:1,x:a,y:b,width:c,height:d}};g.pathToRelative=db;g._engine={};g.path2curve=aa;g.matrix=function(a,b,c,d,e,f){return new v(a,b,c,d,e,f)};(function(a){function b(a){var l=c.sqrt(d(a));a[0]&&(a[0]/=l);a[1]&&(a[1]/=l)}function d(a){return a[0]*a[0]+a[1]*a[1]}a.add=function(a,b,c,d,l,e){var m=[[],[],[]],f=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],b=[[a,c,l],[b,d,e],[0,0,1]];a&&a instanceof v&&(b=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(a=0;3>a;a++)for(c=0;3>c;c++){for(d=l=0;3>
d;d++)l+=f[a][d]*b[d][c];m[a][c]=l}this.a=m[0][0];this.b=m[1][0];this.c=m[0][1];this.d=m[1][1];this.e=m[0][2];this.f=m[1][2]};a.invert=function(){var a=this.a*this.d-this.b*this.c;return new v(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c*this.f-this.d*this.e)/a,(this.b*this.e-this.a*this.f)/a)};a.clone=function(){return new v(this.a,this.b,this.c,this.d,this.e,this.f)};a.translate=function(a,b){this.add(1,0,0,1,a,b)};a.scale=function(a,b,c,d){null==b&&(b=a);(c||d)&&this.add(1,0,0,1,c,d);this.add(a,
0,0,b,0,0);(c||d)&&this.add(1,0,0,1,-c,-d)};a.rotate=function(a,b,d){a=g.rad(a);b=b||0;d=d||0;var l=+c.cos(a).toFixed(9),a=+c.sin(a).toFixed(9);this.add(l,a,-a,l,b,d);this.add(1,0,0,1,-b,-d)};a.x=function(a,b){return a*this.a+b*this.c+this.e};a.y=function(a,b){return a*this.b+b*this.d+this.f};a.get=function(a){return+this[F.fromCharCode(97+a)].toFixed(4)};a.toString=function(){return g.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),
this.get(2),this.get(1),this.get(3),0,0].join()};a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};a.split=function(){var a={};a.dx=this.e;a.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];a.scalex=c.sqrt(d(e[0]));b(e[0]);a.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1];
e[1]=[e[1][0]-e[0][0]*a.shear,e[1][1]-e[0][1]*a.shear];a.scaley=c.sqrt(d(e[1]));b(e[1]);a.shear/=a.scaley;var f=-e[0][1],e=e[1][1];0>e?(a.rotate=g.deg(c.acos(e)),0>f&&(a.rotate=360-a.rotate)):a.rotate=g.deg(c.asin(f));a.isSimple=!+a.shear.toFixed(9)&&(a.scalex.toFixed(9)==a.scaley.toFixed(9)||!a.rotate);a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate;a.noRotation=!+a.shear.toFixed(9)&&!a.rotate;return a};a.toTransformString=function(a){a=a||this[f]();return a.isSimple?
(a.scalex=+a.scalex.toFixed(4),a.scaley=+a.scaley.toFixed(4),a.rotate=+a.rotate.toFixed(4),(a.dx&&a.dy?"t"+[a.dx,a.dy]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[a.rotate,0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}})(v.prototype);var ha=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(ha&&4>ha[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==
navigator.vendor&&ha&&8>ha[1]?C.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:C.safari=$a;for(var eb=function(){this.returnValue=!1},fb=function(){return this.originalEvent.preventDefault()},gb=function(){this.cancelBubble=!0},hb=function(){return this.originalEvent.stopPropagation()},ib=function(){if(q.doc.addEventListener)return function(a,b,c,d){var e=O&&r[b]?r[b]:b,f=function(e){var f=e.clientX+(q.doc.documentElement.scrollLeft||
q.doc.body.scrollLeft),k=e.clientY+(q.doc.documentElement.scrollTop||q.doc.body.scrollTop);if(O&&r[G](b))for(var g=0,i=e.targetTouches&&e.targetTouches.length;g<i;g++)if(e.targetTouches[g].target==a){i=e;e=e.targetTouches[g];e.originalEvent=i;e.preventDefault=fb;e.stopPropagation=hb;break}return c.call(d,e,f,k)};a.addEventListener(e,f,!1);return function(){a.removeEventListener(e,f,!1);return!0}};if(q.doc.attachEvent)return function(a,b,c,d){var e=function(a){var a=a||q.win.event,b=a.clientX+(q.doc.documentElement.scrollLeft||
q.doc.body.scrollLeft),e=a.clientY+(q.doc.documentElement.scrollTop||q.doc.body.scrollTop);a.preventDefault=a.preventDefault||eb;a.stopPropagation=a.stopPropagation||gb;return c.call(d,a,b,e)};a.attachEvent("on"+b,e);return function(){a.detachEvent("on"+b,e);return!0}}}(),Y=[],qa=function(a){for(var b=a.clientX,c=a.clientY,d=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,e=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft,f,k=Y.length;k--;){f=Y[k];if(O)for(var g=a.touches.length,i;g--;){if(i=
a.touches[g],i.identifier==f.el._drag.id){b=i.clientX;c=i.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var g=f.el.node,p;i=g.nextSibling;var n=g.parentNode,r=g.style.display;q.win.opera&&n.removeChild(g);g.style.display="none";p=f.el.paper.getElementByPoint(b,c);g.style.display=r;q.win.opera&&(i?n.insertBefore(g,i):n.appendChild(g));p&&eve("drag.over."+f.el.id,f.el,p);b+=e;c+=d;eve("drag.move."+f.el.id,f.move_scope||f.el,b-f.el._drag.x,c-f.el._drag.y,
b,c,a)}},ra=function(a){g.unmousemove(qa).unmouseup(ra);for(var b=Y.length,c;b--;)c=Y[b],c.el._drag={},eve("drag.end."+c.el.id,c.end_scope||c.start_scope||c.move_scope||c.el,a);Y=[]},K=g.el={},Ka=n.length;Ka--;)(function(a){g[a]=K[a]=function(b,c){g.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:ib(this.shape||this.node||q.doc,a,b,c||this)}));return this};g["un"+a]=K["un"+a]=function(b){for(var c=this.events,d=c.length;d--;)if(c[d].name==a&&c[d].f==b){c[d].unbind();
c.splice(d,1);!c.length&&delete this.events;break}return this}})(n[Ka]);K.data=function(a,b){var c=ba[this.id]=ba[this.id]||{};if(1==arguments.length){if(g.is(a,"object")){for(var d in a)a[G](d)&&this.data(d,a[d]);return this}eve("data.get."+this.id,this,c[a],a);return c[a]}c[a]=b;eve("data.set."+this.id,this,b,a);return this};K.removeData=function(a){null==a?ba[this.id]={}:ba[this.id]&&delete ba[this.id][a];return this};K.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)};K.unhover=
function(a,b){return this.unmouseover(a).unmouseout(b)};var Z=[];K.drag=function(a,b,c,d,e,f){function k(i){(i.originalEvent||i).preventDefault();var p=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,n=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft;this._drag.x=i.clientX+n;this._drag.y=i.clientY+p;this._drag.id=i.identifier;!Y.length&&g.mousemove(qa).mouseup(ra);Y.push({el:this,move_scope:d,start_scope:e,end_scope:f});b&&eve.on("drag.start."+this.id,b);a&&eve.on("drag.move."+this.id,
a);c&&eve.on("drag.end."+this.id,c);eve("drag.start."+this.id,e||d||this,i.clientX+n,i.clientY+p,i)}this._drag={};Z.push({el:this,start:k});this.mousedown(k);return this};K.onDragOver=function(a){a?eve.on("drag.over."+this.id,a):eve.unbind("drag.over."+this.id)};K.undrag=function(){for(var a=Z.length;a--;)Z[a].el==this&&(this.unmousedown(Z[a].start),Z.splice(a,1),eve.unbind("drag.*."+this.id));!Z.length&&g.unmousemove(qa).unmouseup(ra)};C.circle=function(a,b,c){a=g._engine.circle(this,a||0,b||0,c||
0);this.__set__&&this.__set__.push(a);return a};C.rect=function(a,b,c,d,e){a=g._engine.rect(this,a||0,b||0,c||0,d||0,e||0);this.__set__&&this.__set__.push(a);return a};C.ellipse=function(a,b,c,d){a=g._engine.ellipse(this,a||0,b||0,c||0,d||0);this.__set__&&this.__set__.push(a);return a};C.path=function(a){a&&!g.is(a,"string")&&!g.is(a[0],o)&&(a+="");var b=g._engine.path(g.format[I](g,arguments),this);this.__set__&&this.__set__.push(b);return b};C.image=function(a,b,c,d,e){a=g._engine.image(this,a||
"about:blank",b||0,c||0,d||0,e||0);this.__set__&&this.__set__.push(a);return a};C.text=function(a,b,c){a=g._engine.text(this,a||0,b||0,F(c));this.__set__&&this.__set__.push(a);return a};C.set=function(a){!g.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new $(a);this.__set__&&this.__set__.push(b);return b};C.setStart=function(a){this.__set__=a||this.set()};C.setFinish=function(){var a=this.__set__;delete this.__set__;return a};C.setSize=function(a,b){return g._engine.setSize.call(this,
a,b)};C.setViewBox=function(a,b,c,d,e){return g._engine.setViewBox.call(this,a,b,c,d,e)};C.top=C.bottom=null;C.raphael=g;C.getElementByPoint=function(a,b){var c,d,e=this.canvas,f=q.doc.elementFromPoint(a,b);if(q.win.opera&&"svg"==f.tagName){d=e.getBoundingClientRect();c=e.ownerDocument;var k=c.body,i=c.documentElement;c=d.top+(q.win.pageYOffset||i.scrollTop||k.scrollTop)-(i.clientTop||k.clientTop||0);d=d.left+(q.win.pageXOffset||i.scrollLeft||k.scrollLeft)-(i.clientLeft||k.clientLeft||0);k=e.createSVGRect();
k.x=a-d;k.y=b-c;k.width=k.height=1;c=e.getIntersectionList(k,null);c.length&&(f=c[c.length-1])}if(!f)return null;for(;f.parentNode&&f!=e.parentNode&&!f.raphael;)f=f.parentNode;f==this.canvas.parentNode&&(f=e);f=f&&f.raphael?this.getById(f.raphaelid):null;return f};C.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null};C.forEach=function(a,b){for(var c=this.bottom;c&&!(!1===a.call(b,c));)c=c.next;return this};K.getBBox=function(a){if(this.removed)return{};var b=this._;
if(a){if(b.dirty||!b.bboxwt)this.realPath=oa[this.type](this),b.bboxwt=Fa(this.realPath),b.bboxwt.toString=y,b.dirty=0;return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath)b.bboxwt=0,this.realPath=oa[this.type](this);b.bbox=Fa(Ba(this.realPath,this.matrix));b.bbox.toString=y;b.dirty=b.dirtyT=0}return b.bbox};K.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a};K.glow=function(a){if("text"==
this.type)return null;for(var a=a||{},b=(a.width||10)+(+this.attr("stroke-width")||1),c=a.fill||!1,d=a.opacity||0.5,e=a.offsetx||0,f=a.offsety||0,a=a.color||"#000",k=b/2,i=this.paper,g=i.set(),p=this.realPath||oa[this.type](this),p=this.matrix?Ba(p,this.matrix):p,n=1;n<k+1;n++)g.push(i.path(p).attr({stroke:a,fill:c?a:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b/k*n).toFixed(3),opacity:+(d/k).toFixed(3)}));return g.insertBefore(this).translate(e,f)};var sa={},ia=function(a,
b,c,d,e,f,k,p,n){var r=0,h=100,j=[a,b,c,d,e,f,k,p].join(),o=sa[j],u,B;!o&&(sa[j]=o={data:[]});o.timer&&clearTimeout(o.timer);o.timer=setTimeout(function(){delete sa[j]},2E3);if(null!=n&&!o.precision){var q=ia(a,b,c,d,e,f,k,p);o.precision=10*~~q;o.data=[]}h=o.precision||h;for(q=0;q<h+1;q++){o.data[q*h]?B=o.data[q*h]:(B=g.findDotsAtSegment(a,b,c,d,e,f,k,p,q/h),o.data[q*h]=B);q&&(r+=i(i(u.x-B.x,2)+i(u.y-B.y,2),0.5));if(null!=n&&r>=n)return B;u=B}if(null==n)return r},ta=function(a,b){return function(c,
d,e){for(var c=aa(c),f,k,i,p,n="",r={},h,j=0,o=0,u=c.length;o<u;o++){i=c[o];if("M"==i[0])f=+i[1],k=+i[2];else{p=ia(f,k,i[1],i[2],i[3],i[4],i[5],i[6]);if(j+p>d){if(b&&!r.start){h=ia(f,k,i[1],i[2],i[3],i[4],i[5],i[6],d-j);n+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y];if(e)return n;r.start=n;n=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,i[5],i[6]].join();j+=p;f=+i[5];k=+i[6];continue}if(!a&&!b)return h=ia(f,k,i[1],i[2],i[3],i[4],i[5],i[6],d-j),{x:h.x,y:h.y,alpha:h.alpha}}j+=p;f=+i[5];k=+i[6]}n+=
i.shift()+i}r.end=n;h=a?j:b?r:g.findDotsAtSegment(f,k,i[0],i[1],i[2],i[3],i[4],i[5],1);h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha});return h}},La=ta(1),Ma=ta(),ua=ta(0,1);g.getTotalLength=La;g.getPointAtLength=Ma;g.getSubpath=function(a,b,c){if(1.0E-6>this.getTotalLength(a)-c)return ua(a,b).end;a=ua(a,c,1);return b?ua(a,b).end:a};K.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():La(this.attrs.path)};K.getPointAtLength=function(a){if("path"==this.type)return Ma(this.attrs.path,
a)};K.getSubpath=function(a,b){if("path"==this.type)return g.getSubpath(this.attrs.path,a,b)};var U=g.easing_formulas={linear:function(a){return a},"<":function(a){return i(a,1.7)},">":function(a){return i(a,0.48)},"<>":function(a){var b=0.48-a/1.04,d=c.sqrt(0.1734+b*b),a=d-b,a=i(p(a),1/3)*(0>a?-1:1),b=-d-b,b=i(p(b),1/3)*(0>b?-1:1),a=a+b+0.5;return 3*(1-a)*a*a+a*a*a},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){return a==
!!a?a:i(2,-10*a)*c.sin(2*(a-0.075)*B/0.3)+1},bounce:function(a){var b;a<1/2.75?b=7.5625*a*a:a<2/2.75?(a-=1.5/2.75,b=7.5625*a*a+0.75):a<2.5/2.75?(a-=2.25/2.75,b=7.5625*a*a+0.9375):(a-=2.625/2.75,b=7.5625*a*a+0.984375);return b}};U.easeIn=U["ease-in"]=U["<"];U.easeOut=U["ease-out"]=U[">"];U.easeInOut=U["ease-in-out"]=U["<>"];U["back-in"]=U.backIn;U["back-out"]=U.backOut;var M=[],xa=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||
window.msRequestAnimationFrame||function(a){setTimeout(a,16)},ka=function(){for(var a=+new Date,b=0;b<M.length;b++){var c=M[b];if(!c.el.removed&&!c.paused){var e=a-c.start,f=c.ms,k=c.easing,i=c.from,n=c.diff,p=c.to,h=c.el,r={},j,o={},B;c.initstatus?(e=(c.initstatus*c.anim.top-c.prev)/(c.percent-c.prev)*f,c.status=c.initstatus,delete c.initstatus,c.stop&&M.splice(b--,1)):c.status=(c.prev+(c.percent-c.prev)*(e/f))/c.anim.top;if(!(0>e))if(e<f){var q=k(e/f),t;for(t in i)if(i[G](t)){switch(ja[t]){case u:j=
+i[t]+q*f*n[t];break;case "colour":j="rgb("+[va(la(i[t].r+q*f*n[t].r)),va(la(i[t].g+q*f*n[t].g)),va(la(i[t].b+q*f*n[t].b))].join()+")";break;case "path":j=[];e=0;for(k=i[t].length;e<k;e++){j[e]=[i[t][e][0]];p=1;for(o=i[t][e].length;p<o;p++)j[e][p]=+i[t][e][p]+q*f*n[t][e][p];j[e]=j[e].join(T)}j=j.join(T);break;case "transform":if(n[t].real){j=[];for(e=0,k=i[t].length;e<k;e++){j[e]=[i[t][e][0]];for(p=1,o=i[t][e].length;p<o;p++)j[e][p]=i[t][e][p]+q*f*n[t][e][p]}}else j=function(a){return+i[t][a]+q*f*
n[t][a]},j=[["m",j(0),j(1),j(2),j(3),j(4),j(5)]];break;case "csv":if("clip-rect"==t)for(j=[],e=4;e--;)j[e]=+i[t][e]+q*f*n[t][e];break;default:k=[][E](i[t]);for(j=[],e=h.paper.customAttributes[t].length;e--;)j[e]=+k[e]+q*f*n[t][e]}r[t]=j}h.attr(r);(function(a,b,c){setTimeout(function(){eve("anim.frame."+a,b,c)})})(h.id,h,c.anim)}else{(function(a,b,c){setTimeout(function(){eve("anim.frame."+b.id,b,c);eve("anim.finish."+b.id,b,c);g.is(a,"function")&&a.call(b)})})(c.callback,h,c.anim);h.attr(p);M.splice(b--,
1);if(1<c.repeat&&!c.next){for(B in p)p[G](B)&&(o[B]=c.totalOrigin[B]);c.el.attr(o);d(c.anim,c.el,c.anim.percents[0],null,c.totalOrigin,c.repeat-1)}c.next&&!c.stop&&d(c.anim,c.el,c.next,null,c.totalOrigin,c.repeat)}}}g.svg&&h&&h.paper&&h.paper.safari();M.length&&xa(ka)},va=function(a){return 255<a?255:0>a?0:a};K.animateWith=function(a,b,c,e,d,f){c=c?g.animation(c,e,d,f):b;a=a.status(b);return this.animate(c).status(c,a*b.ms/c.ms)};K.onAnimation=function(a){a?eve.on("anim.frame."+this.id,a):eve.unbind("anim.frame."+
this.id);return this};j.prototype.delay=function(a){var b=new j(this.anim,this.ms);b.times=this.times;b.del=+a||0;return b};j.prototype.repeat=function(a){var b=new j(this.anim,this.ms);b.del=this.del;b.times=c.floor(e(a,0))||1;return b};g.animation=function(a,b,c,e){if(a instanceof j)return a;if(g.is(c,"function")||!c)e=e||c||null,c=null;a=Object(a);b=+b||0;var d={},f,k;for(k in a)a[G](k)&&H(k)!=k&&H(k)+"%"!=k&&(f=!0,d[k]=a[k]);if(!f)return new j(a,b);c&&(d.easing=c);e&&(d.callback=e);return new j({100:d},
b)};K.animate=function(a,b,c,e){if(this.removed)return e&&e.call(this),this;a=a instanceof j?a:g.animation(a,b,c,e);d(a,this,a.percents[0],null,this.attr());return this};K.setTime=function(a,b){a&&null!=b&&this.status(a,k(b,a.ms)/a.ms);return this};K.status=function(a,b){var c=[],e=0,f,i;if(null!=b)return d(a,this,-1,k(b,1)),this;for(f=M.length;e<f;e++)if(i=M[e],i.el.id==this.id&&(!a||i.anim==a)){if(a)return i.status;c.push({anim:i.anim,status:i.status})}return a?0:c};K.pause=function(a){for(var b=
0;b<M.length;b++)M[b].el.id==this.id&&(!a||M[b].anim==a)&&!1!==eve("anim.pause."+this.id,this,M[b].anim)&&(M[b].paused=!0);return this};K.resume=function(a){for(var b=0;b<M.length;b++)if(M[b].el.id==this.id&&(!a||M[b].anim==a)){var c=M[b];!1!==eve("anim.resume."+this.id,this,c.anim)&&(delete c.paused,this.status(c.anim,c.status))}return this};K.stop=function(a){for(var b=0;b<M.length;b++)M[b].el.id==this.id&&(!a||M[b].anim==a)&&!1!==eve("anim.stop."+this.id,this,M[b].anim)&&M.splice(b--,1);return this};
K.toString=function(){return"Rapha\u00ebl\u2019s object"};var $=function(a){this.items=[];this.length=0;this.type="set";if(a)for(var b=0,c=a.length;b<c;b++)a[b]&&(a[b].constructor==K.constructor||a[b].constructor==$)&&(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},S=$.prototype;S.push=function(){for(var a,b,c=0,e=arguments.length;c<e;c++)a=arguments[c],a&&(a.constructor==K.constructor||a.constructor==$)&&(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this};
S.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};S.forEach=function(a,b){for(var c=0,e=this.items.length;c<e&&!(!1===a.call(b,this.items[c],c));c++);return this};for(var wa in K)K[G](wa)&&(S[wa]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][I](c,b)})}}(wa));S.attr=function(a,b){if(a&&g.is(a,o)&&g.is(a[0],"object"))for(var c=0,e=a.length;c<e;c++)this.items[c].attr(a[c]);else{c=0;for(e=this.items.length;c<e;c++)this.items[c].attr(a,
b)}return this};S.clear=function(){for(;this.length;)this.pop()};S.splice=function(a,b,c){a=0>a?e(this.length+a,0):a;b=e(0,k(this.length-a,b));var d=[],f=[],i=[],p;for(p=2;p<arguments.length;p++)i.push(arguments[p]);for(p=0;p<b;p++)f.push(this[a+p]);for(;p<this.length-a;p++)d.push(this[a+p]);var n=i.length;for(p=0;p<n+d.length;p++)this.items[a+p]=this[a+p]=p<n?i[p]:d[p-n];for(p=this.items.length=this.length-=b-n;this[p];)delete this[p++];return new $(f)};S.exclude=function(a){for(var b=0,c=this.length;b<
c;b++)if(this[b]==a)return this.splice(b,1),!0};S.animate=function(a,b,c,e){(g.is(c,"function")||!c)&&(e=c||null);var d=this.items.length,f=d,k=this,i;if(!d)return this;e&&(i=function(){!--d&&e.call(k)});c=g.is(c,"string")?c:i;b=g.animation(a,b,c,i);for(a=this.items[--f].animate(b);f--;)this.items[f]&&!this.items[f].removed&&this.items[f].animateWith(a,b);return this};S.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this};S.getBBox=function(){for(var a=
[],b=[],c=[],d=[],f=this.items.length;f--;)if(!this.items[f].removed){var i=this.items[f].getBBox();a.push(i.x);b.push(i.y);c.push(i.x+i.width);d.push(i.y+i.height)}a=k[I](0,a);b=k[I](0,b);return{x:a,y:b,width:e[I](0,c)-a,height:e[I](0,d)-b}};S.clone=function(a){for(var a=new $,b=0,c=this.items.length;b<c;b++)a.push(this.items[b].clone());return a};S.toString=function(){return"Rapha\u00ebl\u2018s set"};g.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},
c=a.face["font-family"],e;for(e in a.face)a.face[G](e)&&(b.face[e]=a.face[e]);this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=X(a.face["units-per-em"],10);for(var d in a.glyphs)if(a.glyphs[G](d)&&(c=a.glyphs[d],b.glyphs[d]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},c.k))for(var f in c.k)c[G](f)&&(b.glyphs[d].k[f]=c.k[f])}return a};C.getFont=function(a,b,c,e){e=e||"normal";c=c||"normal";
b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(g.fonts){var d=g.fonts[a];if(!d){var a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i"),f;for(f in g.fonts)if(g.fonts[G](f)&&a.test(f)){d=g.fonts[f];break}}var k;if(d){f=0;for(a=d.length;f<a&&!(k=d[f],k.face["font-weight"]==b&&(k.face["font-style"]==c||!k.face["font-style"])&&k.face["font-stretch"]==e);f++);}return k}};C.print=function(a,b,c,d,i,p,n){p=p||"middle";n=e(k(n||0,1),-1);var h=this.set(),r=F(c)[f](""),j=0;g.is(d,
c)&&(d=this.getFont(d));if(d){for(var c=(i||16)/d.face["units-per-em"],o=d.face.bbox[f](W),i=+o[0],p=+o[1]+("baseline"==p?o[3]-o[1]+ +d.face.descent:(o[3]-o[1])/2),o=0,u=r.length;o<u;o++){var q=o&&d.glyphs[r[o-1]]||{},B=d.glyphs[r[o]];j+=o?(q.w||d.w)+(q.k&&q.k[r[o]]||0)+d.w*n:0;B&&B.d&&h.push(this.path(B.d).attr({fill:"#000",stroke:"none",transform:[["t",j*c,0]]}))}h.transform(["...s",c,c,i,p,"t",(a-i)/c,(b-p)/c])}return h};C.add=function(a){if(g.is(a,"array"))for(var b=this.set(),c=0,d=a.length,
e;c<d;c++)e=a[c]||{},A[G](e.type)&&b.push(this[e.type]().attr(e));return b};g.format=function(a,b){var c=g.is(b,o)?[0][E](b):arguments;a&&g.is(a,"string")&&c.length-1&&(a=a.replace(h,function(a,b){return null==c[++b]?"":c[b]}));return a||""};g.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,e){var d=e;c.replace(b,function(a,b,c,e,f){b=b||e;d&&(b in d&&(d=d[b]),"function"==typeof d&&f&&(d=d()))});d=(null==d||d==e?a:d)+"";return d};
return function(b,d){return(""+b).replace(a,function(a,b){return c(a,b,d)})}}();g.ninja=function(){P?q.win.Raphael=L:delete Raphael;return g};g.st=S;(function(a,b,c){function d(){/in/.test(a.readyState)?setTimeout(d,9):g.eve("DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(b,c=function(){a.removeEventListener(b,c,!1);a.readyState="complete"},!1),a.readyState="loading");d()})(document,"DOMContentLoaded");P?q.win.Raphael=g:Raphael=g;eve.on("DOMload",function(){V=!0})})();
window.Raphael.svg&&function(d){var j=String,t=parseFloat,y=parseInt,v=Math,N=v.max,R=v.abs,z=v.pow,g=/[, ]+/,V=d.eve,W={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},A={};d.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var h=function(f,n){if(n){"string"==typeof f&&(f=h(f));for(var g in n)n.hasOwnProperty(g)&&("xlink:"==
g.substring(0,6)?f.setAttributeNS("http://www.w3.org/1999/xlink",g.substring(6),j(n[g])):f.setAttribute(g,j(n[g])))}else f=d._g.doc.createElementNS("http://www.w3.org/2000/svg",f),f.style&&(f.style.webkitTapHighlightColor="rgba(0,0,0,0)");return f},G=function(f,n){var g="linear",b=f.id+n,c=0.5,e=0.5,k=f.node,p=f.paper,i=k.style,q=d._g.doc.getElementById(b);if(!q){n=j(n).replace(d._radial_gradient,function(b,d,f){g="radial";d&&f&&(c=t(d),e=t(f),b=2*(0.5<e)-1,0.25<z(c-0.5,2)+z(e-0.5,2)&&(e=v.sqrt(0.25-
z(c-0.5,2))*b+0.5)&&0.5!=e&&(e=e.toFixed(5)-1.0E-5*b));return""});n=n.split(/\s*\-\s*/);if("linear"==g){var u=n.shift(),u=-t(u);if(isNaN(u))return null;var o=[0,0,v.cos(d.rad(u)),v.sin(d.rad(u))],u=1/(N(R(o[2]),R(o[3]))||1);o[2]*=u;o[3]*=u;0>o[2]&&(o[0]=-o[2],o[2]=0);0>o[3]&&(o[1]=-o[3],o[3]=0)}u=d._parseDots(n);if(!u)return null;b=b.replace(/[\(\)\s,\xb0#]/g,"_");f.gradient&&b!=f.gradient.id&&(p.defs.removeChild(f.gradient),delete f.gradient);if(!f.gradient){q=h(g+"Gradient",{id:b});f.gradient=q;
h(q,"radial"==g?{fx:c,fy:e}:{x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientTransform:f.matrix.invert()});p.defs.appendChild(q);p=0;for(o=u.length;p<o;p++)q.appendChild(h("stop",{offset:u[p].offset?u[p].offset:p?"100%":"0%","stop-color":u[p].color||"#fff"}))}}h(k,{fill:"url(#"+b+")",opacity:1,"fill-opacity":1});i.fill="";i.opacity=1;i.fillOpacity=1;return 1},q=function(d){var n=d.getBBox(1);h(d.pattern,{patternTransform:d.matrix.invert()+" translate("+n.x+","+n.y+")"})},P=function(f,n,g){if("path"==f.type){for(var b=
j(n).toLowerCase().split("-"),c=f.paper,e=g?"end":"start",k=f.node,p=f.attrs,i=p["stroke-width"],q=b.length,u="classic",o,t,y,v,z,C=3,H=3,E=5;q--;)switch(b[q]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":u=b[q];break;case "wide":H=5;break;case "narrow":H=2;break;case "long":C=5;break;case "short":C=2}"open"==u?(C+=2,H+=2,E+=2,y=1,v=g?4:1,z={fill:"none",stroke:p.stroke}):(v=y=C/2,z={fill:p.stroke,stroke:"none"});f._.arrows?g?(f._.arrows.endPath&&A[f._.arrows.endPath]--,
f._.arrows.endMarker&&A[f._.arrows.endMarker]--):(f._.arrows.startPath&&A[f._.arrows.startPath]--,f._.arrows.startMarker&&A[f._.arrows.startMarker]--):f._.arrows={};if("none"!=u){b="raphael-marker-"+u;q="raphael-marker-"+e+u+C+H;d._g.doc.getElementById(b)?A[b]++:(c.defs.appendChild(h(h("path"),{"stroke-linecap":"round",d:W[u],id:b})),A[b]=1);var F=d._g.doc.getElementById(q),G;F?(A[q]++,G=F.getElementsByTagName("use")[0]):(F=h(h("marker"),{id:q,markerHeight:H,markerWidth:C,orient:"auto",refX:v,refY:H/
2}),G=h(h("use"),{"xlink:href":"#"+b,transform:(g?" rotate(180 "+C/2+" "+H/2+") ":" ")+"scale("+C/E+","+H/E+")","stroke-width":1/((C/E+H/E)/2)}),F.appendChild(G),c.defs.appendChild(F),A[q]=1);h(G,z);c=y*("diamond"!=u&&"oval"!=u);g?(o=f._.arrows.startdx*i||0,t=d.getTotalLength(p.path)-c*i):(o=c*i,t=d.getTotalLength(p.path)-(f._.arrows.enddx*i||0));z={};z["marker-"+e]="url(#"+q+")";if(t||o)z.d=Raphael.getSubpath(p.path,o,t);h(k,z);f._.arrows[e+"Path"]=b;f._.arrows[e+"Marker"]=q;f._.arrows[e+"dx"]=c;
f._.arrows[e+"Type"]=u;f._.arrows[e+"String"]=n}else g?(o=f._.arrows.startdx*i||0,t=d.getTotalLength(p.path)-o):(o=0,t=d.getTotalLength(p.path)-(f._.arrows.enddx*i||0)),f._.arrows[e+"Path"]&&h(k,{d:Raphael.getSubpath(p.path,o,t)}),delete f._.arrows[e+"Path"],delete f._.arrows[e+"Marker"],delete f._.arrows[e+"dx"],delete f._.arrows[e+"Type"],delete f._.arrows[e+"String"];for(z in A)A.hasOwnProperty(z)&&!A[z]&&(f=d._g.doc.getElementById(z))&&f.parentNode.removeChild(f)}},L={"":[0],none:[0],"-":[3,1],
".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},J=function(d,g,r){if(g=L[j(g).toLowerCase()]){for(var b=d.attrs["stroke-width"]||"1",r={round:b,square:b,butt:0}[d.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,c=[],e=g.length;e--;)c[e]=g[e]*b+(e%2?1:-1)*r;h(d.node,{"stroke-dasharray":c.join(",")})}},C=function(f,n){var r=f.node,b=f.attrs,c=r.style.visibility;r.style.visibility="hidden";for(var e in n)if(n.hasOwnProperty(e)&&
d._availableAttrs.hasOwnProperty(e)){var k=n[e];b[e]=k;switch(e){case "blur":f.blur(k);break;case "href":case "title":case "target":var p=r.parentNode;if("a"!=p.tagName.toLowerCase()){var i=h("a");p.insertBefore(i,r);i.appendChild(r);p=i}"target"==e&&"blank"==k?p.setAttributeNS("http://www.w3.org/1999/xlink","show","new"):p.setAttributeNS("http://www.w3.org/1999/xlink",e,k);break;case "cursor":r.style.cursor=k;break;case "transform":f.transform(k);break;case "arrow-start":P(f,k);break;case "arrow-end":P(f,
k,1);break;case "clip-rect":p=j(k).split(g);if(4==p.length){f.clip&&f.clip.parentNode.parentNode.removeChild(f.clip.parentNode);var i=h("clipPath"),t=h("rect");i.id=d.createUUID();h(t,{x:p[0],y:p[1],width:p[2],height:p[3]});i.appendChild(t);f.paper.defs.appendChild(i);h(r,{"clip-path":"url(#"+i.id+")"});f.clip=t}if(!k&&(k=r.getAttribute("clip-path")))k=d._g.doc.getElementById(k.replace(/(^url\(#|\)$)/g,"")),k&&k.parentNode.removeChild(k),h(r,{"clip-path":""}),delete f.clip;break;case "path":"path"==
f.type&&(h(r,{d:k?b.path=d._pathToAbsolute(k):"M0,0"}),f._.dirty=1,f._.arrows&&("startString"in f._.arrows&&P(f,f._.arrows.startString),"endString"in f._.arrows&&P(f,f._.arrows.endString,1)));break;case "width":if(r.setAttribute(e,k),f._.dirty=1,b.fx)e="x",k=b.x;else break;case "x":b.fx&&(k=-b.x-(b.width||0));case "rx":if("rx"==e&&"rect"==f.type)break;case "cx":r.setAttribute(e,k);f.pattern&&q(f);f._.dirty=1;break;case "height":if(r.setAttribute(e,k),f._.dirty=1,b.fy)e="y",k=b.y;else break;case "y":b.fy&&
(k=-b.y-(b.height||0));case "ry":if("ry"==e&&"rect"==f.type)break;case "cy":r.setAttribute(e,k);f.pattern&&q(f);f._.dirty=1;break;case "r":"rect"==f.type?h(r,{rx:k,ry:k}):r.setAttribute(e,k);f._.dirty=1;break;case "src":"image"==f.type&&r.setAttributeNS("http://www.w3.org/1999/xlink","href",k);break;case "stroke-width":if(1!=f._.sx||1!=f._.sy)k/=N(R(f._.sx),R(f._.sy))||1;f.paper._vbSize&&(k*=f.paper._vbSize);r.setAttribute(e,k);b["stroke-dasharray"]&&J(f,b["stroke-dasharray"],n);f._.arrows&&("startString"in
f._.arrows&&P(f,f._.arrows.startString),"endString"in f._.arrows&&P(f,f._.arrows.endString,1));break;case "stroke-dasharray":J(f,k,n);break;case "fill":var u=j(k).match(d._ISURL);if(u){var i=h("pattern"),o=h("image");i.id=d.createUUID();h(i,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});h(o,{x:0,y:0,"xlink:href":u[1]});i.appendChild(o);(function(b){d._preload(u[1],function(){var c=this.offsetWidth,d=this.offsetHeight;h(b,{width:c,height:d});h(o,{width:c,height:d});f.paper.safari()})})(i);
f.paper.defs.appendChild(i);r.style.fill="url(#"+i.id+")";h(r,{fill:"url(#"+i.id+")"});f.pattern=i;f.pattern&&q(f);break}var v=d.getRGB(k);if(v.error){if(("circle"==f.type||"ellipse"==f.type||"r"!=j(k).charAt())&&G(f,k)){if("opacity"in b||"fill-opacity"in b){var z=d._g.doc.getElementById(r.getAttribute("fill").replace(/^url\(#|\)$/g,""));if(z){var A=z.getElementsByTagName("stop");h(A[A.length-1],{"stop-opacity":("opacity"in b?b.opacity:1)*("fill-opacity"in b?b["fill-opacity"]:1)})}}b.gradient=k;b.fill=
"none";break}}else delete n.gradient,delete b.gradient,!d.is(b.opacity,"undefined")&&d.is(n.opacity,"undefined")&&h(r,{opacity:b.opacity}),!d.is(b["fill-opacity"],"undefined")&&d.is(n["fill-opacity"],"undefined")&&h(r,{"fill-opacity":b["fill-opacity"]});v.hasOwnProperty("opacity")&&h(r,{"fill-opacity":1<v.opacity?v.opacity/100:v.opacity});case "stroke":v=d.getRGB(k);r.setAttribute(e,v.hex);"stroke"==e&&v.hasOwnProperty("opacity")&&h(r,{"stroke-opacity":1<v.opacity?v.opacity/100:v.opacity});"stroke"==
e&&f._.arrows&&("startString"in f._.arrows&&P(f,f._.arrows.startString),"endString"in f._.arrows&&P(f,f._.arrows.endString,1));break;case "gradient":("circle"==f.type||"ellipse"==f.type||"r"!=j(k).charAt())&&G(f,k);break;case "opacity":b.gradient&&!b.hasOwnProperty("stroke-opacity")&&h(r,{"stroke-opacity":1<k?k/100:k});case "fill-opacity":if(b.gradient){z=d._g.doc.getElementById(r.getAttribute("fill").replace(/^url\(#|\)$/g,""));z&&(A=z.getElementsByTagName("stop"),h(A[A.length-1],{"stop-opacity":k}));
break}default:"font-size"==e&&(k=y(k,10)+"px"),p=e.replace(/(\-.)/g,function(b){return b.substring(1).toUpperCase()}),r.style[p]=k,f._.dirty=1,r.setAttribute(e,k)}}I(f,n);r.style.visibility=c},I=function(f,g){if("text"==f.type&&(g.hasOwnProperty("text")||g.hasOwnProperty("font")||g.hasOwnProperty("font-size")||g.hasOwnProperty("x")||g.hasOwnProperty("y"))){var r=f.attrs,b=f.node,c=b.firstChild?y(d._g.doc.defaultView.getComputedStyle(b.firstChild,"").getPropertyValue("font-size"),10):10;if(g.hasOwnProperty("text")){for(r.text=
g.text;b.firstChild;)b.removeChild(b.firstChild);for(var e=j(g.text).split("\n"),k=[],p,i=0,q=e.length;i<q;i++)p=h("tspan"),i&&h(p,{dy:1.2*c,x:r.x}),p.appendChild(d._g.doc.createTextNode(e[i])),b.appendChild(p),k[i]=p}else{k=b.getElementsByTagName("tspan");for(i=0,q=k.length;i<q;i++)i?h(k[i],{dy:1.2*c,x:r.x}):h(k[0],{dy:0})}h(b,{x:r.x,y:r.y});f._.dirty=1;b=f._getBBox();(r=r.y-(b.y+b.height/2))&&d.is(r,"finite")&&h(k[0],{dy:r})}},E=function(f,g){this[0]=this.node=f;f.raphael=!0;this.id=d._oid++;f.raphaelid=
this.id;this.matrix=d.matrix();this.realPath=null;this.paper=g;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!g.bottom&&(g.bottom=this);this.prev=g.top;g.top&&(g.top.next=this);g.top=this;this.next=null},O=d.el;E.prototype=O;O.constructor=E;d._engine.path=function(d,g){var j=h("path");g.canvas&&g.canvas.appendChild(j);j=new E(j,g);j.type="path";C(j,{fill:"none",stroke:"#000",path:d});return j};O.rotate=function(d,n,h){if(this.removed)return this;d=j(d).split(g);
d.length-1&&(n=t(d[1]),h=t(d[2]));d=t(d[0]);null==h&&(n=h);if(null==n||null==h)h=this.getBBox(1),n=h.x+h.width/2,h=h.y+h.height/2;this.transform(this._.transform.concat([["r",d,n,h]]));return this};O.scale=function(d,h,r,b){if(this.removed)return this;d=j(d).split(g);d.length-1&&(h=t(d[1]),r=t(d[2]),b=t(d[3]));d=t(d[0]);null==h&&(h=d);null==b&&(r=b);if(null==r||null==b)var c=this.getBBox(1);r=null==r?c.x+c.width/2:r;b=null==b?c.y+c.height/2:b;this.transform(this._.transform.concat([["s",d,h,r,b]]));
return this};O.translate=function(d,h){if(this.removed)return this;d=j(d).split(g);d.length-1&&(h=t(d[1]));d=t(d[0])||0;h=+h||0;this.transform(this._.transform.concat([["t",d,h]]));return this};O.transform=function(f){var g=this._;if(null==f)return g.transform;d._extractTransform(this,f);this.clip&&h(this.clip,{transform:this.matrix.invert()});this.pattern&&q(this);this.node&&h(this.node,{transform:this.matrix});if(1!=g.sx||1!=g.sy)this.attr({"stroke-width":this.attrs.hasOwnProperty("stroke-width")?
this.attrs["stroke-width"]:1});return this};O.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};O.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};O.remove=function(){if(!this.removed){var f=this.paper;f.__set__&&f.__set__.exclude(this);V.unbind("*.*."+this.id);this.gradient&&f.defs.removeChild(this.gradient);d._tear(this,f);this.node.parentNode.removeChild(this.node);for(var g in this)this[g]="function"==typeof this[g]?
d._removedFactory(g):null;this.removed=!0}};O._getBBox=function(){if("none"==this.node.style.display){this.show();var d=!0}var g={};try{g=this.node.getBBox()}catch(h){}finally{g=g||{}}d&&this.hide();return g};O.attr=function(f,h){if(this.removed)return this;if(null==f){var j={},b;for(b in this.attrs)this.attrs.hasOwnProperty(b)&&(j[b]=this.attrs[b]);j.gradient&&"none"==j.fill&&(j.fill=j.gradient)&&delete j.gradient;j.transform=this._.transform;return j}if(null==h&&d.is(f,"string")){if("fill"==f&&
"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==f)return this._.transform;b=f.split(g);for(var j={},c=0,e=b.length;c<e;c++)f=b[c],f in this.attrs?j[f]=this.attrs[f]:d.is(this.paper.customAttributes[f],"function")?j[f]=this.paper.customAttributes[f].def:j[f]=d._availableAttrs[f];return e-1?j:j[b[0]]}if(null==h&&d.is(f,"array")){j={};for(c=0,e=f.length;c<e;c++)j[f[c]]=this.attr(f[c]);return j}null!=h?(j={},j[f]=h):null!=f&&d.is(f,"object")&&(j=f);for(c in j)V("attr."+
c+"."+this.id,this,j[c]);for(c in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(c)&&j.hasOwnProperty(c)&&d.is(this.paper.customAttributes[c],"function"))for(e in b=this.paper.customAttributes[c].apply(this,[].concat(j[c])),this.attrs[c]=j[c],b)b.hasOwnProperty(e)&&(j[e]=b[e]);C(this,j);return this};O.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);
var f=this.paper;f.top!=this&&d._tofront(this,f);return this};O.toBack=function(){if(this.removed)return this;var f=this.node.parentNode;"a"==f.tagName.toLowerCase()?f.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):f.firstChild!=this.node&&f.insertBefore(this.node,this.node.parentNode.firstChild);d._toback(this,this.paper);return this};O.insertAfter=function(f){if(this.removed)return this;var g=f.node||f[f.length-1].node;g.nextSibling?g.parentNode.insertBefore(this.node,
g.nextSibling):g.parentNode.appendChild(this.node);d._insertafter(this,f,this.paper);return this};O.insertBefore=function(f){if(this.removed)return this;var g=f.node||f[0].node;g.parentNode.insertBefore(this.node,g);d._insertbefore(this,f,this.paper);return this};O.blur=function(f){if(0!==+f){var g=h("filter"),j=h("feGaussianBlur");this.attrs.blur=f;g.id=d.createUUID();h(j,{stdDeviation:+f||1.5});g.appendChild(j);this.paper.defs.appendChild(g);this._blur=g;h(this.node,{filter:"url(#"+g.id+")"})}else this._blur&&
(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};d._engine.circle=function(d,g,j,b){var c=h("circle");d.canvas&&d.canvas.appendChild(c);d=new E(c,d);d.attrs={cx:g,cy:j,r:b,fill:"none",stroke:"#000"};d.type="circle";h(c,d.attrs);return d};d._engine.rect=function(d,g,j,b,c,e){var k=h("rect");d.canvas&&d.canvas.appendChild(k);d=new E(k,d);d.attrs={x:g,y:j,width:b,height:c,r:e||0,rx:e||0,ry:e||0,fill:"none",stroke:"#000"};d.type=
"rect";h(k,d.attrs);return d};d._engine.ellipse=function(d,g,j,b,c){var e=h("ellipse");d.canvas&&d.canvas.appendChild(e);d=new E(e,d);d.attrs={cx:g,cy:j,rx:b,ry:c,fill:"none",stroke:"#000"};d.type="ellipse";h(e,d.attrs);return d};d._engine.image=function(d,g,j,b,c,e){var k=h("image");h(k,{x:j,y:b,width:c,height:e,preserveAspectRatio:"none"});k.setAttributeNS("http://www.w3.org/1999/xlink","href",g);d.canvas&&d.canvas.appendChild(k);d=new E(k,d);d.attrs={x:j,y:b,width:c,height:e,src:g};d.type="image";
return d};d._engine.text=function(f,g,j,b){var c=h("text");f.canvas&&f.canvas.appendChild(c);f=new E(c,f);f.attrs={x:g,y:j,"text-anchor":"middle",text:b,font:d._availableAttrs.font,stroke:"none",fill:"#000"};f.type="text";C(f,f.attrs);return f};d._engine.setSize=function(d,g){this.width=d||this.width;this.height=g||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this};d._engine.create=
function(){var f=d._getContainer.apply(0,arguments),g=f&&f.container,j=f.x,b=f.y,c=f.width,f=f.height;if(!g)throw Error("SVG container not found.");var e=h("svg"),k;j=j||0;b=b||0;c=c||512;f=f||342;h(e,{height:f,version:1.1,width:c,xmlns:"http://www.w3.org/2000/svg"});1==g?(e.style.cssText="overflow:hidden;position:absolute;left:"+j+"px;top:"+b+"px",d._g.doc.body.appendChild(e),k=1):(e.style.cssText="overflow:hidden;position:relative",g.firstChild?g.insertBefore(e,g.firstChild):g.appendChild(e));g=
new d._Paper;g.width=c;g.height=f;g.canvas=e;g.clear();g._left=g._top=0;k&&(g.renderfix=function(){});g.renderfix();return g};d._engine.setViewBox=function(d,g,j,b,c){V("setViewBox",this,this._viewBox,[d,g,j,b,c]);var e=N(j/this.width,b/this.height),k=this.top,p,i;for(null==d?(this._vbSize&&(e=1),delete this._vbSize,p="0 0 "+this.width+" "+this.height):(this._vbSize=e,p=d+" "+g+" "+j+" "+b),h(this.canvas,{viewBox:p,preserveAspectRatio:c?"meet":"xMinYMin"});e&&k;)i="stroke-width"in k.attrs?k.attrs["stroke-width"]:
1,k.attr({"stroke-width":i}),k._.dirty=1,k._.dirtyT=1,k=k.prev;this._viewBox=[d,g,j,b,!!c];return this};d.prototype.renderfix=function(){var d=this.canvas,g=d.style,j=d.getScreenCTM()||d.createSVGMatrix(),d=-j.e%1,j=-j.f%1;if(d||j)d&&(this._left=(this._left+d)%1,g.left=this._left+"px"),j&&(this._top=(this._top+j)%1,g.top=this._top+"px")};d.prototype.clear=function(){d.eve("clear",this);for(var f=this.canvas;f.firstChild;)f.removeChild(f.firstChild);this.bottom=this.top=null;(this.desc=h("desc")).appendChild(d._g.doc.createTextNode("Created with Rapha\u00ebl "+
d.version));f.appendChild(this.desc);f.appendChild(this.defs=h("defs"))};d.prototype.remove=function(){V("remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var f in this)this[f]="function"==typeof this[f]?d._removedFactory(f):null};var T=d.st,F;for(F in O)O.hasOwnProperty(F)&&!T.hasOwnProperty(F)&&(T[F]=function(d){return function(){var g=arguments;return this.forEach(function(j){j[d].apply(j,g)})}}(F))}(window.Raphael);
window.Raphael.vml&&function(d){var j=String,t=parseFloat,y=Math,v=y.round,N=y.max,R=y.min,z=y.abs,g=/[, ]+/,V=d.eve,W={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},A=/([clmz]),?([^clmz]*)/gi,h=/ progid:\S+Blur\([^\)]+\)/g,G=/-?[^,\s-]+/g,q={path:1,rect:1,image:1},P={circle:1,ellipse:1},L=function(b){var c=/[ahqstv]/ig,e=d._pathToAbsolute;j(b).match(c)&&(e=d._path2curve);c=/[clmz]/g;if(e==d._pathToAbsolute&&!j(b).match(c))return b=j(b).replace(A,function(b,c,d){var e=[],f="m"==c.toLowerCase(),
k=W[c];d.replace(G,function(b){f&&2==e.length&&(k+=e+W["m"==c?"l":"L"],e=[]);e.push(v(21600*b))});return k+e});for(var c=e(b),f,b=[],g=0,i=c.length;g<i;g++){e=c[g];f=c[g][0].toLowerCase();"z"==f&&(f="x");for(var h=1,n=e.length;h<n;h++)f+=v(21600*e[h])+(h!=n-1?",":"");b.push(f)}return b.join(" ")},J=function(b,c,e){var f=d.matrix();f.rotate(-b,0.5,0.5);return{dx:f.x(c,e),dy:f.y(c,e)}},C=function(b,c,d,f,g,i){var j=b._,h=b.matrix,o=j.fillpos,b=b.node,n=b.style,q=1,r="",t=21600/c,v=21600/d;n.visibility=
"hidden";if(c&&d){b.coordsize=z(t)+" "+z(v);n.rotation=i*(0>c*d?-1:1);if(i){var y=J(i,f,g);f=y.dx;g=y.dy}0>c&&(r+="x");0>d&&(r+=" y")&&(q=-1);n.flip=r;b.coordorigin=f*-t+" "+g*-v;if(o||j.fillsize)f=b.getElementsByTagName("fill"),f=f&&f[0],b.removeChild(f),o&&(y=J(i,h.x(o[0],o[1]),h.y(o[0],o[1])),f.position=y.dx*q+" "+y.dy*q),j.fillsize&&(f.size=j.fillsize[0]*z(c)+" "+j.fillsize[1]*z(d)),b.appendChild(f);n.visibility="visible"}};d.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+
this.version};var I=function(b,c,d){for(var c=j(c).toLowerCase().split("-"),d=d?"end":"start",f=c.length,g="classic",i="medium",h="medium";f--;)switch(c[f]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":g=c[f];break;case "wide":case "narrow":h=c[f];break;case "long":case "short":i=c[f]}b=b.node.getElementsByTagName("stroke")[0];b[d+"arrow"]=g;b[d+"arrowlength"]=i;b[d+"arrowwidth"]=h},E=function(b,c){b.attrs=b.attrs||{};var e=b.node,k=b.attrs,h=e.style,i=q[b.type]&&
(c.x!=k.x||c.y!=k.y||c.width!=k.width||c.height!=k.height||c.cx!=k.cx||c.cy!=k.cy||c.rx!=k.rx||c.ry!=k.ry||c.r!=k.r),n=P[b.type]&&(k.cx!=c.cx||k.cy!=c.cy||k.r!=c.r||k.rx!=c.rx||k.ry!=c.ry),u;for(u in c)c.hasOwnProperty(u)&&(k[u]=c[u]);i&&(k.path=d._getPath[b.type](b),b._.dirty=1);c.href&&(e.href=c.href);c.title&&(e.title=c.title);c.target&&(e.target=c.target);c.cursor&&(h.cursor=c.cursor);"blur"in c&&b.blur(c.blur);if(c.path&&"path"==b.type||i)e.path=L(~j(k.path).toLowerCase().indexOf("r")?d._pathToAbsolute(k.path):
k.path),"image"==b.type&&(b._.fillpos=[k.x,k.y],b._.fillsize=[k.width,k.height],C(b,1,1,0,0,0));"transform"in c&&b.transform(c.transform);if(n){i=+k.cx;n=+k.cy;u=+k.rx||+k.r||0;var o=+k.ry||+k.r||0;e.path=d.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",v(21600*(i-u)),v(21600*(n-o)),v(21600*(i+u)),v(21600*(n+o)),v(21600*i))}if("clip-rect"in c){i=j(c["clip-rect"]).split(g);if(4==i.length)i[2]=+i[2]+ +i[0],i[3]=+i[3]+ +i[1],n=e.clipRect||d._g.doc.createElement("div"),u=n.style,u.clip=d.format("rect({1}px {2}px {3}px {0}px)",
i),e.clipRect||(u.position="absolute",u.top=0,u.left=0,u.width=b.paper.width+"px",u.height=b.paper.height+"px",e.parentNode.insertBefore(n,e),n.appendChild(e),e.clipRect=n);c["clip-rect"]||e.clipRect&&(e.clipRect.style.clip="auto")}if(b.textpath)i=b.textpath.style,c.font&&(i.font=c.font),c["font-family"]&&(i.fontFamily='"'+c["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"'),c["font-size"]&&(i.fontSize=c["font-size"]),c["font-weight"]&&(i.fontWeight=c["font-weight"]),c["font-style"]&&
(i.fontStyle=c["font-style"]);"arrow-start"in c&&I(b,c["arrow-start"]);"arrow-end"in c&&I(b,c["arrow-end"],1);if(null!=c.opacity||null!=c["stroke-width"]||null!=c.fill||null!=c.src||null!=c.stroke||null!=c["stroke-width"]||null!=c["stroke-opacity"]||null!=c["fill-opacity"]||null!=c["stroke-dasharray"]||null!=c["stroke-miterlimit"]||null!=c["stroke-linejoin"]||null!=c["stroke-linecap"]){i=e.getElementsByTagName("fill");i=i&&i[0];!i&&(i=f("fill"));"image"==b.type&&c.src&&(i.src=c.src);c.fill&&(i.on=
!0);if(null==i.on||"none"==c.fill||null===c.fill)i.on=!1;if(i.on&&c.fill)(n=j(c.fill).match(d._ISURL))?(i.parentNode==e&&e.removeChild(i),i.rotate=!0,i.src=n[1],i.type="tile",u=b.getBBox(1),i.position=u.x+" "+u.y,b._.fillpos=[u.x,u.y],d._preload(n[1],function(){b._.fillsize=[this.offsetWidth,this.offsetHeight]})):(i.color=d.getRGB(c.fill).hex,i.src="",i.type="solid",d.getRGB(c.fill).error&&(b.type in{circle:1,ellipse:1}||"r"!=j(c.fill).charAt())&&O(b,c.fill,i)&&(k.fill="none",k.gradient=c.fill,i.rotate=
!1));if("fill-opacity"in c||"opacity"in c)u=((+k["fill-opacity"]+1||2)-1)*((+k.opacity+1||2)-1)*((+d.getRGB(c.fill).o+1||2)-1),u=R(N(u,0),1),i.opacity=u,i.src&&(i.color="none");e.appendChild(i);i=e.getElementsByTagName("stroke")&&e.getElementsByTagName("stroke")[0];n=!1;!i&&(n=i=f("stroke"));if(c.stroke&&"none"!=c.stroke||c["stroke-width"]||null!=c["stroke-opacity"]||c["stroke-dasharray"]||c["stroke-miterlimit"]||c["stroke-linejoin"]||c["stroke-linecap"])i.on=!0;("none"==c.stroke||null===c.stroke||
null==i.on||0==c.stroke||0==c["stroke-width"])&&(i.on=!1);u=d.getRGB(c.stroke);i.on&&c.stroke&&(i.color=u.hex);u=((+k["stroke-opacity"]+1||2)-1)*((+k.opacity+1||2)-1)*((+u.o+1||2)-1);o=0.75*(t(c["stroke-width"])||1);u=R(N(u,0),1);null==c["stroke-width"]&&(o=k["stroke-width"]);c["stroke-width"]&&(i.weight=o);o&&1>o&&(u*=o)&&(i.weight=1);i.opacity=u;c["stroke-linejoin"]&&(i.joinstyle=c["stroke-linejoin"]||"miter");i.miterlimit=c["stroke-miterlimit"]||8;c["stroke-linecap"]&&(i.endcap="butt"==c["stroke-linecap"]?
"flat":"square"==c["stroke-linecap"]?"square":"round");if(c["stroke-dasharray"])u={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},i.dashstyle=u.hasOwnProperty(c["stroke-dasharray"])?u[c["stroke-dasharray"]]:"";n&&e.appendChild(i)}if("text"==b.type){b.paper.canvas.style.display="";e=b.paper.span;i=k.font&&k.font.match(/\d+(?:\.\d*)?(?=px)/);h=e.style;k.font&&(h.font=k.font);
k["font-family"]&&(h.fontFamily=k["font-family"]);k["font-weight"]&&(h.fontWeight=k["font-weight"]);k["font-style"]&&(h.fontStyle=k["font-style"]);i=t(k["font-size"]||i&&i[0])||10;h.fontSize=100*i+"px";b.textpath.string&&(e.innerHTML=j(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));h=e.getBoundingClientRect();b.W=k.w=(h.right-h.left)/100;b.H=k.h=(h.bottom-h.top)/100;b.X=k.x;b.Y=k.y+b.H/2;("x"in c||"y"in c)&&(b.path.v=d.format("m{0},{1}l{2},{1}",v(21600*k.x),
v(21600*k.y),v(21600*k.x)+1));h="x,y,text,font,font-family,font-weight,font-style,font-size".split(",");e=0;for(i=h.length;e<i;e++)if(h[e]in c){b._.dirty=1;break}switch(k["text-anchor"]){case "start":b.textpath.style["v-text-align"]="left";b.bbx=b.W/2;break;case "end":b.textpath.style["v-text-align"]="right";b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},O=function(b,c,e){b.attrs=b.attrs||{};var f=Math.pow,g="linear",i=".5 .5";b.attrs.gradient=
c;c=j(c).replace(d._radial_gradient,function(b,c,d){g="radial";c&&d&&(c=t(c),d=t(d),0.25<f(c-0.5,2)+f(d-0.5,2)&&(d=y.sqrt(0.25-f(c-0.5,2))*(2*(0.5<d)-1)+0.5),i=c+" "+d);return""});c=c.split(/\s*\-\s*/);if("linear"==g){var h=c.shift(),h=-t(h);if(isNaN(h))return null}c=d._parseDots(c);if(!c)return null;b=b.shape||b.node;if(c.length){b.removeChild(e);e.on=!0;e.method="none";e.color=c[0].color;e.color2=c[c.length-1].color;for(var n=[],o=0,q=c.length;o<q;o++)c[o].offset&&n.push(c[o].offset+" "+c[o].color);
e.colors=n.length?n.join():"0% "+e.color;"radial"==g?(e.type="gradientTitle",e.focus="100%",e.focussize="0 0",e.focusposition=i,e.angle=0):(e.type="gradient",e.angle=(270-h)%360);b.appendChild(e)}return 1},T=function(b,c){this[0]=this.node=b;b.raphael=!0;this.id=d._oid++;b.raphaelid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=c;this.matrix=d.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!c.bottom&&(c.bottom=this);this.prev=c.top;c.top&&(c.top.next=this);c.top=this;
this.next=null},F=d.el;T.prototype=F;F.constructor=T;F.transform=function(b){if(null==b)return this._.transform;var c=this.paper._viewBoxShift,e=c?"s"+[c.scale,c.scale]+"-1-1t"+[c.dx,c.dy]:"",f;c&&(f=b=j(b).replace(/\.{3}|\u2026/g,this._.transform||""));d._extractTransform(this,e+b);var c=this.matrix.clone(),g=this.skew,b=this.node,e=~j(this.attrs.fill).indexOf("-"),i=!j(this.attrs.fill).indexOf("url(");c.translate(-0.5,-0.5);i||e||"image"==this.type?(g.matrix="1 0 0 1",g.offset="0 0",g=c.split(),
e&&g.noRotation||!g.isSimple?(b.style.filter=c.toFilter(),e=this.getBBox(),g=this.getBBox(1),c=e.x-g.x,e=e.y-g.y,b.coordorigin=-21600*c+" "+-21600*e,C(this,1,1,c,e,0)):(b.style.filter="",C(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate))):(b.style.filter="",g.matrix=j(c),g.offset=c.offset());f&&(this._.transform=f);return this};F.rotate=function(b,c,d){if(this.removed)return this;if(null!=b){b=j(b).split(g);b.length-1&&(c=t(b[1]),d=t(b[2]));b=t(b[0]);null==d&&(c=d);if(null==c||null==d)d=this.getBBox(1),
c=d.x+d.width/2,d=d.y+d.height/2;this._.dirtyT=1;this.transform(this._.transform.concat([["r",b,c,d]]));return this}};F.translate=function(b,c){if(this.removed)return this;b=j(b).split(g);b.length-1&&(c=t(b[1]));b=t(b[0])||0;c=+c||0;this._.bbox&&(this._.bbox.x+=b,this._.bbox.y+=c);this.transform(this._.transform.concat([["t",b,c]]));return this};F.scale=function(b,c,d,f){if(this.removed)return this;b=j(b).split(g);b.length-1&&(c=t(b[1]),d=t(b[2]),f=t(b[3]),isNaN(d)&&(d=null),isNaN(f)&&(f=null));b=
t(b[0]);null==c&&(c=b);null==f&&(d=f);if(null==d||null==f)var h=this.getBBox(1);d=null==d?h.x+h.width/2:d;f=null==f?h.y+h.height/2:f;this.transform(this._.transform.concat([["s",b,c,d,f]]));this._.dirtyT=1;return this};F.hide=function(){!this.removed&&(this.node.style.display="none");return this};F.show=function(){!this.removed&&(this.node.style.display="");return this};F._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};F.remove=
function(){if(!this.removed){this.paper.__set__&&this.paper.__set__.exclude(this);d.eve.unbind("*.*."+this.id);d._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]="function"==typeof this[b]?d._removedFactory(b):null;this.removed=!0}};F.attr=function(b,c){if(this.removed)return this;if(null==b){var e={},f;for(f in this.attrs)this.attrs.hasOwnProperty(f)&&(e[f]=this.attrs[f]);e.gradient&&"none"==e.fill&&
(e.fill=e.gradient)&&delete e.gradient;e.transform=this._.transform;return e}if(null==c&&d.is(b,"string")){if("fill"==b&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;f=b.split(g);for(var e={},h=0,i=f.length;h<i;h++)b=f[h],b in this.attrs?e[b]=this.attrs[b]:d.is(this.paper.customAttributes[b],"function")?e[b]=this.paper.customAttributes[b].def:e[b]=d._availableAttrs[b];return i-1?e:e[f[0]]}if(this.attrs&&null==c&&d.is(b,"array")){e={};for(h=0,i=b.length;h<i;h++)e[b[h]]=this.attr(b[h]);
return e}null!=c&&(e={},e[b]=c);null==c&&d.is(b,"object")&&(e=b);for(h in e)V("attr."+h+"."+this.id,this,e[h]);if(e){for(h in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(h)&&e.hasOwnProperty(h)&&d.is(this.paper.customAttributes[h],"function"))for(i in f=this.paper.customAttributes[h].apply(this,[].concat(e[h])),this.attrs[h]=e[h],f)f.hasOwnProperty(i)&&(e[i]=f[i]);e.text&&"text"==this.type&&(this.textpath.string=e.text);E(this,e)}return this};F.toFront=function(){!this.removed&&
this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&d._tofront(this,this.paper);return this};F.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),d._toback(this,this.paper));return this};F.insertAfter=function(b){if(this.removed)return this;b.constructor==d.st.constructor&&(b=b[b.length-1]);b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):
b.node.parentNode.appendChild(this.node);d._insertafter(this,b,this.paper);return this};F.insertBefore=function(b){if(this.removed)return this;b.constructor==d.st.constructor&&(b=b[0]);b.node.parentNode.insertBefore(this.node,b.node);d._insertbefore(this,b,this.paper);return this};F.blur=function(b){var c=this.node.runtimeStyle,e=c.filter;e=e.replace(h,"");0!==+b?(this.attrs.blur=b,c.filter=e+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+b||1.5)+")",c.margin=d.format("-{0}px 0 0 -{0}px",
v(+b||1.5))):(c.filter=e,c.margin=0,delete this.attrs.blur)};d._engine.path=function(b,c){var d=f("shape");d.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";d.coordsize="21600 21600";d.coordorigin=c.coordorigin;var g=new T(d,c),h={fill:"none",stroke:"#000"};b&&(h.path=b);g.type="path";g.path=[];g.Path="";E(g,h);c.canvas.appendChild(d);h=f("skew");h.on=!0;d.appendChild(h);g.skew=h;g.transform("");return g};d._engine.rect=function(b,c,e,f,g,i){var h=d._rectPath(c,e,f,g,i),b=b.path(h),
j=b.attrs;b.X=j.x=c;b.Y=j.y=e;b.W=j.width=f;b.H=j.height=g;j.r=i;j.path=h;b.type="rect";return b};d._engine.ellipse=function(b,c,d,f,g){b=b.path();b.X=c-f;b.Y=d-g;b.W=2*f;b.H=2*g;b.type="ellipse";E(b,{cx:c,cy:d,rx:f,ry:g});return b};d._engine.circle=function(b,c,d,f){b=b.path();b.X=c-f;b.Y=d-f;b.W=b.H=2*f;b.type="circle";E(b,{cx:c,cy:d,r:f});return b};d._engine.image=function(b,c,e,f,g,i){var h=d._rectPath(e,f,g,i),b=b.path(h).attr({stroke:"none"}),j=b.attrs,o=b.node,n=o.getElementsByTagName("fill")[0];
j.src=c;b.X=j.x=e;b.Y=j.y=f;b.W=j.width=g;b.H=j.height=i;j.path=h;b.type="image";n.parentNode==o&&o.removeChild(n);n.rotate=!0;n.src=c;n.type="tile";b._.fillpos=[e,f];b._.fillsize=[g,i];o.appendChild(n);C(b,1,1,0,0,0);return b};d._engine.text=function(b,c,e,g){var h=f("shape"),i=f("path"),n=f("textpath");c=c||0;e=e||0;g=g||"";i.v=d.format("m{0},{1}l{2},{1}",v(21600*c),v(21600*e),v(21600*c)+1);i.textpathok=!0;n.string=j(g);n.on=!0;h.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";
h.coordsize="21600 21600";h.coordorigin="0 0";var q=new T(h,b),o={fill:"#000",stroke:"none",font:d._availableAttrs.font,text:g};q.shape=h;q.path=i;q.textpath=n;q.type="text";q.attrs.text=j(g);q.attrs.x=c;q.attrs.y=e;q.attrs.w=1;q.attrs.h=1;E(q,o);h.appendChild(n);h.appendChild(i);b.canvas.appendChild(h);b=f("skew");b.on=!0;h.appendChild(b);q.skew=b;q.transform("");return q};d._engine.setSize=function(b,c){var e=this.canvas.style;this.width=b;this.height=c;b==+b&&(b+="px");c==+c&&(c+="px");e.width=
b;e.height=c;e.clip="rect(0 "+b+" "+c+" 0)";this._viewBox&&d._engine.setViewBox.apply(this,this._viewBox);return this};d._engine.setViewBox=function(b,c,e,f,g){d.eve("setViewBox",this,this._viewBox,[b,c,e,f,g]);var h=this.width,j=this.height,n=1/N(e/h,f/j),o,q;g&&(o=j/f,q=h/e,e*o<h&&(b-=(h-e*o)/2/o),f*q<j&&(c-=(j-f*q)/2/q));this._viewBox=[b,c,e,f,!!g];this._viewBoxShift={dx:-b,dy:-c,scale:n};this.forEach(function(b){b.transform("...")});return this};var f;d._engine.initWin=function(b){var c=b.document;
c.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!c.namespaces.rvml&&c.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),f=function(b){return c.createElement("<rvml:"+b+' class="rvml">')}}catch(d){f=function(b){return c.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};d._engine.initWin(d._g.win);d._engine.create=function(){var b=d._getContainer.apply(0,arguments),c=b.container,e=b.height,f=b.width,g=b.x,b=b.y;if(!c)throw Error("VML container not found.");
var h=new d._Paper,j=h.canvas=d._g.doc.createElement("div"),n=j.style;g=g||0;b=b||0;f=f||512;e=e||342;h.width=f;h.height=e;f==+f&&(f+="px");e==+e&&(e+="px");h.coordsize="21600000 21600000";h.coordorigin="0 0";h.span=d._g.doc.createElement("span");h.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";j.appendChild(h.span);n.cssText=d.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
f,e);1==c?(d._g.doc.body.appendChild(j),n.left=g+"px",n.top=b+"px",n.position="absolute"):c.firstChild?c.insertBefore(j,c.firstChild):c.appendChild(j);h.renderfix=function(){};return h};d.prototype.clear=function(){d.eve("clear",this);this.canvas.innerHTML="";this.span=d._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};d.prototype.remove=function(){d.eve("remove",
this);this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?d._removedFactory(b):null;return!0};var n=d.st,r;for(r in F)F.hasOwnProperty(r)&&!n.hasOwnProperty(r)&&(n[r]=function(b){return function(){var c=arguments;return this.forEach(function(d){d[b].apply(d,c)})}}(r))}(window.Raphael);var ThemeModel=function(d,j,t,y){this.model=d;this.paper=d.paper;this.theme=j;j=t/10;d=0.6*j;this.selx=t/2;this.sely=y-0.7*j;this.selector=this.paper.image("themes/"+this.theme+"/selector.png",this.selx-j/2,this.sely-j/2,j,j);this.icon=this.paper.image("themes/"+this.theme+"/icon.png",this.selx-d/2,this.sely-d/2,d,d);this.selector.hide();this.icon.hide();var d=j/4,v=0.55*j,v=[{type:"text","font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx-0.7*v,y:this.sely-0.7*v,"text-anchor":"end"},
{type:"text","font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx-v,y:this.sely,"text-anchor":"end"},{type:"text","font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx-0.7*v,y:this.sely+0.7*v,"text-anchor":"end"},{type:"text","font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx+0.7*v,y:this.sely+0.7*v,"text-anchor":"start"},{type:"text","font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx+v,y:this.sely,"text-anchor":"start"},{type:"text",
"font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx+0.7*v,y:this.sely-0.7*v,"text-anchor":"start"}];this.optionShadow=this.paper.add(v);this.options=this.paper.add(v);for(v=0;v<this.options.length;v++){var N=0;(function(d,j,g,t){var v=g[t];v.attr({fill:"rgb(250,250,250)",cursor:"pointer"});v.mousedown(function(){d.selectOption(t)}).mouseover(function(){g[N].animate({fill:"rgb(250,250,250)"},200);v.animate({fill:"rgb(255,166,10)"},200);v.toFront();j.safari();N=t}).mouseout(function(){v.animate({fill:"rgb(250,250,250)"},
200);j.safari()});v.hide()})(this.model,this.paper,this.options,v);this.optionShadow[v].attr({fill:"rgba(0,0,0,0.7)"});this.optionShadow[v].translate(1,1);this.optionShadow[v].hide()}j*=1.5;this.play=this.paper.image("themes/"+this.theme+"/play.png",t/2-j/2,y/2-j/2,j,j);this.play.click(this.model.playClicked.bind(this.model));this.play.node.style.cursor="pointer";this.play.hide();this.eventIndicator=null;this.posClickEffect=this.paper.rect(0,0,t,y).attr({fill:"rgb(0,255,0)",opacity:0.2}).hide();this.negClickEffect=
this.paper.rect(0,0,t,y).attr({fill:"rgb(255,0,0)",opacity:0.2}).hide();t=d/2;y-=1.5*d;this.playControl=this.paper.image("themes/"+this.theme+"/play_control.png",t,y,d,d).attr({opacity:0});this.pauseControl=this.paper.image("themes/"+this.theme+"/pause_control.png",t,y,d,d).attr({opacity:0});this.playControl.hide();this.pauseControl.hide();this.playControl.click(function(){this.playControl.hide();this.pauseControl.show();this.pauseControl.attr({opacity:1});this.playControl.attr({opacity:0});this.model.playVideo()}.bind(this));
this.pauseControl.click(function(){this.pauseControl.hide();this.playControl.show();this.playControl.attr({opacity:1});this.pauseControl.attr({opacity:0});this.model.pauseVideo()}.bind(this));this.controlsHidden=this.eventIndicatorHidden=!0};ThemeModel.prototype.rotateSelector=function(d){this.selector.attr({transform:"r"+d})};
ThemeModel.prototype.showOptions=function(d){this.icon.show();this.selector.show();for(var j=0;j<d.length;j++)void 0!=d[j]&&(this.options[j].attr({text:d[j]}),this.options[j].show(),this.optionShadow[j].attr({text:d[j]}),this.optionShadow[j].show())};ThemeModel.prototype.hideOptions=function(){this.icon.hide();this.selector.hide();for(var d=0;6>d;d++)this.options[d].hide(),this.optionShadow[d].hide()};
ThemeModel.prototype.showControls=function(d){if(!0==this.controlsHidden)d?(this.playControl.show(),this.playControl.animate({opacity:1},200,"<>")):(this.pauseControl.show(),this.pauseControl.animate({opacity:1},200,"<>")),this.controlsHidden=!1};ThemeModel.prototype.hideControls=function(d){if(!1==this.controlsHidden)d?this.playControl.animate({opacity:0},500,"<>",this.hide):this.pauseControl.animate({opacity:0},500,"<>",this.hide),this.controlsHidden=!0};ThemeModel.prototype.showHomeScreen=function(){this.play.show()};
ThemeModel.prototype.hideHomeScreen=function(){this.play.hide()};ThemeModel.prototype.showEventIndicator=function(){if(null!=this.eventIndicator&&!0==this.eventIndicatorHidden){var d=this.eventIndicator.data("h"),j=this.eventIndicator.data("y");this.eventIndicator.show();this.eventIndicator.animate({height:d,y:j},500,"<>");this.eventIndicatorHidden=!1}};
ThemeModel.prototype.hideEventIndicator=function(){if(null!=this.eventIndicator&&!1==this.eventIndicatorHidden){var d=this.eventIndicator.data("h");this.eventIndicator.animate({height:0,y:this.eventIndicator.data("y")+d},500,"<>",this.hide);this.eventIndicatorHidden=!0}};
ThemeModel.prototype.clickEffect=function(d){switch(d){case !0:this.posClickEffect.attr({opacity:0.2}).show();this.posClickEffect.animate({opacity:0},200,"<>",this.hide);break;case !1:this.negClickEffect.attr({opacity:0.2}).show(),this.negClickEffect.animate({opacity:0},200,"<>",this.hide)}};
