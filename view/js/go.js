var isWebKit="undefined"!==typeof navigator.userAgent.split("WebKit/")[1],isChrome=-1<navigator.userAgent.toLowerCase().indexOf("chrome"),isMozilla=0<=navigator.appVersion.indexOf("Gecko/")||0<=navigator.userAgent.indexOf("Gecko")&&!this.isWebKit&&"undefined"!==typeof navigator.appVersion;isWebKit&&console.log("WebKit browser detected");isChrome&&console.log("Chrome browser detected");isMozilla&&console.log("Mozilla browser detected");!isWebKit&&!isChrome&&!isMozilla&&console.error("Browser unsupported");var Connection=function(e,k,r){this.segment=e;this.option=k;this.position=r};var Stack=function(){this.stack=[]};Stack.prototype.insert=function(e){this.stack.push(e)};Stack.prototype.remove=function(e){for(var k=0;k<this.stack.length;k++)if(this.stack[k]==e){this.stack.splice(k,1);break}};Stack.prototype.pull=function(){return 1<this.stack.length?this.stack.shift():1==this.stack.length?this.stack.pop():null};Function.prototype.bind=function(e){var k=this;return function(){return k.apply(e,arguments)}};var jiffy=0,Model=function(){this.width=window.innerWidth;this.height=window.innerHeight;var e=document.getElementById("controlOverlay");e.width=this.width;e.height=this.height;this.paper=Raphael(e,this.width,this.height);this.theme=new ThemeModel(this,"default",this.width,this.height);this.player=new Player(this,this.width,this.height);this.replay=!1;this.mousey=this.mousex=0;this.mouseMoveHandler=this.mouseMove.bind(this);document.addEventListener("mousemove",this.mouseMoveHandler,!1);this.mouseUpHandler=
this.mouseUp.bind(this);document.addEventListener("mouseup",this.mouseUpHandler,!1);this.tickId=setInterval(this.timerTick.bind(this),33);this.idleCounter=15;this.theme.showHomeScreen(this.restart);this.controlsVisible=!1};Model.prototype.mouseMove=function(e){this.mousex=e.pageX;this.mousey=e.pageY;this.idleCounter=15;!0==this.controlsVisible&&this.theme.showControls(this.player.isPaused())};
Model.prototype.mouseUp=function(){if(this.player.timerEventCanTrigger)switch(this.player.timerEventMode){case 0:this.player.setSegment(this.player.timerEventSegment);break;case 1:this.player.segment.videoStack.insert(this.player.timerEventSegment);break;case 2:this.player.segment.videoStack.remove(this.player.timerEventSegment);break;default:console.error("Illegle timer event mode")}};
Model.prototype.playClicked=function(){!0==this.replay&&(this.player.segment.removeVideo(),this.player.reset());this.player.playVideo();this.controlsVisible=!0;this.theme.hideHomeScreen()};Model.prototype.playVideo=function(){this.player.playVideo()};Model.prototype.pauseVideo=function(){this.player.pauseVideo()};Model.prototype.videoComplete=function(){this.replay=!0;this.theme.showHomeScreen(this.restart);this.controlsVisible=!1};
Model.prototype.showOptions=function(e){for(var k=!1,r=Array(6),B=Array(6),w=0;6>w;w++)B[w]=e.getConnectionByPosition(w);if(null!=B[0])r[0]=B[0].option,k=!0;if(null!=B[1])r[1]=B[1].option,k=!0;if(null!=B[2])r[2]=B[2].option,k=!0;if(null!=B[3])r[3]=B[3].option,k=!0;if(null!=B[4])r[4]=B[4].option,k=!0;if(null!=B[5])r[5]=B[5].option,k=!0;if(!k)return!1;this.theme.showOptions(r);this.controlsVisible=!1;this.theme.hideControls(this.player.isPaused());return!0};
Model.prototype.selectOption=function(e){this.theme.hideOptions();this.player.chooseOption(e);this.controlsVisible=!0};Model.prototype.timerTick=function(){jiffy++;0>=--this.idleCounter&&this.theme.hideControls(this.player.isPaused());var e=Math.atan((this.theme.sely-this.mousey)/(this.mousex-this.theme.selx))-Math.PI/2;0>this.mousex-this.theme.selx&&(e-=Math.PI);this.theme.rotateSelector(-360*e/(2*Math.PI));this.player.timerEventCanTrigger?this.theme.showEventIndicator():this.theme.hideEventIndicator()};var Player=function(e,k,r){this.width=k;this.height=r;this.model=e;this.reset();this.timerEventCanTrigger=!1;this.timerEventSegment=null;this.timerId=setInterval(this.timerTick.bind(this),100);this.timerEventMode=0};Player.prototype.reset=function(){this.segment=S1;this.segment.loadVideo(this);this.segment.setVisible();this.preloadVideo()};
Player.prototype.preloadVideo=function(){console.log("video has %d connections",this.segment.connections.length);for(var e=0;e<this.segment.connections.length;e++){var k=this.segment.connections[e].segment;k.loadVideo(this)}console.log("video has %d timed events",this.segment.timedEvents.length);for(e=0;e<this.segment.timedEvents.length;e++)k=this.segment.timedEvents[e].segment,k.loadVideo(this)};Player.prototype.playVideo=function(){this.segment.setVisible();this.segment.play()};
Player.prototype.skipToEnd=function(){};Player.prototype.pauseVideo=function(){this.segment.pause()};Player.prototype.isPaused=function(){return this.segment.video.paused};Player.prototype.setSegment=function(e){this.segment.removeVideo();this.segment=e;this.preloadVideo();this.playVideo()};Player.prototype.chooseOption=function(e){console.log("option %d choosen",e);this.setSegment(this.segment.chooseConnection(e).segment)};
Player.prototype.timerTick=function(){var e=this.segment;if(null!=e.video)if(e.video.currentTime>=e.video.duration)this.videoEnded();else{for(var k=0;k<e.timedEvents.length;k++){var r=e.timedEvents[k];if(e.video.currentTime>r.startTime&&e.video.currentTime<r.endTime){this.timerEventCanTrigger=!0;this.timerEventSegment=r.segment;this.timerEventMode=r.mode;return}}this.timerEventCanTrigger=!1;this.timerEventSegment=null}};
Player.prototype.videoEnded=function(){if(0!=this.timerEventMode){var e=this.segment,k=e.connections,r=e.defaultPos;for(e.connections=[];null!=(s=this.stack.pull());)e.insertDirect(s),e=s;e.connections=k;e.defaultPos=r;this.chooseOption(this.segment.defaultPos)}else-1!=this.segment.defaultPos?(console.log("direct video detected, not showing options"),this.chooseOption(this.segment.defaultPos)):this.model.showOptions(this.segment)||this.model.videoComplete()};var Segment=function(e){this.url=e;this.defaultPos=-1;this.connections=[];this.timedEvents=[];this.videoStack=new Stack;this.player=this.video=null};Segment.prototype.setVisible=function(){this.video.style.visibility="visible"};Segment.prototype.play=function(){this.video.play()};Segment.prototype.pause=function(){this.video.pause()};Segment.prototype.getConnectionByPosition=function(e){for(var k=0;k<this.connections.length;k++)if(this.connections[k].position===e)return this.connections[k];return null};
Segment.prototype.chooseConnection=function(e){for(var k,r=0;r<this.connections.length;r++)this.connections[r].position===e?k=r:this.connections[r].segment.removeVideo();return this.connections[k]};Segment.prototype.insertDirect=function(e){this.defaultPos++;this.connections.push(new Connection(e,"",this.defaultPos))};Segment.prototype.insertConnection=function(e,k,r){this.connections.push(new Connection(e,k,r))};
Segment.prototype.insertTimedEvent=function(e,k,r){this.timedEvents.push(new TimedEvent(e,k,r))};Segment.prototype.insertTimedStack=function(e,k,r,B){!0===B&&this.videoStack.insert(e);this.timedEvents.push(new TimedEvent(e,k,r,B?2:1))};
Segment.prototype.loadVideo=function(e){this.player=e;if(null==this.video)e=document.createElement("video"),e.controls=!1,e.volume=1,e.preload="auto",e.style.visibility="hidden",e.style.position="absolute",e.width=this.player.width,e.height=this.player.height,document.body.insertBefore(e,document.getElementById("controlOverlay")),this.video=e;this.video.src=setVideoUrl(this.url);this.video.load()};
Segment.prototype.removeVideo=function(){if(null!=this.video)document.body.removeChild(this.video),this.video=null};Segment.prototype.videoEnded=function(){this.player.videoEnded()};Segment.prototype.videoLoaded=function(){this.paused?(console.log("video loaded, paused"),this.currentTime=0.1):(console.log("video loaded, playing"),this.currentTime=0.1,this.play(),setTimeout(this.play.bind(this),33))};var setVideoUrl=function(e){return""==e||null==e?null:isMozilla?"http://static.simply.io/"+e+".ogv":"http://static.simply.io/"+e+".mp4"};var TimedEvent=function(e,k,r,B){this.segment=e;this.startTime=k;this.endTime=r;this.mode=B||0};(function(e){var k=/[\.\/]/,r=function(){},B=function(e,k){return e-k},w,z,P={n:{}},C=function(e,k){var r=z,A=Array.prototype.slice.call(arguments,2),i=C.listeners(e),H=0,q,O=[],V={},L=[];w=e;z=0;for(var D=0,I=i.length;D<I;D++)"zIndex"in i[D]&&(O.push(i[D].zIndex),0>i[D].zIndex&&(V[i[D].zIndex]=i[D]));for(O.sort(B);0>O[H];)if(q=V[O[H++]],L.push(q.apply(k,A)),z)return z=r,L;for(D=0;D<I;D++)if(q=i[D],"zIndex"in q)if(q.zIndex==O[H]){L.push(q.apply(k,A));if(z)return z=r,L;do if(H++,q=V[O[H]],q&&L.push(q.apply(k,
A)),z)return z=r,L;while(q)}else V[q.zIndex]=q;else if(L.push(q.apply(k,A)),z)return z=r,L;z=r;return L.length?L:null};C.listeners=function(e){var e=e.split(k),r=P,w,A,i,H,q,B,C,z,D=[r],I=[];for(H=0,q=e.length;H<q;H++){z=[];for(B=0,C=D.length;B<C;B++)for(r=D[B].n,A=[r[e[H]],r["*"]],i=2;i--;)w=A[i],w&&(z.push(w),I=I.concat(w.f||[]));D=z}return I};C.on=function(e,w){for(var B=e.split(k),A=P,i=0,H=B.length;i<H;i++)A=A.n,!A[B[i]]&&(A[B[i]]={n:{}}),A=A[B[i]];A.f=A.f||[];for(i=0,H=A.f.length;i<H;i++)if(A.f[i]==
w)return r;A.f.push(w);return function(e){+e==+e&&(w.zIndex=+e)}};C.stop=function(){z=1};C.nt=function(e){return e?RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(w):w};C.unbind=function(e,r){var w=e.split(k),A,i,B,q,C,z,L=[P];for(q=0,C=w.length;q<C;q++)for(z=0;z<L.length;z+=B.length-2){B=[z,1];A=L[z].n;if("*"!=w[q])A[w[q]]&&B.push(A[w[q]]);else for(i in A)A.hasOwnProperty(i)&&B.push(A[i]);L.splice.apply(L,B)}for(q=0,C=L.length;q<C;q++)for(A=L[q];A.n;){if(r){if(A.f){for(z=0,w=A.f.length;z<w;z++)if(A.f[z]==
r){A.f.splice(z,1);break}!A.f.length&&delete A.f}for(i in A.n)if(A.n.hasOwnProperty(i)&&A.n[i].f){B=A.n[i].f;for(z=0,w=B.length;z<w;z++)if(B[z]==r){B.splice(z,1);break}!B.length&&delete A.n[i].f}}else for(i in delete A.f,A.n)A.n.hasOwnProperty(i)&&A.n[i].f&&delete A.n[i].f;A=A.n}};C.once=function(e,k){var r=function(){k.apply(this,arguments);C.unbind(e,r)};return C.on(e,r)};C.version="0.4.0";C.toString=function(){return"You are running Eve 0.4.0"};"undefined"!=typeof module&&module.exports?module.exports=
C:e.eve=C})(this);
(function(){function e(a,m,n,u,b,d){var n=M(n),W,e,h,j,l,t,g=a.ms,p={},k={},E={};if(u)for(x=0,i=K.length;x<i;x++){var Q=K[x];if(Q.el.id==m.id&&Q.anim==a){Q.percent!=n?(K.splice(x,1),h=1):e=Q;m.attr(Q.totalOrigin);break}}else u=+k;for(var x=0,i=a.percents.length;x<i;x++){if(a.percents[x]==n||a.percents[x]>u*a.top){n=a.percents[x];l=a.percents[x-1]||0;g=g/a.top*(n-l);j=a.percents[x+1];W=a.anim[n];break}u&&m.attr(a.anim[a.percents[x]])}if(W){if(e)e.initstatus=u,e.start=new Date-e.ms*u;else{for(var o in W)if(W[H](o)&&
(ka[H](o)||m.paper.customAttributes[H](o)))switch(p[o]=m.attr(o),null==p[o]&&(p[o]=Oa[o]),k[o]=W[o],ka[o]){case y:E[o]=(k[o]-p[o])/g;break;case "colour":p[o]=f.getRGB(p[o]);x=f.getRGB(k[o]);E[o]={r:(x.r-p[o].r)/g,g:(x.g-p[o].g)/g,b:(x.b-p[o].b)/g};break;case "path":var x=ba(p[o],k[o]),v=x[1];p[o]=x[0];E[o]=[];for(x=0,i=p[o].length;x<i;x++){E[o][x]=[0];for(var q=1,A=p[o][x].length;q<A;q++)E[o][x][q]=(v[x][q]-p[o][x][q])/g}break;case "transform":x=m._;if(v=Pa(x[o],k[o])){p[o]=v.from;k[o]=v.to;E[o]=
[];E[o].real=!0;for(x=0,i=p[o].length;x<i;x++){E[o][x]=[p[o][x][0]];for(q=1,A=p[o][x].length;q<A;q++)E[o][x][q]=(k[o][x][q]-p[o][x][q])/g}}else v=m.matrix||new w,x={_:{transform:x.transform},getBBox:function(){return m.getBBox(1)}},p[o]=[v.a,v.b,v.c,v.d,v.e,v.f],Qa(x,k[o]),k[o]=x._.transform,E[o]=[(x.matrix.a-v.a)/g,(x.matrix.b-v.b)/g,(x.matrix.c-v.c)/g,(x.matrix.d-v.d)/g,(x.matrix.e-v.e)/g,(x.matrix.e-v.f)/g];break;case "csv":v=G(W[o])[c](X);i=G(p[o])[c](X);if("clip-rect"==o)for(p[o]=i,E[o]=[],x=
i.length;x--;)E[o][x]=(v[x]-p[o][x])/g;k[o]=v;break;default:for(v=[][F](W[o]),i=[][F](p[o]),E[o]=[],x=m.paper.customAttributes[o].length;x--;)E[o][x]=((v[x]||0)-(i[x]||0))/g}o=W.easing;x=f.easing_formulas[o];if(!x)if((x=G(o).match(Ra))&&5==x.length)var B=x,x=function(a){return r(a,+B[1],+B[2],+B[3],+B[4],g)};else x=Sa;t=W.start||a.start||+new Date;Q={anim:a,percent:n,timestamp:t,start:t+(a.del||0),status:0,initstatus:u||0,stop:!1,ms:g,easing:x,from:p,diff:E,to:k,el:m,callback:W.callback,prev:l,next:j,
repeat:d||a.times,origin:m.attr(),totalOrigin:b};K.push(Q);if(u&&!e&&!h&&(Q.stop=!0,Q.start=new Date-g*u,1==K.length))return la();h&&(Q.start=new Date-Q.ms*u);1==K.length&&ya(la)}eve("anim.start."+m.id,m,a)}}function k(a,m){var n=[],u={};this.ms=m;this.times=1;if(a){for(var b in a)a[H](b)&&(u[M(b)]=a[b],n.push(M(b)));n.sort(Ta)}this.anim=u;this.top=n[n.length-1];this.percents=n}function r(a,m,n,u,b,d){function c(a,m){var n,u,b,d;for(b=a,u=0;8>u;u++){d=((j*b+h)*b+e)*b-a;if(t(d)<m)return b;n=(3*j*b+
2*h)*b+e;if(1.0E-6>t(n))break;b-=d/n}n=0;u=1;b=a;if(b<n)return n;if(b>u)return u;for(;n<u;){d=((j*b+h)*b+e)*b;if(t(d-a)<m)break;a>d?n=b:u=b;b=(u-n)/2+n}return b}var e=3*m,h=3*(u-m)-e,j=1-e-h,f=3*n,l=3*(b-n)-f,g=1-f-l;return function(a,m){var n=c(a,m);return((g*n+l)*n+f)*n}(a,1/(200*d))}function B(){return this.x+S+this.y+S+this.width+" \u00d7 "+this.height}function w(a,m,n,u,b,d){null!=a?(this.a=+a,this.b=+m,this.c=+n,this.d=+u,this.e=+b,this.f=+d):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=
0)}function z(a){for(var m=[],n=0,u=a.length;u-2>n;n+=2){var b=[{x:+a[n],y:+a[n+1]},{x:+a[n],y:+a[n+1]},{x:+a[n+2],y:+a[n+3]},{x:+a[n+4],y:+a[n+5]}];u-4==n?(b[0]={x:+a[n-2],y:+a[n-1]},b[3]=b[2]):n&&(b[0]={x:+a[n-2],y:+a[n-1]});m.push(["C",(-b[0].x+6*b[1].x+b[2].x)/6,(-b[0].y+6*b[1].y+b[2].y)/6,(b[1].x+6*b[2].x-b[3].x)/6,(b[1].y+6*b[2].y-b[3].y)/6,b[2].x,b[2].y])}return m}function P(){return this.hex}function C(a,m,n){function u(){var b=Array.prototype.slice.call(arguments,0),d=b.join("\u2400"),c=
u.cache=u.cache||{},e=u.count=u.count||[];if(c[H](d)){a:for(var b=e,e=d,h=0,j=b.length;h<j;h++)if(b[h]===e){b.push(b.splice(h,1)[0]);break a}return n?n(c[d]):c[d]}1E3<=e.length&&delete c[e.shift()];e.push(d);c[d]=a[I](m,b);return n?n(c[d]):c[d]}return u}function f(a){if(f.is(a,"function"))return U?a():eve.on("DOMload",a);if(f.is(a,v))return f._engine.create[I](f,a.splice(0,3+f.is(a[0],y))).add(a);var m=Array.prototype.slice.call(arguments,0);if(f.is(m[m.length-1],"function")){var n=m.pop();return U?
n.call(f._engine.create[I](f,m)):eve.on("DOMload",function(){n.call(f._engine.create[I](f,m))})}return f._engine.create[I](f,arguments)}f.version="2.0.1";f.eve=eve;var U,X=/[, ]+/,A={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},i=/\{(\d+)\}/g,H="hasOwnProperty",q={doc:document,win:window},O=Object.prototype[H].call(q.win,"Raphael"),V=q.win.Raphael,L=function(){this.ca=this.customAttributes={}},D,I="apply",F="concat",N="createTouch"in q.doc,S=" ",G=String,c="split",p="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[c](S),
g={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},b=G.prototype.toLowerCase,d=Math,h=d.max,j=d.min,t=d.abs,l=d.pow,o=d.PI,y="number",v="array",Ua=Object.prototype.toString;f._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i;var Va=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
Wa={NaN:1,Infinity:1,"-Infinity":1},Ra=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ma=d.round,M=parseFloat,Y=parseInt,za=G.prototype.toUpperCase,Oa=f._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,
rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ka=f._availableAnimAttrs={blur:y,"clip-rect":"csv",cx:y,cy:y,fill:"colour","fill-opacity":y,"font-size":y,height:y,opacity:y,path:"path",r:y,rx:y,ry:y,stroke:"colour","stroke-opacity":y,"stroke-width":y,transform:"transform",width:y,x:y,y:y},na=/\s*,\s*/,Xa=
{hs:1,rg:1},Ya=/,?([achlmqrstvxz]),?/gi,Za=/([achlmrqstvz])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,$a=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,Aa=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)\s*,?\s*/ig;f._radial_gradient=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/;var ca={},Ta=function(a,m){return M(a)-M(m)},ab=function(){},Sa=function(a){return a},oa=f._rectPath=function(a,m,n,u,b){return b?[["M",a+b,m],["l",n-2*b,0],["a",b,b,0,0,1,b,b],["l",0,u-2*b],["a",b,b,0,0,1,-b,b],["l",2*b-n,0],["a",
b,b,0,0,1,-b,-b],["l",0,2*b-u],["a",b,b,0,0,1,b,-b],["z"]]:[["M",a,m],["l",n,0],["l",0,u],["l",-n,0],["z"]]},Ba=function(a,m,n,u){null==u&&(u=n);return[["M",a,m],["m",0,-u],["a",n,u,0,1,1,0,2*u],["a",n,u,0,1,1,0,-2*u],["z"]]},pa=f._getPath={path:function(a){return a.attr("path")},circle:function(a){a=a.attrs;return Ba(a.cx,a.cy,a.r)},ellipse:function(a){a=a.attrs;return Ba(a.cx,a.cy,a.rx,a.ry)},rect:function(a){a=a.attrs;return oa(a.x,a.y,a.width,a.height,a.r)},image:function(a){a=a.attrs;return oa(a.x,
a.y,a.width,a.height)},text:function(a){a=a._getBBox();return oa(a.x,a.y,a.width,a.height)}},Ca=f.mapPath=function(a,m){if(!m)return a;var n,u,b,d,c,e,h,a=ba(a);for(b=0,c=a.length;b<c;b++){h=a[b];for(d=1,e=h.length;d<e;d+=2)n=m.x(h[d],h[d+1]),u=m.y(h[d],h[d+1]),h[d]=n,h[d+1]=u}return a};f._g=q;f.type=q.win.SVGAngle||q.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if("VML"==f.type){var qa=q.doc.createElement("div"),ea;qa.innerHTML='<v:shape adj="1"/>';
ea=qa.firstChild;ea.style.behavior="url(#default#VML)";if(!ea||"object"!=typeof ea.adj)return f.type="";qa=null}f.svg=!(f.vml="VML"==f.type);f._Paper=L;f.fn=D=L.prototype=f.prototype;f._id=0;f._oid=0;f.is=function(a,m){m=b.call(m);return"finite"==m?!Wa[H](+a):"array"==m?a instanceof Array:"null"==m&&null===a||m==typeof a&&null!==a||"object"==m&&a===Object(a)||"array"==m&&Array.isArray&&Array.isArray(a)||Ua.call(a).slice(8,-1).toLowerCase()==m};f.angle=function(a,m,n,u,b,c){return null==b?(a-=n,m-=
u,!a&&!m?0:(180*d.atan2(-m,-a)/o+540)%360):f.angle(a,m,b,c)-f.angle(n,u,b,c)};f.rad=function(a){return a%360*o/180};f.deg=function(a){return 180*a/o%360};f.snapTo=function(a,m,n){n=f.is(n,"finite")?n:10;if(f.is(a,v))for(var u=a.length;u--;){if(t(a[u]-m)<=n)return a[u]}else{a=+a;u=m%a;if(u<n)return m-u;if(u>a-n)return m-u+a}return m};f.createUUID=function(a,m){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,m).toUpperCase()}}(/[xy]/g,function(a){var m=16*d.random()|0;return("x"==
a?m:m&3|8).toString(16)});f.setWindow=function(a){eve("setWindow",f,q.win,a);q.win=a;q.doc=q.win.document;f._engine.initWin&&f._engine.initWin(q.win)};var fa=function(a){if(f.vml){var m=/^\s+|\s+$/g,n;try{var u=new ActiveXObject("htmlfile");u.write("<body>");u.close();n=u.body}catch(b){n=createPopup().document.body}var d=n.createTextRange();fa=C(function(a){try{n.style.color=G(a).replace(m,"");var u=d.queryCommandValue("ForeColor");return"#"+("000000"+((u&255)<<16|u&65280|(u&16711680)>>>16).toString(16)).slice(-6)}catch(b){return"none"}})}else{var c=
q.doc.createElement("i");c.title="Rapha\u00ebl Colour Picker";c.style.display="none";q.doc.body.appendChild(c);fa=C(function(a){c.style.color=a;return q.doc.defaultView.getComputedStyle(c,"").getPropertyValue("color")})}return fa(a)},bb=function(){return"hsb("+[this.h,this.s,this.b]+")"},cb=function(){return"hsl("+[this.h,this.s,this.l]+")"},Da=function(){return this.hex},Ea=function(a,m,n){null==m&&f.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(n=a.b,m=a.g,a=a.r);if(null==m&&f.is(a,"string"))n=f.getRGB(a),
a=n.r,m=n.g,n=n.b;if(1<a||1<m||1<n)a/=255,m/=255,n/=255;return[a,m,n]},Fa=function(a,m,n,u){a*=255;m*=255;n*=255;a={r:a,g:m,b:n,hex:f.rgb(a,m,n),toString:Da};f.is(u,"finite")&&(a.opacity=u);return a};f.color=function(a){var m;f.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(m=f.hsb2rgb(a),a.r=m.r,a.g=m.g,a.b=m.b,a.hex=m.hex):f.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(m=f.hsl2rgb(a),a.r=m.r,a.g=m.g,a.b=m.b,a.hex=m.hex):(f.is(a,"string")&&(a=f.getRGB(a)),f.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(m=
f.rgb2hsl(a),a.h=m.h,a.s=m.s,a.l=m.l,m=f.rgb2hsb(a),a.v=m.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1));a.toString=Da;return a};f.hsb2rgb=function(a,m,n,u){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(n=a.b,m=a.s,a=a.h,u=a.o);a*=360;var b,d,c,e,h;a=a%360/60;h=n*m;e=h*(1-t(a%2-1));b=d=c=n-h;a=~~a;b+=[h,e,0,0,e,h][a];d+=[e,h,h,e,0,0][a];c+=[0,0,e,h,h,e][a];return Fa(b,d,c,u)};f.hsl2rgb=function(a,m,n,u){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(n=a.l,m=a.s,a=a.h);if(1<a||1<m||1<n)a/=
360,m/=100,n/=100;var a=360*a,b,d,c,e,h;a=a%360/60;h=2*m*(0.5>n?n:1-n);e=h*(1-t(a%2-1));b=d=c=n-h/2;a=~~a;b+=[h,e,0,0,e,h][a];d+=[e,h,h,e,0,0][a];c+=[0,0,e,h,h,e][a];return Fa(b,d,c,u)};f.rgb2hsb=function(a,m,n){n=Ea(a,m,n);a=n[0];m=n[1];n=n[2];var u,b,d;b=h(a,m,n);d=b-j(a,m,n);u=0==d?null:b==a?(m-n)/d:b==m?(n-a)/d+2:(a-m)/d+4;u=60*((u+360)%6)/360;a=0==d?0:d/b;return{h:u,s:a,b:b,toString:bb}};f.rgb2hsl=function(a,m,n){n=Ea(a,m,n);a=n[0];m=n[1];n=n[2];var u,b,d,c,e;d=h(a,m,n);c=j(a,m,n);e=d-c;u=0==
e?null:d==a?(m-n)/e:d==m?(n-a)/e+2:(a-m)/e+4;u=60*((u+360)%6)/360;b=(d+c)/2;a=0==e?0:0.5>b?e/(2*b):e/(2-2*b);return{h:u,s:a,l:b,toString:cb}};f._path2string=function(){return this.join(",").replace(Ya,"$1")};f._preload=function(a,m){var n=q.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em";n.onload=function(){m.call(this);this.onload=null;q.doc.body.removeChild(this)};n.onerror=function(){q.doc.body.removeChild(this)};q.doc.body.appendChild(n);n.src=a};f.getRGB=
C(function(a){if(!a||(a=G(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:P};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:P};!Xa[H](a.toLowerCase().substring(0,2))&&"#"!=a.charAt()&&(a=fa(a));var m,n,b,d,e,h;if(a=a.match(Va)){a[2]&&(b=Y(a[2].substring(5),16),n=Y(a[2].substring(3,5),16),m=Y(a[2].substring(1,3),16));a[3]&&(b=Y((e=a[3].charAt(3))+e,16),n=Y((e=a[3].charAt(2))+e,16),m=Y((e=a[3].charAt(1))+e,16));a[4]&&(h=a[4][c](na),m=M(h[0]),"%"==h[0].slice(-1)&&(m*=2.55),
n=M(h[1]),"%"==h[1].slice(-1)&&(n*=2.55),b=M(h[2]),"%"==h[2].slice(-1)&&(b*=2.55),"rgba"==a[1].toLowerCase().slice(0,4)&&(d=M(h[3])),h[3]&&"%"==h[3].slice(-1)&&(d/=100));if(a[5])return h=a[5][c](na),m=M(h[0]),"%"==h[0].slice(-1)&&(m*=2.55),n=M(h[1]),"%"==h[1].slice(-1)&&(n*=2.55),b=M(h[2]),"%"==h[2].slice(-1)&&(b*=2.55),("deg"==h[0].slice(-3)||"\u00b0"==h[0].slice(-1))&&(m/=360),"hsba"==a[1].toLowerCase().slice(0,4)&&(d=M(h[3])),h[3]&&"%"==h[3].slice(-1)&&(d/=100),f.hsb2rgb(m,n,b,d);if(a[6])return h=
a[6][c](na),m=M(h[0]),"%"==h[0].slice(-1)&&(m*=2.55),n=M(h[1]),"%"==h[1].slice(-1)&&(n*=2.55),b=M(h[2]),"%"==h[2].slice(-1)&&(b*=2.55),("deg"==h[0].slice(-3)||"\u00b0"==h[0].slice(-1))&&(m/=360),"hsla"==a[1].toLowerCase().slice(0,4)&&(d=M(h[3])),h[3]&&"%"==h[3].slice(-1)&&(d/=100),f.hsl2rgb(m,n,b,d);a={r:m,g:n,b:b,toString:P};a.hex="#"+(16777216|b|n<<8|m<<16).toString(16).slice(1);f.is(d,"finite")&&(a.opacity=d);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:P}},f);f.hsb=C(function(a,
m,n){return f.hsb2rgb(a,m,n).hex});f.hsl=C(function(a,m,n){return f.hsl2rgb(a,m,n).hex});f.rgb=C(function(a,m,n){return"#"+(16777216|n|m<<8|a<<16).toString(16).slice(1)});f.getColor=function(a){var a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75},m=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;1<a.h&&(a.h=0,a.s-=0.2,0>=a.s&&(this.getColor.start={h:0,s:1,b:a.b}));return m.hex};f.getColor.reset=function(){delete this.start};f.parsePathString=C(function(a){if(!a)return null;var m={a:7,c:6,h:1,l:2,
m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];f.is(a,v)&&f.is(a[0],v)&&(n=da(a));n.length||G(a).replace(Za,function(a,b,d){var c=[],a=b.toLowerCase();d.replace(Aa,function(a,m){m&&c.push(+m)});"m"==a&&2<c.length&&(n.push([b][F](c.splice(0,2))),a="l",b="m"==b?"l":"L");if("r"==a)n.push([b][F](c));else for(;c.length>=m[a]&&!(n.push([b][F](c.splice(0,m[a]))),!m[a]););});n.toString=f._path2string;return n});f.parseTransformString=C(function(a){if(!a)return null;var m=[];f.is(a,v)&&f.is(a[0],v)&&(m=da(a));m.length||
G(a).replace($a,function(a,u,d){var c=[];b.call(u);d.replace(Aa,function(a,m){m&&c.push(+m)});m.push([u][F](c))});m.toString=f._path2string;return m});f.findDotsAtSegment=function(a,m,n,b,c,h,e,j,f){var g=1-f,p=l(g,3),t=l(g,2),k=f*f,y=k*f,i=p*a+3*t*f*n+3*g*f*f*c+y*e,p=p*m+3*t*f*b+3*g*f*f*h+y*j,t=a+2*f*(n-a)+k*(c-2*n+a),y=m+2*f*(b-m)+k*(h-2*b+m),E=n+2*f*(c-n)+k*(e-2*c+n),k=b+2*f*(h-b)+k*(j-2*h+b),a=g*a+f*n,m=g*m+f*b,c=g*c+f*e,h=g*h+f*j,j=90-180*d.atan2(t-E,y-k)/o;(t>E||y<k)&&(j+=180);return{x:i,y:p,
m:{x:t,y:y},n:{x:E,y:k},start:{x:a,y:m},end:{x:c,y:h},alpha:j}};f._removedFactory=function(a){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+a+"\u201d of removed object");}};var Ga=C(function(a){if(!a)return{x:0,y:0,width:0,height:0};for(var a=ba(a),m=0,n=0,b=[],d=[],c,e=0,f=a.length;e<f;e++)c=a[e],"M"==c[0]?(m=c[1],n=c[2],b.push(m),d.push(n)):(m=db(m,n,c[1],c[2],c[3],c[4],c[5],c[6]),b=b[F](m.min.x,m.max.x),d=d[F](m.min.y,m.max.y),m=c[5],n=c[6]);a=j[I](0,b);c=j[I](0,
d);return{x:a,y:c,width:h[I](0,b)-a,height:h[I](0,d)-c}},null,function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}}),da=function(a){var m=[];if(!f.is(a,v)||!f.is(a&&a[0],v))a=f.parsePathString(a);for(var b=0,u=a.length;b<u;b++){m[b]=[];for(var d=0,c=a[b].length;d<c;d++)m[b][d]=a[b][d]}m.toString=f._path2string;return m},eb=f._pathToRelative=C(function(a){if(!f.is(a,v)||!f.is(a&&a[0],v))a=f.parsePathString(a);var m=[],n=0,d=0,c=0,h=0,e=0;"M"==a[0][0]&&(n=a[0][1],d=a[0][2],c=n,h=d,e++,m.push(["M",
n,d]));for(var j=a.length;e<j;e++){var g=m[e]=[],l=a[e];if(l[0]!=b.call(l[0]))switch(g[0]=b.call(l[0]),g[0]){case "a":g[1]=l[1];g[2]=l[2];g[3]=l[3];g[4]=l[4];g[5]=l[5];g[6]=+(l[6]-n).toFixed(3);g[7]=+(l[7]-d).toFixed(3);break;case "v":g[1]=+(l[1]-d).toFixed(3);break;case "m":c=l[1],h=l[2];default:for(var p=1,t=l.length;p<t;p++)g[p]=+(l[p]-(p%2?n:d)).toFixed(3)}else{m[e]=[];"m"==l[0]&&(c=l[1]+n,h=l[2]+d);g=0;for(p=l.length;g<p;g++)m[e][g]=l[g]}l=m[e].length;switch(m[e][0]){case "z":n=c;d=h;break;case "h":n+=
+m[e][l-1];break;case "v":d+=+m[e][l-1];break;default:n+=+m[e][l-2],d+=+m[e][l-1]}}m.toString=f._path2string;return m},0,da),Ha=f._pathToAbsolute=C(function(a){if(!f.is(a,v)||!f.is(a&&a[0],v))a=f.parsePathString(a);if(!a||!a.length)return[["M",0,0]];var m=[],b=0,d=0,c=0,h=0,e=0;"M"==a[0][0]&&(b=+a[0][1],d=+a[0][2],c=b,h=d,e++,m[0]=["M",b,d]);for(var j,l=e,g=a.length;l<g;l++){m.push(e=[]);j=a[l];if(j[0]!=za.call(j[0]))switch(e[0]=za.call(j[0]),e[0]){case "A":e[1]=j[1];e[2]=j[2];e[3]=j[3];e[4]=j[4];
e[5]=j[5];e[6]=+(j[6]+b);e[7]=+(j[7]+d);break;case "V":e[1]=+j[1]+d;break;case "H":e[1]=+j[1]+b;break;case "R":for(var p=[b,d][F](j.slice(1)),t=2,o=p.length;t<o;t++)p[t]=+p[t]+b,p[++t]=+p[t]+d;m.pop();m=m[F](z(p));break;case "M":c=+j[1]+b,h=+j[2]+d;default:for(t=1,o=j.length;t<o;t++)e[t]=+j[t]+(t%2?b:d)}else if("R"==j[0])p=[b,d][F](j.slice(1)),m.pop(),m=m[F](z(p)),e=["R"][F](j.slice(-2));else{t=0;for(o=j.length;t<o;t++)e[t]=j[t]}switch(e[0]){case "Z":b=c;d=h;break;case "H":b=e[1];break;case "V":d=
e[1];break;case "M":c=e[e.length-2],h=e[e.length-1];default:b=e[e.length-2],d=e[e.length-1]}}m.toString=f._path2string;return m},null,da),Ia=function(a,m,b,d,c,e){var h=1/3,j=2/3;return[h*a+j*b,h*m+j*d,h*c+j*b,h*e+j*d,c,e]},Ja=function(a,m,b,u,e,h,j,f,l,g){var p=120*o/180,k=o/180*(+e||0),y=[],i,v=C(function(a,b,m){var n=a*d.cos(m)-b*d.sin(m),a=a*d.sin(m)+b*d.cos(m);return{x:n,y:a}});if(g)x=g[0],i=g[1],h=g[2],E=g[3];else{i=v(a,m,-k);a=i.x;m=i.y;i=v(f,l,-k);f=i.x;l=i.y;d.cos(o/180*e);d.sin(o/180*e);
i=(a-f)/2;x=(m-l)/2;E=i*i/(b*b)+x*x/(u*u);1<E&&(E=d.sqrt(E),b*=E,u*=E);var E=b*b,Q=u*u,E=(h==j?-1:1)*d.sqrt(t((E*Q-E*x*x-Q*i*i)/(E*x*x+Q*i*i))),h=E*b*x/u+(a+f)/2,E=E*-u*i/b+(m+l)/2,x=d.asin(((m-E)/u).toFixed(9));i=d.asin(((l-E)/u).toFixed(9));x=a<h?o-x:x;i=f<h?o-i:i;0>x&&(x=2*o+x);0>i&&(i=2*o+i);j&&x>i&&(x-=2*o);!j&&i>x&&(i-=2*o)}if(t(i-x)>p){var y=i,Q=f,q=l;i=x+p*(j&&i>x?1:-1);f=h+b*d.cos(i);l=E+u*d.sin(i);y=Ja(f,l,b,u,e,0,j,Q,q,[i,y,h,E])}h=i-x;e=d.cos(x);p=d.sin(x);j=d.cos(i);i=d.sin(i);h=d.tan(h/
4);b=4/3*b*h;h*=4/3*u;u=[a,m];a=[a+b*p,m-h*e];m=[f+b*i,l-h*j];f=[f,l];a[0]=2*u[0]-a[0];a[1]=2*u[1]-a[1];if(g)return[a,m,f][F](y);y=[a,m,f][F](y).join()[c](",");g=[];f=0;for(l=y.length;f<l;f++)g[f]=f%2?v(y[f-1],y[f],k).y:v(y[f],y[f+1],k).x;return g},ga=function(a,b,n,d,e,c,h,j,f){var g=1-f;return{x:l(g,3)*a+3*l(g,2)*f*n+3*g*f*f*e+l(f,3)*h,y:l(g,3)*b+3*l(g,2)*f*d+3*g*f*f*c+l(f,3)*j}},db=C(function(a,b,n,e,c,f,l,g){var p=c-2*n+a-(l-2*c+n),o=2*(n-a)-2*(c-n),i=a-n,k=(-o+d.sqrt(o*o-4*p*i))/2/p,y=(-o-d.sqrt(o*
o-4*p*i))/2/p,v=[b,g],q=[a,l],E;"1e12"<t(k)&&(k=0.5);"1e12"<t(y)&&(y=0.5);0<k&&1>k&&(E=ga(a,b,n,e,c,f,l,g,k),q.push(E.x),v.push(E.y));0<y&&1>y&&(E=ga(a,b,n,e,c,f,l,g,y),q.push(E.x),v.push(E.y));p=f-2*e+b-(g-2*f+e);o=2*(e-b)-2*(f-e);i=b-e;k=(-o+d.sqrt(o*o-4*p*i))/2/p;y=(-o-d.sqrt(o*o-4*p*i))/2/p;"1e12"<t(k)&&(k=0.5);"1e12"<t(y)&&(y=0.5);0<k&&1>k&&(E=ga(a,b,n,e,c,f,l,g,k),q.push(E.x),v.push(E.y));0<y&&1>y&&(E=ga(a,b,n,e,c,f,l,g,y),q.push(E.x),v.push(E.y));return{min:{x:j[I](0,q),y:j[I](0,v)},max:{x:h[I](0,
q),y:h[I](0,v)}}}),ba=f._path2curve=C(function(a,b){var n=Ha(a),d=b&&Ha(b),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},j=function(a,b){var m,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"][F](Ja[I](0,[b.x,b.y][F](a.slice(1))));break;case "S":m=b.x+(b.x-(b.bx||b.x));d=b.y+(b.y-(b.by||b.y));a=["C",m,d][F](a.slice(1));break;case "T":b.qx=b.x+(b.x-(b.qx||b.x));
b.qy=b.y+(b.y-(b.qy||b.y));a=["C"][F](Ia(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"][F](Ia(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"][F]([b.x,b.y,a[1],a[2],a[1],a[2]]);break;case "H":a=["C"][F]([b.x,b.y,a[1],b.y,a[1],b.y]);break;case "V":a=["C"][F]([b.x,b.y,b.x,a[1],b.x,a[1]]);break;case "Z":a=["C"][F]([b.x,b.y,b.X,b.Y,b.X,b.Y])}return a},f=function(a,b){if(7<a[b].length){a[b].shift();for(var m=a[b];m.length;)a.splice(b++,0,["C"][F](m.splice(0,6)));a.splice(b,
1);p=h(n.length,d&&d.length||0)}},l=function(a,b,m,e,c){a&&b&&"M"==a[c][0]&&"M"!=b[c][0]&&(b.splice(c,0,["M",e.x,e.y]),m.bx=0,m.by=0,m.x=a[c][1],m.y=a[c][2],p=h(n.length,d&&d.length||0))},g=0,p=h(n.length,d&&d.length||0);for(;g<p;g++){n[g]=j(n[g],e);f(n,g);d&&(d[g]=j(d[g],c));d&&f(d,g);l(n,d,e,c,g);l(d,n,c,e,g);var t=n[g],o=d&&d[g],k=t.length,i=d&&o.length;e.x=t[k-2];e.y=t[k-1];e.bx=M(t[k-4])||e.x;e.by=M(t[k-3])||e.y;c.bx=d&&(M(o[i-4])||c.x);c.by=d&&(M(o[i-3])||c.y);c.x=d&&o[i-2];c.y=d&&o[i-1]}return d?
[n,d]:n},null,da);f._parseDots=C(function(a){for(var b=[],d=0,e=a.length;d<e;d++){var c={},h=a[d].match(/^([^:]*):?([\d\.]*)/);c.color=f.getRGB(h[1]);if(c.color.error)return null;c.color=c.color.hex;h[2]&&(c.offset=h[2]+"%");b.push(c)}for(d=1,e=b.length-1;d<e;d++)if(!b[d].offset){a=M(b[d-1].offset||0);h=0;for(c=d+1;c<e;c++)if(b[c].offset){h=b[c].offset;break}h||(h=100,c=e);h=M(h);for(h=(h-a)/(c-d+1);d<c;d++)a+=h,b[d].offset=a+"%"}return b});var ha=f._tear=function(a,b){a==b.top&&(b.top=a.prev);a==
b.bottom&&(b.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)};f._tofront=function(a,b){b.top!==a&&(ha(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)};f._toback=function(a,b){b.bottom!==a&&(ha(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)};f._insertafter=function(a,b,d){ha(a,d);b==d.top&&(d.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a};f._insertbefore=function(a,b,d){ha(a,d);b==d.bottom&&(d.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;
b.prev=a;a.next=b};var Qa=f._extractTransform=function(a,b){if(null==b)return a._.transform;var b=G(b).replace(/\.{3}|\u2026/g,a._.transform||""),d=f.parseTransformString(b),c=0,e=0,h=0,j=1,g=1,l=a._,p=new w;l.transform=d||[];if(d)for(var t=0,o=d.length;t<o;t++){var k=d[t],i=k.length,y=G(k[0]).toLowerCase(),v=k[0]!=y,q=v?p.invert():0,x,r,A,B,z;"t"==y&&3==i?v?(x=q.x(0,0),r=q.y(0,0),A=q.x(k[1],k[2]),B=q.y(k[1],k[2]),p.translate(A-x,B-r)):p.translate(k[1],k[2]):"r"==y?2==i?(z=z||a.getBBox(1),p.rotate(k[1],
z.x+z.width/2,z.y+z.height/2),c+=k[1]):4==i&&(v?(A=q.x(k[2],k[3]),B=q.y(k[2],k[3]),p.rotate(k[1],A,B)):p.rotate(k[1],k[2],k[3]),c+=k[1]):"s"==y?2==i||3==i?(z=z||a.getBBox(1),p.scale(k[1],k[i-1],z.x+z.width/2,z.y+z.height/2),j*=k[1],g*=k[i-1]):5==i&&(v?(A=q.x(k[3],k[4]),B=q.y(k[3],k[4]),p.scale(k[1],k[2],A,B)):p.scale(k[1],k[2],k[3],k[4]),j*=k[1],g*=k[2]):"m"==y&&7==i&&p.add(k[1],k[2],k[3],k[4],k[5],k[6]);l.dirtyT=1;a.matrix=p}a.matrix=p;l.sx=j;l.sy=g;l.deg=c;l.dx=e=p.e;l.dy=h=p.f;1==j&&1==g&&!c&&
l.bbox?(l.bbox.x+=+e,l.bbox.y+=+h):l.dirtyT=1},Ka=function(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},Pa=f._equaliseTransform=function(a,b){b=G(b).replace(/\.{3}|\u2026/g,a);a=f.parseTransformString(a)||[];b=f.parseTransformString(b)||[];for(var d=h(a.length,b.length),c=[],e=[],j=0,g,l,p,k;j<d;j++){p=a[j]||Ka(b[j]);k=b[j]||Ka(p);
if(p[0]!=k[0]||"r"==p[0].toLowerCase()&&(p[2]!=k[2]||p[3]!=k[3])||"s"==p[0].toLowerCase()&&(p[3]!=k[3]||p[4]!=k[4]))return;c[j]=[];e[j]=[];for(g=0,l=h(p.length,k.length);g<l;g++)g in p&&(c[j][g]=p[g]),g in k&&(e[j][g]=k[g])}return{from:c,to:e}};f._getContainer=function(a,b,d,c){var e;e=null==c&&!f.is(a,"object")?q.doc.getElementById(a):a;if(null!=e)return e.tagName?null==b?{container:e,width:e.style.pixelWidth||e.offsetWidth,height:e.style.pixelHeight||e.offsetHeight}:{container:e,width:b,height:d}:
{container:1,x:a,y:b,width:d,height:c}};f.pathToRelative=eb;f._engine={};f.path2curve=ba;f.matrix=function(a,b,d,c,e,h){return new w(a,b,d,c,e,h)};(function(a){function b(a){var m=d.sqrt(e(a));a[0]&&(a[0]/=m);a[1]&&(a[1]/=m)}function e(a){return a[0]*a[0]+a[1]*a[1]}a.add=function(a,b,d,m,c,e){var n=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],b=[[a,d,c],[b,m,e],[0,0,1]];a&&a instanceof w&&(b=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(a=0;3>a;a++)for(d=0;3>d;d++){for(m=c=0;3>
m;m++)c+=h[a][m]*b[m][d];n[a][d]=c}this.a=n[0][0];this.b=n[1][0];this.c=n[0][1];this.d=n[1][1];this.e=n[0][2];this.f=n[1][2]};a.invert=function(){var a=this.a*this.d-this.b*this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c*this.f-this.d*this.e)/a,(this.b*this.e-this.a*this.f)/a)};a.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e,this.f)};a.translate=function(a,b){this.add(1,0,0,1,a,b)};a.scale=function(a,b,d,m){null==b&&(b=a);(d||m)&&this.add(1,0,0,1,d,m);this.add(a,
0,0,b,0,0);(d||m)&&this.add(1,0,0,1,-d,-m)};a.rotate=function(a,b,m){a=f.rad(a);b=b||0;m=m||0;var c=+d.cos(a).toFixed(9),a=+d.sin(a).toFixed(9);this.add(c,a,-a,c,b,m);this.add(1,0,0,1,-b,-m)};a.x=function(a,b){return a*this.a+b*this.c+this.e};a.y=function(a,b){return a*this.b+b*this.d+this.f};a.get=function(a){return+this[G.fromCharCode(97+a)].toFixed(4)};a.toString=function(){return f.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),
this.get(2),this.get(1),this.get(3),0,0].join()};a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};a.split=function(){var a={};a.dx=this.e;a.dy=this.f;var c=[[this.a,this.c],[this.b,this.d]];a.scalex=d.sqrt(e(c[0]));b(c[0]);a.shear=c[0][0]*c[1][0]+c[0][1]*c[1][1];
c[1]=[c[1][0]-c[0][0]*a.shear,c[1][1]-c[0][1]*a.shear];a.scaley=d.sqrt(e(c[1]));b(c[1]);a.shear/=a.scaley;var h=-c[0][1],c=c[1][1];0>c?(a.rotate=f.deg(d.acos(c)),0>h&&(a.rotate=360-a.rotate)):a.rotate=f.deg(d.asin(h));a.isSimple=!+a.shear.toFixed(9)&&(a.scalex.toFixed(9)==a.scaley.toFixed(9)||!a.rotate);a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate;a.noRotation=!+a.shear.toFixed(9)&&!a.rotate;return a};a.toTransformString=function(a){a=a||this[c]();return a.isSimple?
(a.scalex=+a.scalex.toFixed(4),a.scaley=+a.scaley.toFixed(4),a.rotate=+a.rotate.toFixed(4),(a.dx&&a.dy?"t"+[a.dx,a.dy]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[a.rotate,0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}})(w.prototype);var ia=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(ia&&4>ia[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==
navigator.vendor&&ia&&8>ia[1]?D.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:D.safari=ab;for(var fb=function(){this.returnValue=!1},gb=function(){return this.originalEvent.preventDefault()},hb=function(){this.cancelBubble=!0},ib=function(){return this.originalEvent.stopPropagation()},jb=function(){if(q.doc.addEventListener)return function(a,b,d,c){var e=N&&g[b]?g[b]:b,h=function(e){var h=e.clientX+(q.doc.documentElement.scrollLeft||
q.doc.body.scrollLeft),j=e.clientY+(q.doc.documentElement.scrollTop||q.doc.body.scrollTop);if(N&&g[H](b))for(var f=0,l=e.targetTouches&&e.targetTouches.length;f<l;f++)if(e.targetTouches[f].target==a){l=e;e=e.targetTouches[f];e.originalEvent=l;e.preventDefault=gb;e.stopPropagation=ib;break}return d.call(c,e,h,j)};a.addEventListener(e,h,!1);return function(){a.removeEventListener(e,h,!1);return!0}};if(q.doc.attachEvent)return function(a,b,d,c){var e=function(a){var a=a||q.win.event,b=a.clientX+(q.doc.documentElement.scrollLeft||
q.doc.body.scrollLeft),m=a.clientY+(q.doc.documentElement.scrollTop||q.doc.body.scrollTop);a.preventDefault=a.preventDefault||fb;a.stopPropagation=a.stopPropagation||hb;return d.call(c,a,b,m)};a.attachEvent("on"+b,e);return function(){a.detachEvent("on"+b,e);return!0}}}(),Z=[],ra=function(a){for(var b=a.clientX,d=a.clientY,c=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,e=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft,h,j=Z.length;j--;){h=Z[j];if(N)for(var f=a.touches.length,g;f--;){if(g=
a.touches[f],g.identifier==h.el._drag.id){b=g.clientX;d=g.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var f=h.el.node,l;g=f.nextSibling;var p=f.parentNode,k=f.style.display;q.win.opera&&p.removeChild(f);f.style.display="none";l=h.el.paper.getElementByPoint(b,d);f.style.display=k;q.win.opera&&(g?p.insertBefore(f,g):p.appendChild(f));l&&eve("drag.over."+h.el.id,h.el,l);b+=e;d+=c;eve("drag.move."+h.el.id,h.move_scope||h.el,b-h.el._drag.x,d-h.el._drag.y,
b,d,a)}},sa=function(a){f.unmousemove(ra).unmouseup(sa);for(var b=Z.length,d;b--;)d=Z[b],d.el._drag={},eve("drag.end."+d.el.id,d.end_scope||d.start_scope||d.move_scope||d.el,a);Z=[]},J=f.el={},La=p.length;La--;)(function(a){f[a]=J[a]=function(b,d){f.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:jb(this.shape||this.node||q.doc,a,b,d||this)}));return this};f["un"+a]=J["un"+a]=function(b){for(var d=this.events,c=d.length;c--;)if(d[c].name==a&&d[c].f==b){d[c].unbind();
d.splice(c,1);!d.length&&delete this.events;break}return this}})(p[La]);J.data=function(a,b){var d=ca[this.id]=ca[this.id]||{};if(1==arguments.length){if(f.is(a,"object")){for(var c in a)a[H](c)&&this.data(c,a[c]);return this}eve("data.get."+this.id,this,d[a],a);return d[a]}d[a]=b;eve("data.set."+this.id,this,b,a);return this};J.removeData=function(a){null==a?ca[this.id]={}:ca[this.id]&&delete ca[this.id][a];return this};J.hover=function(a,b,d,c){return this.mouseover(a,d).mouseout(b,c||d)};J.unhover=
function(a,b){return this.unmouseover(a).unmouseout(b)};var $=[];J.drag=function(a,b,d,c,e,h){function j(g){(g.originalEvent||g).preventDefault();var l=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,p=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft;this._drag.x=g.clientX+p;this._drag.y=g.clientY+l;this._drag.id=g.identifier;!Z.length&&f.mousemove(ra).mouseup(sa);Z.push({el:this,move_scope:c,start_scope:e,end_scope:h});b&&eve.on("drag.start."+this.id,b);a&&eve.on("drag.move."+this.id,
a);d&&eve.on("drag.end."+this.id,d);eve("drag.start."+this.id,e||c||this,g.clientX+p,g.clientY+l,g)}this._drag={};$.push({el:this,start:j});this.mousedown(j);return this};J.onDragOver=function(a){a?eve.on("drag.over."+this.id,a):eve.unbind("drag.over."+this.id)};J.undrag=function(){for(var a=$.length;a--;)$[a].el==this&&(this.unmousedown($[a].start),$.splice(a,1),eve.unbind("drag.*."+this.id));!$.length&&f.unmousemove(ra).unmouseup(sa)};D.circle=function(a,b,d){a=f._engine.circle(this,a||0,b||0,d||
0);this.__set__&&this.__set__.push(a);return a};D.rect=function(a,b,d,c,e){a=f._engine.rect(this,a||0,b||0,d||0,c||0,e||0);this.__set__&&this.__set__.push(a);return a};D.ellipse=function(a,b,d,c){a=f._engine.ellipse(this,a||0,b||0,d||0,c||0);this.__set__&&this.__set__.push(a);return a};D.path=function(a){a&&!f.is(a,"string")&&!f.is(a[0],v)&&(a+="");var b=f._engine.path(f.format[I](f,arguments),this);this.__set__&&this.__set__.push(b);return b};D.image=function(a,b,d,c,e){a=f._engine.image(this,a||
"about:blank",b||0,d||0,c||0,e||0);this.__set__&&this.__set__.push(a);return a};D.text=function(a,b,d){a=f._engine.text(this,a||0,b||0,G(d));this.__set__&&this.__set__.push(a);return a};D.set=function(a){!f.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new aa(a);this.__set__&&this.__set__.push(b);return b};D.setStart=function(a){this.__set__=a||this.set()};D.setFinish=function(){var a=this.__set__;delete this.__set__;return a};D.setSize=function(a,b){return f._engine.setSize.call(this,
a,b)};D.setViewBox=function(a,b,d,c,e){return f._engine.setViewBox.call(this,a,b,d,c,e)};D.top=D.bottom=null;D.raphael=f;D.getElementByPoint=function(a,b){var d,c,e=this.canvas,h=q.doc.elementFromPoint(a,b);if(q.win.opera&&"svg"==h.tagName){c=e.getBoundingClientRect();d=e.ownerDocument;var j=d.body,f=d.documentElement;d=c.top+(q.win.pageYOffset||f.scrollTop||j.scrollTop)-(f.clientTop||j.clientTop||0);c=c.left+(q.win.pageXOffset||f.scrollLeft||j.scrollLeft)-(f.clientLeft||j.clientLeft||0);j=e.createSVGRect();
j.x=a-c;j.y=b-d;j.width=j.height=1;d=e.getIntersectionList(j,null);d.length&&(h=d[d.length-1])}if(!h)return null;for(;h.parentNode&&h!=e.parentNode&&!h.raphael;)h=h.parentNode;h==this.canvas.parentNode&&(h=e);h=h&&h.raphael?this.getById(h.raphaelid):null;return h};D.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null};D.forEach=function(a,b){for(var d=this.bottom;d&&!(!1===a.call(b,d));)d=d.next;return this};J.getBBox=function(a){if(this.removed)return{};var b=this._;
if(a){if(b.dirty||!b.bboxwt)this.realPath=pa[this.type](this),b.bboxwt=Ga(this.realPath),b.bboxwt.toString=B,b.dirty=0;return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath)b.bboxwt=0,this.realPath=pa[this.type](this);b.bbox=Ga(Ca(this.realPath,this.matrix));b.bbox.toString=B;b.dirty=b.dirtyT=0}return b.bbox};J.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a};J.glow=function(a){if("text"==
this.type)return null;for(var a=a||{},b=(a.width||10)+(+this.attr("stroke-width")||1),d=a.fill||!1,c=a.opacity||0.5,e=a.offsetx||0,h=a.offsety||0,a=a.color||"#000",j=b/2,f=this.paper,g=f.set(),l=this.realPath||pa[this.type](this),l=this.matrix?Ca(l,this.matrix):l,p=1;p<j+1;p++)g.push(f.path(l).attr({stroke:a,fill:d?a:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b/j*p).toFixed(3),opacity:+(c/j).toFixed(3)}));return g.insertBefore(this).translate(e,h)};var ta={},ja=function(a,
b,d,c,e,h,j,g,p){var k=0,t=100,o=[a,b,d,c,e,h,j,g].join(),i=ta[o],y,v;!i&&(ta[o]=i={data:[]});i.timer&&clearTimeout(i.timer);i.timer=setTimeout(function(){delete ta[o]},2E3);if(null!=p&&!i.precision){var q=ja(a,b,d,c,e,h,j,g);i.precision=10*~~q;i.data=[]}t=i.precision||t;for(q=0;q<t+1;q++){i.data[q*t]?v=i.data[q*t]:(v=f.findDotsAtSegment(a,b,d,c,e,h,j,g,q/t),i.data[q*t]=v);q&&(k+=l(l(y.x-v.x,2)+l(y.y-v.y,2),0.5));if(null!=p&&k>=p)return v;y=v}if(null==p)return k},ua=function(a,b){return function(d,
c,e){for(var d=ba(d),h,j,g,l,p="",k={},t,o=0,i=0,y=d.length;i<y;i++){g=d[i];if("M"==g[0])h=+g[1],j=+g[2];else{l=ja(h,j,g[1],g[2],g[3],g[4],g[5],g[6]);if(o+l>c){if(b&&!k.start){t=ja(h,j,g[1],g[2],g[3],g[4],g[5],g[6],c-o);p+=["C"+t.start.x,t.start.y,t.m.x,t.m.y,t.x,t.y];if(e)return p;k.start=p;p=["M"+t.x,t.y+"C"+t.n.x,t.n.y,t.end.x,t.end.y,g[5],g[6]].join();o+=l;h=+g[5];j=+g[6];continue}if(!a&&!b)return t=ja(h,j,g[1],g[2],g[3],g[4],g[5],g[6],c-o),{x:t.x,y:t.y,alpha:t.alpha}}o+=l;h=+g[5];j=+g[6]}p+=
g.shift()+g}k.end=p;t=a?o:b?k:f.findDotsAtSegment(h,j,g[0],g[1],g[2],g[3],g[4],g[5],1);t.alpha&&(t={x:t.x,y:t.y,alpha:t.alpha});return t}},Ma=ua(1),Na=ua(),va=ua(0,1);f.getTotalLength=Ma;f.getPointAtLength=Na;f.getSubpath=function(a,b,d){if(1.0E-6>this.getTotalLength(a)-d)return va(a,b).end;a=va(a,d,1);return b?va(a,b).end:a};J.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():Ma(this.attrs.path)};J.getPointAtLength=function(a){if("path"==this.type)return Na(this.attrs.path,
a)};J.getSubpath=function(a,b){if("path"==this.type)return f.getSubpath(this.attrs.path,a,b)};var T=f.easing_formulas={linear:function(a){return a},"<":function(a){return l(a,1.7)},">":function(a){return l(a,0.48)},"<>":function(a){var b=0.48-a/1.04,c=d.sqrt(0.1734+b*b),a=c-b,a=l(t(a),1/3)*(0>a?-1:1),b=-c-b,b=l(t(b),1/3)*(0>b?-1:1),a=a+b+0.5;return 3*(1-a)*a*a+a*a*a},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){return a==
!!a?a:l(2,-10*a)*d.sin(2*(a-0.075)*o/0.3)+1},bounce:function(a){var b;a<1/2.75?b=7.5625*a*a:a<2/2.75?(a-=1.5/2.75,b=7.5625*a*a+0.75):a<2.5/2.75?(a-=2.25/2.75,b=7.5625*a*a+0.9375):(a-=2.625/2.75,b=7.5625*a*a+0.984375);return b}};T.easeIn=T["ease-in"]=T["<"];T.easeOut=T["ease-out"]=T[">"];T.easeInOut=T["ease-in-out"]=T["<>"];T["back-in"]=T.backIn;T["back-out"]=T.backOut;var K=[],ya=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||
window.msRequestAnimationFrame||function(a){setTimeout(a,16)},la=function(){for(var a=+new Date,b=0;b<K.length;b++){var d=K[b];if(!d.el.removed&&!d.paused){var c=a-d.start,h=d.ms,j=d.easing,g=d.from,l=d.diff,p=d.to,t=d.el,k={},o,i={},v;d.initstatus?(c=(d.initstatus*d.anim.top-d.prev)/(d.percent-d.prev)*h,d.status=d.initstatus,delete d.initstatus,d.stop&&K.splice(b--,1)):d.status=(d.prev+(d.percent-d.prev)*(c/h))/d.anim.top;if(!(0>c))if(c<h){var q=j(c/h),r;for(r in g)if(g[H](r)){switch(ka[r]){case y:o=
+g[r]+q*h*l[r];break;case "colour":o="rgb("+[wa(ma(g[r].r+q*h*l[r].r)),wa(ma(g[r].g+q*h*l[r].g)),wa(ma(g[r].b+q*h*l[r].b))].join()+")";break;case "path":o=[];c=0;for(j=g[r].length;c<j;c++){o[c]=[g[r][c][0]];p=1;for(i=g[r][c].length;p<i;p++)o[c][p]=+g[r][c][p]+q*h*l[r][c][p];o[c]=o[c].join(S)}o=o.join(S);break;case "transform":if(l[r].real){o=[];for(c=0,j=g[r].length;c<j;c++){o[c]=[g[r][c][0]];for(p=1,i=g[r][c].length;p<i;p++)o[c][p]=g[r][c][p]+q*h*l[r][c][p]}}else o=function(a){return+g[r][a]+q*h*
l[r][a]},o=[["m",o(0),o(1),o(2),o(3),o(4),o(5)]];break;case "csv":if("clip-rect"==r)for(o=[],c=4;c--;)o[c]=+g[r][c]+q*h*l[r][c];break;default:j=[][F](g[r]);for(o=[],c=t.paper.customAttributes[r].length;c--;)o[c]=+j[c]+q*h*l[r][c]}k[r]=o}t.attr(k);(function(a,b,d){setTimeout(function(){eve("anim.frame."+a,b,d)})})(t.id,t,d.anim)}else{(function(a,b,d){setTimeout(function(){eve("anim.frame."+b.id,b,d);eve("anim.finish."+b.id,b,d);f.is(a,"function")&&a.call(b)})})(d.callback,t,d.anim);t.attr(p);K.splice(b--,
1);if(1<d.repeat&&!d.next){for(v in p)p[H](v)&&(i[v]=d.totalOrigin[v]);d.el.attr(i);e(d.anim,d.el,d.anim.percents[0],null,d.totalOrigin,d.repeat-1)}d.next&&!d.stop&&e(d.anim,d.el,d.next,null,d.totalOrigin,d.repeat)}}}f.svg&&t&&t.paper&&t.paper.safari();K.length&&ya(la)},wa=function(a){return 255<a?255:0>a?0:a};J.animateWith=function(a,b,d,c,e,h){d=d?f.animation(d,c,e,h):b;a=a.status(b);return this.animate(d).status(d,a*b.ms/d.ms)};J.onAnimation=function(a){a?eve.on("anim.frame."+this.id,a):eve.unbind("anim.frame."+
this.id);return this};k.prototype.delay=function(a){var b=new k(this.anim,this.ms);b.times=this.times;b.del=+a||0;return b};k.prototype.repeat=function(a){var b=new k(this.anim,this.ms);b.del=this.del;b.times=d.floor(h(a,0))||1;return b};f.animation=function(a,b,d,c){if(a instanceof k)return a;if(f.is(d,"function")||!d)c=c||d||null,d=null;a=Object(a);b=+b||0;var e={},h,j;for(j in a)a[H](j)&&M(j)!=j&&M(j)+"%"!=j&&(h=!0,e[j]=a[j]);if(!h)return new k(a,b);d&&(e.easing=d);c&&(e.callback=c);return new k({100:e},
b)};J.animate=function(a,b,d,c){if(this.removed)return c&&c.call(this),this;a=a instanceof k?a:f.animation(a,b,d,c);e(a,this,a.percents[0],null,this.attr());return this};J.setTime=function(a,b){a&&null!=b&&this.status(a,j(b,a.ms)/a.ms);return this};J.status=function(a,b){var d=[],c=0,h,g;if(null!=b)return e(a,this,-1,j(b,1)),this;for(h=K.length;c<h;c++)if(g=K[c],g.el.id==this.id&&(!a||g.anim==a)){if(a)return g.status;d.push({anim:g.anim,status:g.status})}return a?0:d};J.pause=function(a){for(var b=
0;b<K.length;b++)K[b].el.id==this.id&&(!a||K[b].anim==a)&&!1!==eve("anim.pause."+this.id,this,K[b].anim)&&(K[b].paused=!0);return this};J.resume=function(a){for(var b=0;b<K.length;b++)if(K[b].el.id==this.id&&(!a||K[b].anim==a)){var d=K[b];!1!==eve("anim.resume."+this.id,this,d.anim)&&(delete d.paused,this.status(d.anim,d.status))}return this};J.stop=function(a){for(var b=0;b<K.length;b++)K[b].el.id==this.id&&(!a||K[b].anim==a)&&!1!==eve("anim.stop."+this.id,this,K[b].anim)&&K.splice(b--,1);return this};
J.toString=function(){return"Rapha\u00ebl\u2019s object"};var aa=function(a){this.items=[];this.length=0;this.type="set";if(a)for(var b=0,d=a.length;b<d;b++)a[b]&&(a[b].constructor==J.constructor||a[b].constructor==aa)&&(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},R=aa.prototype;R.push=function(){for(var a,b,d=0,c=arguments.length;d<c;d++)a=arguments[d],a&&(a.constructor==J.constructor||a.constructor==aa)&&(b=this.items.length,this[b]=this.items[b]=a,this.length++);
return this};R.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};R.forEach=function(a,b){for(var d=0,c=this.items.length;d<c&&!(!1===a.call(b,this.items[d],d));d++);return this};for(var xa in J)J[H](xa)&&(R[xa]=function(a){return function(){var b=arguments;return this.forEach(function(d){d[a][I](d,b)})}}(xa));R.attr=function(a,b){if(a&&f.is(a,v)&&f.is(a[0],"object"))for(var d=0,c=a.length;d<c;d++)this.items[d].attr(a[d]);else{d=0;for(c=this.items.length;d<c;d++)this.items[d].attr(a,
b)}return this};R.clear=function(){for(;this.length;)this.pop()};R.splice=function(a,b,d){a=0>a?h(this.length+a,0):a;b=h(0,j(this.length-a,b));var c=[],e=[],g=[],f;for(f=2;f<arguments.length;f++)g.push(arguments[f]);for(f=0;f<b;f++)e.push(this[a+f]);for(;f<this.length-a;f++)c.push(this[a+f]);var l=g.length;for(f=0;f<l+c.length;f++)this.items[a+f]=this[a+f]=f<l?g[f]:c[f-l];for(f=this.items.length=this.length-=b-l;this[f];)delete this[f++];return new aa(e)};R.exclude=function(a){for(var b=0,d=this.length;b<
d;b++)if(this[b]==a)return this.splice(b,1),!0};R.animate=function(a,b,d,c){(f.is(d,"function")||!d)&&(c=d||null);var e=this.items.length,h=e,j=this,g;if(!e)return this;c&&(g=function(){!--e&&c.call(j)});d=f.is(d,"string")?d:g;b=f.animation(a,b,d,g);for(a=this.items[--h].animate(b);h--;)this.items[h]&&!this.items[h].removed&&this.items[h].animateWith(a,b);return this};R.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this};R.getBBox=function(){for(var a=
[],b=[],d=[],c=[],e=this.items.length;e--;)if(!this.items[e].removed){var g=this.items[e].getBBox();a.push(g.x);b.push(g.y);d.push(g.x+g.width);c.push(g.y+g.height)}a=j[I](0,a);b=j[I](0,b);return{x:a,y:b,width:h[I](0,d)-a,height:h[I](0,c)-b}};R.clone=function(a){for(var a=new aa,b=0,d=this.items.length;b<d;b++)a.push(this.items[b].clone());return a};R.toString=function(){return"Rapha\u00ebl\u2018s set"};f.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},
glyphs:{}},d=a.face["font-family"],c;for(c in a.face)a.face[H](c)&&(b.face[c]=a.face[c]);this.fonts[d]?this.fonts[d].push(b):this.fonts[d]=[b];if(!a.svg){b.face["units-per-em"]=Y(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[H](e)&&(d=a.glyphs[e],b.glyphs[e]={w:d.w,k:{},d:d.d&&"M"+d.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},d.k))for(var h in d.k)d[H](h)&&(b.glyphs[e].k[h]=d.k[h])}return a};D.getFont=function(a,b,d,c){c=c||"normal";
d=d||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(f.fonts){var e=f.fonts[a];if(!e){var a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i"),h;for(h in f.fonts)if(f.fonts[H](h)&&a.test(h)){e=f.fonts[h];break}}var j;if(e){h=0;for(a=e.length;h<a&&!(j=e[h],j.face["font-weight"]==b&&(j.face["font-style"]==d||!j.face["font-style"])&&j.face["font-stretch"]==c);h++);}return j}};D.print=function(a,b,d,e,g,l,p){l=l||"middle";p=h(j(p||0,1),-1);var t=this.set(),k=G(d)[c](""),
o=0;f.is(e,d)&&(e=this.getFont(e));if(e){for(var d=(g||16)/e.face["units-per-em"],i=e.face.bbox[c](X),g=+i[0],l=+i[1]+("baseline"==l?i[3]-i[1]+ +e.face.descent:(i[3]-i[1])/2),i=0,y=k.length;i<y;i++){var v=i&&e.glyphs[k[i-1]]||{},q=e.glyphs[k[i]];o+=i?(v.w||e.w)+(v.k&&v.k[k[i]]||0)+e.w*p:0;q&&q.d&&t.push(this.path(q.d).attr({fill:"#000",stroke:"none",transform:[["t",o*d,0]]}))}t.transform(["...s",d,d,g,l,"t",(a-g)/d,(b-l)/d])}return t};D.add=function(a){if(f.is(a,"array"))for(var b=this.set(),d=0,
c=a.length,e;d<c;d++)e=a[d]||{},A[H](e.type)&&b.push(this[e.type]().attr(e));return b};f.format=function(a,b){var d=f.is(b,v)?[0][F](b):arguments;a&&f.is(a,"string")&&d.length-1&&(a=a.replace(i,function(a,b){return null==d[++b]?"":d[b]}));return a||""};f.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,d=function(a,d,c){var e=c;d.replace(b,function(a,b,d,c,h){b=b||c;e&&(b in e&&(e=e[b]),"function"==typeof e&&h&&(e=e()))});e=(null==e||e==c?a:e)+
"";return e};return function(b,c){return(""+b).replace(a,function(a,b){return d(a,b,c)})}}();f.ninja=function(){O?q.win.Raphael=V:delete Raphael;return f};f.st=R;(function(a,b,d){function c(){/in/.test(a.readyState)?setTimeout(c,9):f.eve("DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(b,d=function(){a.removeEventListener(b,d,!1);a.readyState="complete"},!1),a.readyState="loading");c()})(document,"DOMContentLoaded");O?q.win.Raphael=f:Raphael=f;eve.on("DOMload",function(){U=!0})})();
window.Raphael.svg&&function(e){var k=String,r=parseFloat,B=parseInt,w=Math,z=w.max,P=w.abs,C=w.pow,f=/[, ]+/,U=e.eve,X={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},A={};e.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var i=function(c,f){if(f){"string"==typeof c&&(c=i(c));for(var g in f)f.hasOwnProperty(g)&&("xlink:"==
g.substring(0,6)?c.setAttributeNS("http://www.w3.org/1999/xlink",g.substring(6),k(f[g])):c.setAttribute(g,k(f[g])))}else c=e._g.doc.createElementNS("http://www.w3.org/2000/svg",c),c.style&&(c.style.webkitTapHighlightColor="rgba(0,0,0,0)");return c},H=function(c,f){var g="linear",b=c.id+f,d=0.5,h=0.5,j=c.node,t=c.paper,l=j.style,o=e._g.doc.getElementById(b);if(!o){f=k(f).replace(e._radial_gradient,function(b,c,e){g="radial";c&&e&&(d=r(c),h=r(e),b=2*(0.5<h)-1,0.25<C(d-0.5,2)+C(h-0.5,2)&&(h=w.sqrt(0.25-
C(d-0.5,2))*b+0.5)&&0.5!=h&&(h=h.toFixed(5)-1.0E-5*b));return""});f=f.split(/\s*\-\s*/);if("linear"==g){var y=f.shift(),y=-r(y);if(isNaN(y))return null;var v=[0,0,w.cos(e.rad(y)),w.sin(e.rad(y))],y=1/(z(P(v[2]),P(v[3]))||1);v[2]*=y;v[3]*=y;0>v[2]&&(v[0]=-v[2],v[2]=0);0>v[3]&&(v[1]=-v[3],v[3]=0)}y=e._parseDots(f);if(!y)return null;b=b.replace(/[\(\)\s,\xb0#]/g,"_");c.gradient&&b!=c.gradient.id&&(t.defs.removeChild(c.gradient),delete c.gradient);if(!c.gradient){o=i(g+"Gradient",{id:b});c.gradient=o;
i(o,"radial"==g?{fx:d,fy:h}:{x1:v[0],y1:v[1],x2:v[2],y2:v[3],gradientTransform:c.matrix.invert()});t.defs.appendChild(o);t=0;for(v=y.length;t<v;t++)o.appendChild(i("stop",{offset:y[t].offset?y[t].offset:t?"100%":"0%","stop-color":y[t].color||"#fff"}))}}i(j,{fill:"url(#"+b+")",opacity:1,"fill-opacity":1});l.fill="";l.opacity=1;l.fillOpacity=1;return 1},q=function(c){var e=c.getBBox(1);i(c.pattern,{patternTransform:c.matrix.invert()+" translate("+e.x+","+e.y+")"})},O=function(c,f,g){if("path"==c.type){for(var b=
k(f).toLowerCase().split("-"),d=c.paper,h=g?"end":"start",j=c.node,t=c.attrs,l=t["stroke-width"],o=b.length,y="classic",v,q,r,B,w,z=3,C=3,D=5;o--;)switch(b[o]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":y=b[o];break;case "wide":C=5;break;case "narrow":C=2;break;case "long":z=5;break;case "short":z=2}"open"==y?(z+=2,C+=2,D+=2,r=1,B=g?4:1,w={fill:"none",stroke:t.stroke}):(B=r=z/2,w={fill:t.stroke,stroke:"none"});c._.arrows?g?(c._.arrows.endPath&&A[c._.arrows.endPath]--,
c._.arrows.endMarker&&A[c._.arrows.endMarker]--):(c._.arrows.startPath&&A[c._.arrows.startPath]--,c._.arrows.startMarker&&A[c._.arrows.startMarker]--):c._.arrows={};if("none"!=y){b="raphael-marker-"+y;o="raphael-marker-"+h+y+z+C;e._g.doc.getElementById(b)?A[b]++:(d.defs.appendChild(i(i("path"),{"stroke-linecap":"round",d:X[y],id:b})),A[b]=1);var F=e._g.doc.getElementById(o),G;F?(A[o]++,G=F.getElementsByTagName("use")[0]):(F=i(i("marker"),{id:o,markerHeight:C,markerWidth:z,orient:"auto",refX:B,refY:C/
2}),G=i(i("use"),{"xlink:href":"#"+b,transform:(g?" rotate(180 "+z/2+" "+C/2+") ":" ")+"scale("+z/D+","+C/D+")","stroke-width":1/((z/D+C/D)/2)}),F.appendChild(G),d.defs.appendChild(F),A[o]=1);i(G,w);d=r*("diamond"!=y&&"oval"!=y);g?(v=c._.arrows.startdx*l||0,q=e.getTotalLength(t.path)-d*l):(v=d*l,q=e.getTotalLength(t.path)-(c._.arrows.enddx*l||0));w={};w["marker-"+h]="url(#"+o+")";if(q||v)w.d=Raphael.getSubpath(t.path,v,q);i(j,w);c._.arrows[h+"Path"]=b;c._.arrows[h+"Marker"]=o;c._.arrows[h+"dx"]=d;
c._.arrows[h+"Type"]=y;c._.arrows[h+"String"]=f}else g?(v=c._.arrows.startdx*l||0,q=e.getTotalLength(t.path)-v):(v=0,q=e.getTotalLength(t.path)-(c._.arrows.enddx*l||0)),c._.arrows[h+"Path"]&&i(j,{d:Raphael.getSubpath(t.path,v,q)}),delete c._.arrows[h+"Path"],delete c._.arrows[h+"Marker"],delete c._.arrows[h+"dx"],delete c._.arrows[h+"Type"],delete c._.arrows[h+"String"];for(w in A)A.hasOwnProperty(w)&&!A[w]&&(c=e._g.doc.getElementById(w))&&c.parentNode.removeChild(c)}},V={"":[0],none:[0],"-":[3,1],
".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},L=function(c,e,g){if(e=V[k(e).toLowerCase()]){for(var b=c.attrs["stroke-width"]||"1",g={round:b,square:b,butt:0}[c.attrs["stroke-linecap"]||g["stroke-linecap"]]||0,d=[],h=e.length;h--;)d[h]=e[h]*b+(h%2?1:-1)*g;i(c.node,{"stroke-dasharray":d.join(",")})}},D=function(c,p){var g=c.node,b=c.attrs,d=g.style.visibility;g.style.visibility="hidden";for(var h in p)if(p.hasOwnProperty(h)&&
e._availableAttrs.hasOwnProperty(h)){var j=p[h];b[h]=j;switch(h){case "blur":c.blur(j);break;case "href":case "title":case "target":var t=g.parentNode;if("a"!=t.tagName.toLowerCase()){var l=i("a");t.insertBefore(l,g);l.appendChild(g);t=l}"target"==h&&"blank"==j?t.setAttributeNS("http://www.w3.org/1999/xlink","show","new"):t.setAttributeNS("http://www.w3.org/1999/xlink",h,j);break;case "cursor":g.style.cursor=j;break;case "transform":c.transform(j);break;case "arrow-start":O(c,j);break;case "arrow-end":O(c,
j,1);break;case "clip-rect":t=k(j).split(f);if(4==t.length){c.clip&&c.clip.parentNode.parentNode.removeChild(c.clip.parentNode);var l=i("clipPath"),o=i("rect");l.id=e.createUUID();i(o,{x:t[0],y:t[1],width:t[2],height:t[3]});l.appendChild(o);c.paper.defs.appendChild(l);i(g,{"clip-path":"url(#"+l.id+")"});c.clip=o}if(!j&&(j=g.getAttribute("clip-path")))j=e._g.doc.getElementById(j.replace(/(^url\(#|\)$)/g,"")),j&&j.parentNode.removeChild(j),i(g,{"clip-path":""}),delete c.clip;break;case "path":"path"==
c.type&&(i(g,{d:j?b.path=e._pathToAbsolute(j):"M0,0"}),c._.dirty=1,c._.arrows&&("startString"in c._.arrows&&O(c,c._.arrows.startString),"endString"in c._.arrows&&O(c,c._.arrows.endString,1)));break;case "width":if(g.setAttribute(h,j),c._.dirty=1,b.fx)h="x",j=b.x;else break;case "x":b.fx&&(j=-b.x-(b.width||0));case "rx":if("rx"==h&&"rect"==c.type)break;case "cx":g.setAttribute(h,j);c.pattern&&q(c);c._.dirty=1;break;case "height":if(g.setAttribute(h,j),c._.dirty=1,b.fy)h="y",j=b.y;else break;case "y":b.fy&&
(j=-b.y-(b.height||0));case "ry":if("ry"==h&&"rect"==c.type)break;case "cy":g.setAttribute(h,j);c.pattern&&q(c);c._.dirty=1;break;case "r":"rect"==c.type?i(g,{rx:j,ry:j}):g.setAttribute(h,j);c._.dirty=1;break;case "src":"image"==c.type&&g.setAttributeNS("http://www.w3.org/1999/xlink","href",j);break;case "stroke-width":if(1!=c._.sx||1!=c._.sy)j/=z(P(c._.sx),P(c._.sy))||1;c.paper._vbSize&&(j*=c.paper._vbSize);g.setAttribute(h,j);b["stroke-dasharray"]&&L(c,b["stroke-dasharray"],p);c._.arrows&&("startString"in
c._.arrows&&O(c,c._.arrows.startString),"endString"in c._.arrows&&O(c,c._.arrows.endString,1));break;case "stroke-dasharray":L(c,j,p);break;case "fill":var y=k(j).match(e._ISURL);if(y){var l=i("pattern"),v=i("image");l.id=e.createUUID();i(l,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});i(v,{x:0,y:0,"xlink:href":y[1]});l.appendChild(v);(function(b){e._preload(y[1],function(){var d=this.offsetWidth,e=this.offsetHeight;i(b,{width:d,height:e});i(v,{width:d,height:e});c.paper.safari()})})(l);
c.paper.defs.appendChild(l);g.style.fill="url(#"+l.id+")";i(g,{fill:"url(#"+l.id+")"});c.pattern=l;c.pattern&&q(c);break}var r=e.getRGB(j);if(r.error){if(("circle"==c.type||"ellipse"==c.type||"r"!=k(j).charAt())&&H(c,j)){if("opacity"in b||"fill-opacity"in b){var w=e._g.doc.getElementById(g.getAttribute("fill").replace(/^url\(#|\)$/g,""));if(w){var A=w.getElementsByTagName("stop");i(A[A.length-1],{"stop-opacity":("opacity"in b?b.opacity:1)*("fill-opacity"in b?b["fill-opacity"]:1)})}}b.gradient=j;b.fill=
"none";break}}else delete p.gradient,delete b.gradient,!e.is(b.opacity,"undefined")&&e.is(p.opacity,"undefined")&&i(g,{opacity:b.opacity}),!e.is(b["fill-opacity"],"undefined")&&e.is(p["fill-opacity"],"undefined")&&i(g,{"fill-opacity":b["fill-opacity"]});r.hasOwnProperty("opacity")&&i(g,{"fill-opacity":1<r.opacity?r.opacity/100:r.opacity});case "stroke":r=e.getRGB(j);g.setAttribute(h,r.hex);"stroke"==h&&r.hasOwnProperty("opacity")&&i(g,{"stroke-opacity":1<r.opacity?r.opacity/100:r.opacity});"stroke"==
h&&c._.arrows&&("startString"in c._.arrows&&O(c,c._.arrows.startString),"endString"in c._.arrows&&O(c,c._.arrows.endString,1));break;case "gradient":("circle"==c.type||"ellipse"==c.type||"r"!=k(j).charAt())&&H(c,j);break;case "opacity":b.gradient&&!b.hasOwnProperty("stroke-opacity")&&i(g,{"stroke-opacity":1<j?j/100:j});case "fill-opacity":if(b.gradient){w=e._g.doc.getElementById(g.getAttribute("fill").replace(/^url\(#|\)$/g,""));w&&(A=w.getElementsByTagName("stop"),i(A[A.length-1],{"stop-opacity":j}));
break}default:"font-size"==h&&(j=B(j,10)+"px"),t=h.replace(/(\-.)/g,function(b){return b.substring(1).toUpperCase()}),g.style[t]=j,c._.dirty=1,g.setAttribute(h,j)}}I(c,p);g.style.visibility=d},I=function(c,f){if("text"==c.type&&(f.hasOwnProperty("text")||f.hasOwnProperty("font")||f.hasOwnProperty("font-size")||f.hasOwnProperty("x")||f.hasOwnProperty("y"))){var g=c.attrs,b=c.node,d=b.firstChild?B(e._g.doc.defaultView.getComputedStyle(b.firstChild,"").getPropertyValue("font-size"),10):10;if(f.hasOwnProperty("text")){for(g.text=
f.text;b.firstChild;)b.removeChild(b.firstChild);for(var h=k(f.text).split("\n"),j=[],t,l=0,o=h.length;l<o;l++)t=i("tspan"),l&&i(t,{dy:1.2*d,x:g.x}),t.appendChild(e._g.doc.createTextNode(h[l])),b.appendChild(t),j[l]=t}else{j=b.getElementsByTagName("tspan");for(l=0,o=j.length;l<o;l++)l?i(j[l],{dy:1.2*d,x:g.x}):i(j[0],{dy:0})}i(b,{x:g.x,y:g.y});c._.dirty=1;b=c._getBBox();(g=g.y-(b.y+b.height/2))&&e.is(g,"finite")&&i(j[0],{dy:g})}},F=function(c,f){this[0]=this.node=c;c.raphael=!0;this.id=e._oid++;c.raphaelid=
this.id;this.matrix=e.matrix();this.realPath=null;this.paper=f;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!f.bottom&&(f.bottom=this);this.prev=f.top;f.top&&(f.top.next=this);f.top=this;this.next=null},N=e.el;F.prototype=N;N.constructor=F;e._engine.path=function(c,e){var g=i("path");e.canvas&&e.canvas.appendChild(g);g=new F(g,e);g.type="path";D(g,{fill:"none",stroke:"#000",path:c});return g};N.rotate=function(c,e,g){if(this.removed)return this;c=k(c).split(f);
c.length-1&&(e=r(c[1]),g=r(c[2]));c=r(c[0]);null==g&&(e=g);if(null==e||null==g)g=this.getBBox(1),e=g.x+g.width/2,g=g.y+g.height/2;this.transform(this._.transform.concat([["r",c,e,g]]));return this};N.scale=function(c,e,g,b){if(this.removed)return this;c=k(c).split(f);c.length-1&&(e=r(c[1]),g=r(c[2]),b=r(c[3]));c=r(c[0]);null==e&&(e=c);null==b&&(g=b);if(null==g||null==b)var d=this.getBBox(1);g=null==g?d.x+d.width/2:g;b=null==b?d.y+d.height/2:b;this.transform(this._.transform.concat([["s",c,e,g,b]]));
return this};N.translate=function(c,e){if(this.removed)return this;c=k(c).split(f);c.length-1&&(e=r(c[1]));c=r(c[0])||0;e=+e||0;this.transform(this._.transform.concat([["t",c,e]]));return this};N.transform=function(c){var f=this._;if(null==c)return f.transform;e._extractTransform(this,c);this.clip&&i(this.clip,{transform:this.matrix.invert()});this.pattern&&q(this);this.node&&i(this.node,{transform:this.matrix});if(1!=f.sx||1!=f.sy)this.attr({"stroke-width":this.attrs.hasOwnProperty("stroke-width")?
this.attrs["stroke-width"]:1});return this};N.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};N.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};N.remove=function(){if(!this.removed){var c=this.paper;c.__set__&&c.__set__.exclude(this);U.unbind("*.*."+this.id);this.gradient&&c.defs.removeChild(this.gradient);e._tear(this,c);this.node.parentNode.removeChild(this.node);for(var f in this)this[f]="function"==typeof this[f]?
e._removedFactory(f):null;this.removed=!0}};N._getBBox=function(){if("none"==this.node.style.display){this.show();var c=!0}var e={};try{e=this.node.getBBox()}catch(g){}finally{e=e||{}}c&&this.hide();return e};N.attr=function(c,k){if(this.removed)return this;if(null==c){var g={},b;for(b in this.attrs)this.attrs.hasOwnProperty(b)&&(g[b]=this.attrs[b]);g.gradient&&"none"==g.fill&&(g.fill=g.gradient)&&delete g.gradient;g.transform=this._.transform;return g}if(null==k&&e.is(c,"string")){if("fill"==c&&
"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==c)return this._.transform;b=c.split(f);for(var g={},d=0,h=b.length;d<h;d++)c=b[d],c in this.attrs?g[c]=this.attrs[c]:e.is(this.paper.customAttributes[c],"function")?g[c]=this.paper.customAttributes[c].def:g[c]=e._availableAttrs[c];return h-1?g:g[b[0]]}if(null==k&&e.is(c,"array")){g={};for(d=0,h=c.length;d<h;d++)g[c[d]]=this.attr(c[d]);return g}null!=k?(g={},g[c]=k):null!=c&&e.is(c,"object")&&(g=c);for(d in g)U("attr."+
d+"."+this.id,this,g[d]);for(d in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(d)&&g.hasOwnProperty(d)&&e.is(this.paper.customAttributes[d],"function"))for(h in b=this.paper.customAttributes[d].apply(this,[].concat(g[d])),this.attrs[d]=g[d],b)b.hasOwnProperty(h)&&(g[h]=b[h]);D(this,g);return this};N.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);
var c=this.paper;c.top!=this&&e._tofront(this,c);return this};N.toBack=function(){if(this.removed)return this;var c=this.node.parentNode;"a"==c.tagName.toLowerCase()?c.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):c.firstChild!=this.node&&c.insertBefore(this.node,this.node.parentNode.firstChild);e._toback(this,this.paper);return this};N.insertAfter=function(c){if(this.removed)return this;var f=c.node||c[c.length-1].node;f.nextSibling?f.parentNode.insertBefore(this.node,
f.nextSibling):f.parentNode.appendChild(this.node);e._insertafter(this,c,this.paper);return this};N.insertBefore=function(c){if(this.removed)return this;var f=c.node||c[0].node;f.parentNode.insertBefore(this.node,f);e._insertbefore(this,c,this.paper);return this};N.blur=function(c){if(0!==+c){var f=i("filter"),g=i("feGaussianBlur");this.attrs.blur=c;f.id=e.createUUID();i(g,{stdDeviation:+c||1.5});f.appendChild(g);this.paper.defs.appendChild(f);this._blur=f;i(this.node,{filter:"url(#"+f.id+")"})}else this._blur&&
(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};e._engine.circle=function(c,e,f,b){var d=i("circle");c.canvas&&c.canvas.appendChild(d);c=new F(d,c);c.attrs={cx:e,cy:f,r:b,fill:"none",stroke:"#000"};c.type="circle";i(d,c.attrs);return c};e._engine.rect=function(c,e,f,b,d,h){var j=i("rect");c.canvas&&c.canvas.appendChild(j);c=new F(j,c);c.attrs={x:e,y:f,width:b,height:d,r:h||0,rx:h||0,ry:h||0,fill:"none",stroke:"#000"};c.type=
"rect";i(j,c.attrs);return c};e._engine.ellipse=function(c,e,f,b,d){var h=i("ellipse");c.canvas&&c.canvas.appendChild(h);c=new F(h,c);c.attrs={cx:e,cy:f,rx:b,ry:d,fill:"none",stroke:"#000"};c.type="ellipse";i(h,c.attrs);return c};e._engine.image=function(c,e,f,b,d,h){var j=i("image");i(j,{x:f,y:b,width:d,height:h,preserveAspectRatio:"none"});j.setAttributeNS("http://www.w3.org/1999/xlink","href",e);c.canvas&&c.canvas.appendChild(j);c=new F(j,c);c.attrs={x:f,y:b,width:d,height:h,src:e};c.type="image";
return c};e._engine.text=function(c,f,g,b){var d=i("text");c.canvas&&c.canvas.appendChild(d);c=new F(d,c);c.attrs={x:f,y:g,"text-anchor":"middle",text:b,font:e._availableAttrs.font,stroke:"none",fill:"#000"};c.type="text";D(c,c.attrs);return c};e._engine.setSize=function(c,e){this.width=c||this.width;this.height=e||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this};e._engine.create=
function(){var c=e._getContainer.apply(0,arguments),f=c&&c.container,g=c.x,b=c.y,d=c.width,c=c.height;if(!f)throw Error("SVG container not found.");var h=i("svg"),j;g=g||0;b=b||0;d=d||512;c=c||342;i(h,{height:c,version:1.1,width:d,xmlns:"http://www.w3.org/2000/svg"});1==f?(h.style.cssText="overflow:hidden;position:absolute;left:"+g+"px;top:"+b+"px",e._g.doc.body.appendChild(h),j=1):(h.style.cssText="overflow:hidden;position:relative",f.firstChild?f.insertBefore(h,f.firstChild):f.appendChild(h));f=
new e._Paper;f.width=d;f.height=c;f.canvas=h;f.clear();f._left=f._top=0;j&&(f.renderfix=function(){});f.renderfix();return f};e._engine.setViewBox=function(c,e,f,b,d){U("setViewBox",this,this._viewBox,[c,e,f,b,d]);var h=z(f/this.width,b/this.height),j=this.top,t,l;for(null==c?(this._vbSize&&(h=1),delete this._vbSize,t="0 0 "+this.width+" "+this.height):(this._vbSize=h,t=c+" "+e+" "+f+" "+b),i(this.canvas,{viewBox:t,preserveAspectRatio:d?"meet":"xMinYMin"});h&&j;)l="stroke-width"in j.attrs?j.attrs["stroke-width"]:
1,j.attr({"stroke-width":l}),j._.dirty=1,j._.dirtyT=1,j=j.prev;this._viewBox=[c,e,f,b,!!d];return this};e.prototype.renderfix=function(){var c=this.canvas,e=c.style,f=c.getScreenCTM()||c.createSVGMatrix(),c=-f.e%1,f=-f.f%1;if(c||f)c&&(this._left=(this._left+c)%1,e.left=this._left+"px"),f&&(this._top=(this._top+f)%1,e.top=this._top+"px")};e.prototype.clear=function(){e.eve("clear",this);for(var c=this.canvas;c.firstChild;)c.removeChild(c.firstChild);this.bottom=this.top=null;(this.desc=i("desc")).appendChild(e._g.doc.createTextNode("Created with Rapha\u00ebl "+
e.version));c.appendChild(this.desc);c.appendChild(this.defs=i("defs"))};e.prototype.remove=function(){U("remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var c in this)this[c]="function"==typeof this[c]?e._removedFactory(c):null};var S=e.st,G;for(G in N)N.hasOwnProperty(G)&&!S.hasOwnProperty(G)&&(S[G]=function(c){return function(){var e=arguments;return this.forEach(function(f){f[c].apply(f,e)})}}(G))}(window.Raphael);
window.Raphael.vml&&function(e){var k=String,r=parseFloat,B=Math,w=B.round,z=B.max,P=B.min,C=B.abs,f=/[, ]+/,U=e.eve,X={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},A=/([clmz]),?([^clmz]*)/gi,i=/ progid:\S+Blur\([^\)]+\)/g,H=/-?[^,\s-]+/g,q={path:1,rect:1,image:1},O={circle:1,ellipse:1},V=function(b){var d=/[ahqstv]/ig,c=e._pathToAbsolute;k(b).match(d)&&(c=e._path2curve);d=/[clmz]/g;if(c==e._pathToAbsolute&&!k(b).match(d))return b=k(b).replace(A,function(b,d,c){var e=[],h="m"==d.toLowerCase(),
f=X[d];c.replace(H,function(b){h&&2==e.length&&(f+=e+X["m"==d?"l":"L"],e=[]);e.push(w(21600*b))});return f+e});for(var d=c(b),f,b=[],g=0,l=d.length;g<l;g++){c=d[g];f=d[g][0].toLowerCase();"z"==f&&(f="x");for(var o=1,i=c.length;o<i;o++)f+=w(21600*c[o])+(o!=i-1?",":"");b.push(f)}return b.join(" ")},L=function(b,d,c){var f=e.matrix();f.rotate(-b,0.5,0.5);return{dx:f.x(d,c),dy:f.y(d,c)}},D=function(b,d,c,e,f,g){var k=b._,i=b.matrix,p=k.fillpos,b=b.node,q=b.style,r=1,w="",A=21600/d,B=21600/c;q.visibility=
"hidden";if(d&&c){b.coordsize=C(A)+" "+C(B);q.rotation=g*(0>d*c?-1:1);if(g){var z=L(g,e,f);e=z.dx;f=z.dy}0>d&&(w+="x");0>c&&(w+=" y")&&(r=-1);q.flip=w;b.coordorigin=e*-A+" "+f*-B;if(p||k.fillsize)e=b.getElementsByTagName("fill"),e=e&&e[0],b.removeChild(e),p&&(z=L(g,i.x(p[0],p[1]),i.y(p[0],p[1])),e.position=z.dx*r+" "+z.dy*r),k.fillsize&&(e.size=k.fillsize[0]*C(d)+" "+k.fillsize[1]*C(c)),b.appendChild(e);q.visibility="visible"}};e.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+
this.version};var I=function(b,d,c){for(var d=k(d).toLowerCase().split("-"),c=c?"end":"start",e=d.length,f="classic",g="medium",o="medium";e--;)switch(d[e]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":f=d[e];break;case "wide":case "narrow":o=d[e];break;case "long":case "short":g=d[e]}b=b.node.getElementsByTagName("stroke")[0];b[c+"arrow"]=f;b[c+"arrowlength"]=g;b[c+"arrowwidth"]=o},F=function(b,d){b.attrs=b.attrs||{};var h=b.node,j=b.attrs,g=h.style,l=q[b.type]&&
(d.x!=j.x||d.y!=j.y||d.width!=j.width||d.height!=j.height||d.cx!=j.cx||d.cy!=j.cy||d.rx!=j.rx||d.ry!=j.ry||d.r!=j.r),o=O[b.type]&&(j.cx!=d.cx||j.cy!=d.cy||j.r!=d.r||j.rx!=d.rx||j.ry!=d.ry),i;for(i in d)d.hasOwnProperty(i)&&(j[i]=d[i]);l&&(j.path=e._getPath[b.type](b),b._.dirty=1);d.href&&(h.href=d.href);d.title&&(h.title=d.title);d.target&&(h.target=d.target);d.cursor&&(g.cursor=d.cursor);"blur"in d&&b.blur(d.blur);if(d.path&&"path"==b.type||l)h.path=V(~k(j.path).toLowerCase().indexOf("r")?e._pathToAbsolute(j.path):
j.path),"image"==b.type&&(b._.fillpos=[j.x,j.y],b._.fillsize=[j.width,j.height],D(b,1,1,0,0,0));"transform"in d&&b.transform(d.transform);if(o){l=+j.cx;o=+j.cy;i=+j.rx||+j.r||0;var p=+j.ry||+j.r||0;h.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",w(21600*(l-i)),w(21600*(o-p)),w(21600*(l+i)),w(21600*(o+p)),w(21600*l))}if("clip-rect"in d){l=k(d["clip-rect"]).split(f);if(4==l.length)l[2]=+l[2]+ +l[0],l[3]=+l[3]+ +l[1],o=h.clipRect||e._g.doc.createElement("div"),i=o.style,i.clip=e.format("rect({1}px {2}px {3}px {0}px)",
l),h.clipRect||(i.position="absolute",i.top=0,i.left=0,i.width=b.paper.width+"px",i.height=b.paper.height+"px",h.parentNode.insertBefore(o,h),o.appendChild(h),h.clipRect=o);d["clip-rect"]||h.clipRect&&(h.clipRect.style.clip="auto")}if(b.textpath)l=b.textpath.style,d.font&&(l.font=d.font),d["font-family"]&&(l.fontFamily='"'+d["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"'),d["font-size"]&&(l.fontSize=d["font-size"]),d["font-weight"]&&(l.fontWeight=d["font-weight"]),d["font-style"]&&
(l.fontStyle=d["font-style"]);"arrow-start"in d&&I(b,d["arrow-start"]);"arrow-end"in d&&I(b,d["arrow-end"],1);if(null!=d.opacity||null!=d["stroke-width"]||null!=d.fill||null!=d.src||null!=d.stroke||null!=d["stroke-width"]||null!=d["stroke-opacity"]||null!=d["fill-opacity"]||null!=d["stroke-dasharray"]||null!=d["stroke-miterlimit"]||null!=d["stroke-linejoin"]||null!=d["stroke-linecap"]){l=h.getElementsByTagName("fill");l=l&&l[0];!l&&(l=c("fill"));"image"==b.type&&d.src&&(l.src=d.src);d.fill&&(l.on=
!0);if(null==l.on||"none"==d.fill||null===d.fill)l.on=!1;if(l.on&&d.fill)(o=k(d.fill).match(e._ISURL))?(l.parentNode==h&&h.removeChild(l),l.rotate=!0,l.src=o[1],l.type="tile",i=b.getBBox(1),l.position=i.x+" "+i.y,b._.fillpos=[i.x,i.y],e._preload(o[1],function(){b._.fillsize=[this.offsetWidth,this.offsetHeight]})):(l.color=e.getRGB(d.fill).hex,l.src="",l.type="solid",e.getRGB(d.fill).error&&(b.type in{circle:1,ellipse:1}||"r"!=k(d.fill).charAt())&&N(b,d.fill,l)&&(j.fill="none",j.gradient=d.fill,l.rotate=
!1));if("fill-opacity"in d||"opacity"in d)i=((+j["fill-opacity"]+1||2)-1)*((+j.opacity+1||2)-1)*((+e.getRGB(d.fill).o+1||2)-1),i=P(z(i,0),1),l.opacity=i,l.src&&(l.color="none");h.appendChild(l);l=h.getElementsByTagName("stroke")&&h.getElementsByTagName("stroke")[0];o=!1;!l&&(o=l=c("stroke"));if(d.stroke&&"none"!=d.stroke||d["stroke-width"]||null!=d["stroke-opacity"]||d["stroke-dasharray"]||d["stroke-miterlimit"]||d["stroke-linejoin"]||d["stroke-linecap"])l.on=!0;("none"==d.stroke||null===d.stroke||
null==l.on||0==d.stroke||0==d["stroke-width"])&&(l.on=!1);i=e.getRGB(d.stroke);l.on&&d.stroke&&(l.color=i.hex);i=((+j["stroke-opacity"]+1||2)-1)*((+j.opacity+1||2)-1)*((+i.o+1||2)-1);p=0.75*(r(d["stroke-width"])||1);i=P(z(i,0),1);null==d["stroke-width"]&&(p=j["stroke-width"]);d["stroke-width"]&&(l.weight=p);p&&1>p&&(i*=p)&&(l.weight=1);l.opacity=i;d["stroke-linejoin"]&&(l.joinstyle=d["stroke-linejoin"]||"miter");l.miterlimit=d["stroke-miterlimit"]||8;d["stroke-linecap"]&&(l.endcap="butt"==d["stroke-linecap"]?
"flat":"square"==d["stroke-linecap"]?"square":"round");if(d["stroke-dasharray"])i={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},l.dashstyle=i.hasOwnProperty(d["stroke-dasharray"])?i[d["stroke-dasharray"]]:"";o&&h.appendChild(l)}if("text"==b.type){b.paper.canvas.style.display="";h=b.paper.span;l=j.font&&j.font.match(/\d+(?:\.\d*)?(?=px)/);g=h.style;j.font&&(g.font=j.font);
j["font-family"]&&(g.fontFamily=j["font-family"]);j["font-weight"]&&(g.fontWeight=j["font-weight"]);j["font-style"]&&(g.fontStyle=j["font-style"]);l=r(j["font-size"]||l&&l[0])||10;g.fontSize=100*l+"px";b.textpath.string&&(h.innerHTML=k(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));g=h.getBoundingClientRect();b.W=j.w=(g.right-g.left)/100;b.H=j.h=(g.bottom-g.top)/100;b.X=j.x;b.Y=j.y+b.H/2;("x"in d||"y"in d)&&(b.path.v=e.format("m{0},{1}l{2},{1}",w(21600*j.x),
w(21600*j.y),w(21600*j.x)+1));g="x,y,text,font,font-family,font-weight,font-style,font-size".split(",");h=0;for(l=g.length;h<l;h++)if(g[h]in d){b._.dirty=1;break}switch(j["text-anchor"]){case "start":b.textpath.style["v-text-align"]="left";b.bbx=b.W/2;break;case "end":b.textpath.style["v-text-align"]="right";b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},N=function(b,d,c){b.attrs=b.attrs||{};var f=Math.pow,g="linear",l=".5 .5";b.attrs.gradient=
d;d=k(d).replace(e._radial_gradient,function(b,d,c){g="radial";d&&c&&(d=r(d),c=r(c),0.25<f(d-0.5,2)+f(c-0.5,2)&&(c=B.sqrt(0.25-f(d-0.5,2))*(2*(0.5<c)-1)+0.5),l=d+" "+c);return""});d=d.split(/\s*\-\s*/);if("linear"==g){var i=d.shift(),i=-r(i);if(isNaN(i))return null}d=e._parseDots(d);if(!d)return null;b=b.shape||b.node;if(d.length){b.removeChild(c);c.on=!0;c.method="none";c.color=d[0].color;c.color2=d[d.length-1].color;for(var p=[],q=0,w=d.length;q<w;q++)d[q].offset&&p.push(d[q].offset+" "+d[q].color);
c.colors=p.length?p.join():"0% "+c.color;"radial"==g?(c.type="gradientTitle",c.focus="100%",c.focussize="0 0",c.focusposition=l,c.angle=0):(c.type="gradient",c.angle=(270-i)%360);b.appendChild(c)}return 1},S=function(b,d){this[0]=this.node=b;b.raphael=!0;this.id=e._oid++;b.raphaelid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=d;this.matrix=e.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!d.bottom&&(d.bottom=this);this.prev=d.top;d.top&&(d.top.next=this);d.top=this;
this.next=null},G=e.el;S.prototype=G;G.constructor=S;G.transform=function(b){if(null==b)return this._.transform;var d=this.paper._viewBoxShift,c=d?"s"+[d.scale,d.scale]+"-1-1t"+[d.dx,d.dy]:"",f;d&&(f=b=k(b).replace(/\.{3}|\u2026/g,this._.transform||""));e._extractTransform(this,c+b);var d=this.matrix.clone(),g=this.skew,b=this.node,c=~k(this.attrs.fill).indexOf("-"),l=!k(this.attrs.fill).indexOf("url(");d.translate(-0.5,-0.5);l||c||"image"==this.type?(g.matrix="1 0 0 1",g.offset="0 0",g=d.split(),
c&&g.noRotation||!g.isSimple?(b.style.filter=d.toFilter(),c=this.getBBox(),g=this.getBBox(1),d=c.x-g.x,c=c.y-g.y,b.coordorigin=-21600*d+" "+-21600*c,D(this,1,1,d,c,0)):(b.style.filter="",D(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate))):(b.style.filter="",g.matrix=k(d),g.offset=d.offset());f&&(this._.transform=f);return this};G.rotate=function(b,d,c){if(this.removed)return this;if(null!=b){b=k(b).split(f);b.length-1&&(d=r(b[1]),c=r(b[2]));b=r(b[0]);null==c&&(d=c);if(null==d||null==c)c=this.getBBox(1),
d=c.x+c.width/2,c=c.y+c.height/2;this._.dirtyT=1;this.transform(this._.transform.concat([["r",b,d,c]]));return this}};G.translate=function(b,d){if(this.removed)return this;b=k(b).split(f);b.length-1&&(d=r(b[1]));b=r(b[0])||0;d=+d||0;this._.bbox&&(this._.bbox.x+=b,this._.bbox.y+=d);this.transform(this._.transform.concat([["t",b,d]]));return this};G.scale=function(b,d,c,e){if(this.removed)return this;b=k(b).split(f);b.length-1&&(d=r(b[1]),c=r(b[2]),e=r(b[3]),isNaN(c)&&(c=null),isNaN(e)&&(e=null));b=
r(b[0]);null==d&&(d=b);null==e&&(c=e);if(null==c||null==e)var g=this.getBBox(1);c=null==c?g.x+g.width/2:c;e=null==e?g.y+g.height/2:e;this.transform(this._.transform.concat([["s",b,d,c,e]]));this._.dirtyT=1;return this};G.hide=function(){!this.removed&&(this.node.style.display="none");return this};G.show=function(){!this.removed&&(this.node.style.display="");return this};G._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};G.remove=
function(){if(!this.removed){this.paper.__set__&&this.paper.__set__.exclude(this);e.eve.unbind("*.*."+this.id);e._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]="function"==typeof this[b]?e._removedFactory(b):null;this.removed=!0}};G.attr=function(b,d){if(this.removed)return this;if(null==b){var c={},g;for(g in this.attrs)this.attrs.hasOwnProperty(g)&&(c[g]=this.attrs[g]);c.gradient&&"none"==c.fill&&
(c.fill=c.gradient)&&delete c.gradient;c.transform=this._.transform;return c}if(null==d&&e.is(b,"string")){if("fill"==b&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;g=b.split(f);for(var c={},i=0,l=g.length;i<l;i++)b=g[i],b in this.attrs?c[b]=this.attrs[b]:e.is(this.paper.customAttributes[b],"function")?c[b]=this.paper.customAttributes[b].def:c[b]=e._availableAttrs[b];return l-1?c:c[g[0]]}if(this.attrs&&null==d&&e.is(b,"array")){c={};for(i=0,l=b.length;i<l;i++)c[b[i]]=this.attr(b[i]);
return c}null!=d&&(c={},c[b]=d);null==d&&e.is(b,"object")&&(c=b);for(i in c)U("attr."+i+"."+this.id,this,c[i]);if(c){for(i in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(i)&&c.hasOwnProperty(i)&&e.is(this.paper.customAttributes[i],"function"))for(l in g=this.paper.customAttributes[i].apply(this,[].concat(c[i])),this.attrs[i]=c[i],g)g.hasOwnProperty(l)&&(c[l]=g[l]);c.text&&"text"==this.type&&(this.textpath.string=c.text);F(this,c)}return this};G.toFront=function(){!this.removed&&
this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&e._tofront(this,this.paper);return this};G.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper));return this};G.insertAfter=function(b){if(this.removed)return this;b.constructor==e.st.constructor&&(b=b[b.length-1]);b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):
b.node.parentNode.appendChild(this.node);e._insertafter(this,b,this.paper);return this};G.insertBefore=function(b){if(this.removed)return this;b.constructor==e.st.constructor&&(b=b[0]);b.node.parentNode.insertBefore(this.node,b.node);e._insertbefore(this,b,this.paper);return this};G.blur=function(b){var d=this.node.runtimeStyle,c=d.filter;c=c.replace(i,"");0!==+b?(this.attrs.blur=b,d.filter=c+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+b||1.5)+")",d.margin=e.format("-{0}px 0 0 -{0}px",
w(+b||1.5))):(d.filter=c,d.margin=0,delete this.attrs.blur)};e._engine.path=function(b,d){var e=c("shape");e.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";e.coordsize="21600 21600";e.coordorigin=d.coordorigin;var f=new S(e,d),g={fill:"none",stroke:"#000"};b&&(g.path=b);f.type="path";f.path=[];f.Path="";F(f,g);d.canvas.appendChild(e);g=c("skew");g.on=!0;e.appendChild(g);f.skew=g;f.transform("");return f};e._engine.rect=function(b,d,c,f,g,l){var i=e._rectPath(d,c,f,g,l),b=b.path(i),
k=b.attrs;b.X=k.x=d;b.Y=k.y=c;b.W=k.width=f;b.H=k.height=g;k.r=l;k.path=i;b.type="rect";return b};e._engine.ellipse=function(b,d,c,e,f){b=b.path();b.X=d-e;b.Y=c-f;b.W=2*e;b.H=2*f;b.type="ellipse";F(b,{cx:d,cy:c,rx:e,ry:f});return b};e._engine.circle=function(b,d,c,e){b=b.path();b.X=d-e;b.Y=c-e;b.W=b.H=2*e;b.type="circle";F(b,{cx:d,cy:c,r:e});return b};e._engine.image=function(b,d,c,f,g,l){var i=e._rectPath(c,f,g,l),b=b.path(i).attr({stroke:"none"}),k=b.attrs,p=b.node,q=p.getElementsByTagName("fill")[0];
k.src=d;b.X=k.x=c;b.Y=k.y=f;b.W=k.width=g;b.H=k.height=l;k.path=i;b.type="image";q.parentNode==p&&p.removeChild(q);q.rotate=!0;q.src=d;q.type="tile";b._.fillpos=[c,f];b._.fillsize=[g,l];p.appendChild(q);D(b,1,1,0,0,0);return b};e._engine.text=function(b,d,f,g){var i=c("shape"),l=c("path"),o=c("textpath");d=d||0;f=f||0;g=g||"";l.v=e.format("m{0},{1}l{2},{1}",w(21600*d),w(21600*f),w(21600*d)+1);l.textpathok=!0;o.string=k(g);o.on=!0;i.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";
i.coordsize="21600 21600";i.coordorigin="0 0";var p=new S(i,b),q={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:g};p.shape=i;p.path=l;p.textpath=o;p.type="text";p.attrs.text=k(g);p.attrs.x=d;p.attrs.y=f;p.attrs.w=1;p.attrs.h=1;F(p,q);i.appendChild(o);i.appendChild(l);b.canvas.appendChild(i);b=c("skew");b.on=!0;i.appendChild(b);p.skew=b;p.transform("");return p};e._engine.setSize=function(b,d){var c=this.canvas.style;this.width=b;this.height=d;b==+b&&(b+="px");d==+d&&(d+="px");c.width=
b;c.height=d;c.clip="rect(0 "+b+" "+d+" 0)";this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox);return this};e._engine.setViewBox=function(b,d,c,f,g){e.eve("setViewBox",this,this._viewBox,[b,d,c,f,g]);var i=this.width,k=this.height,p=1/z(c/i,f/k),q,r;g&&(q=k/f,r=i/c,c*q<i&&(b-=(i-c*q)/2/q),f*r<k&&(d-=(k-f*r)/2/r));this._viewBox=[b,d,c,f,!!g];this._viewBoxShift={dx:-b,dy:-d,scale:p};this.forEach(function(b){b.transform("...")});return this};var c;e._engine.initWin=function(b){var d=b.document;
d.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!d.namespaces.rvml&&d.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),c=function(b){return d.createElement("<rvml:"+b+' class="rvml">')}}catch(e){c=function(b){return d.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};e._engine.initWin(e._g.win);e._engine.create=function(){var b=e._getContainer.apply(0,arguments),d=b.container,c=b.height,f=b.width,g=b.x,b=b.y;if(!d)throw Error("VML container not found.");
var i=new e._Paper,k=i.canvas=e._g.doc.createElement("div"),p=k.style;g=g||0;b=b||0;f=f||512;c=c||342;i.width=f;i.height=c;f==+f&&(f+="px");c==+c&&(c+="px");i.coordsize="21600000 21600000";i.coordorigin="0 0";i.span=e._g.doc.createElement("span");i.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";k.appendChild(i.span);p.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
f,c);1==d?(e._g.doc.body.appendChild(k),p.left=g+"px",p.top=b+"px",p.position="absolute"):d.firstChild?d.insertBefore(k,d.firstChild):d.appendChild(k);i.renderfix=function(){};return i};e.prototype.clear=function(){e.eve("clear",this);this.canvas.innerHTML="";this.span=e._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};e.prototype.remove=function(){e.eve("remove",
this);this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?e._removedFactory(b):null;return!0};var p=e.st,g;for(g in G)G.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&(p[g]=function(b){return function(){var d=arguments;return this.forEach(function(c){c[b].apply(c,d)})}}(g))}(window.Raphael);var ThemeModel=function(e,k,r,B){this.model=e;this.paper=e.paper;this.theme=k;k=r/10;e=0.6*k;this.selx=r/2;this.sely=B-0.7*k;this.icon=this.paper.image("themes/"+this.theme+"/icon.png",this.selx-e/2,this.sely-e/2,e,e);this.selector=this.paper.image("themes/"+this.theme+"/selector.png",this.selx-k/2,this.sely-k/2,k,k);this.icon.hide();this.selector.hide();var e=k/4,w=0.55*k,z=[{type:"text","font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx-0.7*w,y:this.sely-0.7*w,"text-anchor":"end"},
{type:"text","font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx-w,y:this.sely,"text-anchor":"end"},{type:"text","font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx-0.7*w,y:this.sely+0.7*w,"text-anchor":"end"},{type:"text","font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx+0.7*w,y:this.sely+0.7*w,"text-anchor":"start"},{type:"text","font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx+w,y:this.sely,"text-anchor":"start"},{type:"text",
"font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx+0.7*w,y:this.sely-0.7*w,"text-anchor":"start"}];this.optionShadow=this.paper.add(z);this.options=this.paper.add(z);for(z=0;z<this.options.length;z++){var P=0;(function(e,f,k,r){var w=k[r];w.attr({fill:"rgb(250,250,250)",cursor:"pointer"});w.mousedown(function(){e.selectOption(r)}).mouseover(function(){k[P].animate({fill:"rgb(250,250,250)"},200);w.animate({fill:"rgb(255,166,10)"},200);w.toFront();f.safari();P=r}).mouseout(function(){w.animate({fill:"rgb(250,250,250)"},
200);f.safari()});w.hide()})(this.model,this.paper,this.options,z);this.optionShadow[z].attr({fill:"rgba(0,0,0,0.7)"});this.optionShadow[z].translate(1,1);this.optionShadow[z].hide()}k*=1.5;this.play=this.paper.image("themes/"+this.theme+"/play.png",r/2-k/2,B/2-k/2,k,k);this.play.click(this.model.playClicked.bind(this.model));this.play.node.style.cursor="pointer";this.play.hide();this.eventIndicator=this.paper.rect(0,B,r,0).attr({fill:"90-#fa6900:0-#fa6900:100","fill-opacity":0,"stroke-width":0});
this.eventIndicator.data("h",w);this.eventIndicator.data("y",B-w);this.eventIndicator.hide();r=e/2;B-=1.5*e;this.playControl=this.paper.image("themes/"+this.theme+"/play_control.png",r,B,e,e).attr({opacity:0});this.pauseControl=this.paper.image("themes/"+this.theme+"/pause_control.png",r,B,e,e).attr({opacity:0});this.playControl.hide();this.pauseControl.hide();this.playControl.click(function(){this.playControl.hide();this.pauseControl.show();this.pauseControl.attr({opacity:1});this.playControl.attr({opacity:0});
this.model.playVideo()}.bind(this));this.pauseControl.click(function(){this.pauseControl.hide();this.playControl.show();this.playControl.attr({opacity:1});this.pauseControl.attr({opacity:0});this.model.pauseVideo()}.bind(this));this.controlsHidden=this.eventIndicatorHidden=!0};ThemeModel.prototype.rotateSelector=function(e){this.selector.attr({transform:"r"+e})};
ThemeModel.prototype.showOptions=function(e){this.selector.show();this.icon.show();for(var k=0;k<e.length;k++)void 0!=e[k]&&(this.options[k].attr({text:e[k]}),this.options[k].show(),this.optionShadow[k].attr({text:e[k]}),this.optionShadow[k].show())};ThemeModel.prototype.hideOptions=function(){this.selector.hide();this.icon.hide();for(var e=0;6>e;e++)this.options[e].hide(),this.optionShadow[e].hide()};
ThemeModel.prototype.showControls=function(e){if(!0==this.controlsHidden)e?(this.playControl.show(),this.playControl.animate({opacity:1},200,"<>")):(this.pauseControl.show(),this.pauseControl.animate({opacity:1},200,"<>")),this.controlsHidden=!1};ThemeModel.prototype.hideControls=function(e){if(!1==this.controlsHidden)e?this.playControl.animate({opacity:0},500,"<>",this.hide):this.pauseControl.animate({opacity:0},500,"<>",this.hide),this.controlsHidden=!0};ThemeModel.prototype.showHomeScreen=function(){this.play.show()};
ThemeModel.prototype.hideHomeScreen=function(){this.play.hide()};ThemeModel.prototype.showEventIndicator=function(){this.eventIndicatorHidden=!0;var e=this.eventIndicator.data("h"),k=this.eventIndicator.data("y");this.eventIndicator.show();this.eventIndicator.animate({height:e,y:k},500,"<>");this.eventIndicatorHidden=!1};
ThemeModel.prototype.hideEventIndicator=function(){if(!1==this.eventIndicatorHidden){var e=this.eventIndicator.data("h");this.eventIndicator.animate({height:0,y:this.eventIndicator.data("y")+e},500,"<>",this.hide);this.eventIndicatorHidden=!0}};
