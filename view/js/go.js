var isWebKit="undefined"!==typeof navigator.userAgent.split("WebKit/")[1],isChrome=-1<navigator.userAgent.toLowerCase().indexOf("chrome"),isMozilla=0<=navigator.appVersion.indexOf("Gecko/")||0<=navigator.userAgent.indexOf("Gecko")&&!this.isWebKit&&"undefined"!==typeof navigator.appVersion;isWebKit&&console.log("WebKit browser detected");isChrome&&console.log("Chrome browser detected");isMozilla&&console.log("Mozilla browser detected");!isWebKit&&!isChrome&&!isMozilla&&console.error("Browser unsupported");var Connection=function(d,l,t){this.segment=d;this.option=l;this.position=t};var Stack=function(){this.stack=[]};Stack.prototype.insert=function(d){this.stack.push(d)};Stack.prototype.remove=function(d){for(var l=0;l<this.stack.length;l++)if(this.stack[l]==d){this.stack.splice(l,1);break}};Stack.prototype.pull=function(){return 1<this.stack.length?this.stack.shift():1==this.stack.length?this.stack.pop():null};Stack.prototype.size=function(){return this.stack.length};Function.prototype.bind=function(d){var l=this;return function(){return l.apply(d,arguments)}};var jiffy=0,Model=function(){this.width=window.innerWidth;this.height=window.innerHeight;var d=document.getElementById("controlOverlay");d.width=this.width;d.height=this.height;this.paper=Raphael(d,this.width,this.height);this.score=0;this.theme=new ThemeModel(this,"professional1",this.width,this.height);this.player=new Player(this,this.width,this.height);this.replay=!1;this.mousey=this.mousex=0;this.mouseMoveHandler=this.mouseMove.bind(this);document.addEventListener("mousemove",this.mouseMoveHandler,
!1);this.mouseUpHandler=this.mouseUp.bind(this);document.addEventListener("mouseup",this.mouseUpHandler,!1);this.tickId=setInterval(this.timerTick.bind(this),33);this.idleCounter=15;this.theme.showHomeScreen(this.restart);this.controlsVisible=!1};Model.prototype.mouseMove=function(d){this.mousex=d.pageX;this.mousey=d.pageY;this.idleCounter=15;!0==this.controlsVisible&&this.theme.showControls(this.player.isPaused())};
Model.prototype.mouseUp=function(){if(this.player.timerEventCanTrigger)switch(this.player.timerEventMode){case 0:this.player.setSegment(this.player.timerEventSegment);break;case 1:this.player.segment.videoStack.insert(this.player.timerEventSegment);this.player.videoStacked=!0;break;case 2:this.player.segment.videoStack.remove(this.player.timerEventSegment);this.player.videoStacked=0==this.player.segment.videoStack.size?!1:!0;break;default:console.error("Illegal timer event mode")}};
Model.prototype.playClicked=function(){!0==this.replay&&(this.player.segment.removeVideo(),this.player.reset());this.player.playVideo();this.controlsVisible=!0;this.theme.hideHomeScreen()};Model.prototype.playVideo=function(){this.player.playVideo()};Model.prototype.pauseVideo=function(){this.player.pauseVideo()};Model.prototype.videoComplete=function(){this.replay=!0;this.theme.showHomeScreen(this.restart);this.controlsVisible=!1};
Model.prototype.showOptions=function(d){for(var l=!1,t=Array(6),y=Array(6),v=0;6>v;v++)y[v]=d.getConnectionByPosition(v);if(null!=y[0])t[0]=y[0].option,l=!0;if(null!=y[1])t[1]=y[1].option,l=!0;if(null!=y[2])t[2]=y[2].option,l=!0;if(null!=y[3])t[3]=y[3].option,l=!0;if(null!=y[4])t[4]=y[4].option,l=!0;if(null!=y[5])t[5]=y[5].option,l=!0;if(!l)return!1;this.theme.showOptions(t);this.controlsVisible=!1;this.theme.hideControls(this.player.isPaused());return!0};
Model.prototype.selectOption=function(d){this.theme.hideOptions();this.player.chooseOption(d);this.controlsVisible=!0};Model.prototype.updateScore=function(d){this.score=null==d?0:this.score+d;d=d.toString();document.getElementById("score-num").innerHTML=d;console.log("Current score: %d",this.score)};
Model.prototype.timerTick=function(){jiffy++;0>=--this.idleCounter&&this.theme.hideControls(this.player.isPaused());var d=Math.atan((this.theme.sely-this.mousey)/(this.mousex-this.theme.selx))-Math.PI/2;0>this.mousex-this.theme.selx&&(d-=Math.PI);this.theme.rotateSelector(-360*d/(2*Math.PI));this.player.timerEventCanTrigger?this.theme.showEventIndicator():this.theme.hideEventIndicator()};var Player=function(d,l,t){this.width=l;this.height=t;this.model=d;this.segment=null;this.timerEventCanTrigger=!1;this.timerEventSegment=null;this.timerId=setInterval(this.timerTick.bind(this),100);this.timerEventMode=0;this.videoStacked=!1;this.reset()};
Player.prototype.reset=function(){console.log("Resetting player");this.segment=S1;var d=this.segment.score;this.model.updateScore(null);this.model.updateScore(d);0!=this.segment.videoStack.size()?(this.videoStacked=!0,console.log("video is stacked, size: %d",this.segment.videoStack.size())):this.videoStacked=!1;this.segment.loadVideo(this);this.segment.setVisible();this.preloadVideo()};
Player.prototype.preloadVideo=function(){console.log("video has %d connections",this.segment.connections.length);for(var d=0;d<this.segment.connections.length;d++){var l=this.segment.connections[d].segment;l.loadVideo(this)}console.log("video has %d timed events",this.segment.timedEvents.length);for(d=0;d<this.segment.timedEvents.length;d++)l=this.segment.timedEvents[d].segment,l.loadVideo(this)};
Player.prototype.playVideo=function(){this.segment.setVisible();this.segment.play();console.log("Now playing %s, duration: %d seconds",this.segment.url,this.segment.video.duration)};Player.prototype.skipToEnd=function(){};Player.prototype.pauseVideo=function(){this.segment.pause()};Player.prototype.isPaused=function(){return this.segment.video.paused};Player.prototype.setSegment=function(d){this.segment.removeVideo();this.segment=d;this.model.updateScore(this.segment.score);this.preloadVideo();this.playVideo()};
Player.prototype.chooseOption=function(d){console.log("option %d choosen",d);d=this.segment.chooseConnection(d).segment;0!=d.videoStack.size()?(this.videoStacked=!0,console.log("video is stacked, size: %d",this.segment.videoStack.size())):this.videoStacked=!1;this.setSegment(d)};
Player.prototype.timerTick=function(){var d=this.segment;if(null!=d&&null!=d.video)if(d.video.currentTime>=d.video.duration)this.videoEnded();else{for(var l=0;l<d.timedEvents.length;l++){var t=d.timedEvents[l];if(d.video.currentTime>t.startTime&&d.video.currentTime<t.endTime){this.timerEventCanTrigger=!0;this.timerEventSegment=t.segment;this.timerEventMode=t.mode;return}}this.timerEventCanTrigger=!1;this.timerEventSegment=null}};
Player.prototype.videoEnded=function(){if(this.videoStacked){this.videoStacked=!1;console.log("stacked videos detected, unstacking...");var d=this.segment,l=d.connections,t=d.defaultPos,y=d.videoStack;for(d.connections=[];null!=(s=y.pull());)d.insertDirect(s),d=s;d.connections=l;d.defaultPos=t;this.chooseOption(this.segment.defaultPos)}else-1!=this.segment.defaultPos?(console.log("direct video detected, not showing options"),this.chooseOption(this.segment.defaultPos)):this.model.showOptions(this.segment)||
this.model.videoComplete()};var Segment=function(d,l){this.url=d;this.score=l||0;this.defaultPos=-1;this.connections=[];this.timedEvents=[];this.videoStack=new Stack;this.player=this.video=null};Segment.prototype.setVisible=function(){this.video.style.visibility="visible"};Segment.prototype.play=function(){this.video.play()};Segment.prototype.pause=function(){this.video.pause()};
Segment.prototype.getConnectionByPosition=function(d){for(var l=0;l<this.connections.length;l++)if(this.connections[l].position===d)return this.connections[l];return null};Segment.prototype.chooseConnection=function(d){for(var l,t=0;t<this.connections.length;t++)this.connections[t].position===d?l=t:this.connections[t].segment.removeVideo();return this.connections[l]};Segment.prototype.insertDirect=function(d){this.defaultPos++;this.connections.push(new Connection(d,"",this.defaultPos))};
Segment.prototype.insertConnection=function(d,l,t){this.connections.push(new Connection(d,l,t))};Segment.prototype.insertTimedEvent=function(d,l,t){this.timedEvents.push(new TimedEvent(d,l,t))};Segment.prototype.insertTimedStack=function(d,l,t,y){!0===y&&this.videoStack.insert(d);this.timedEvents.push(new TimedEvent(d,l,t,y?2:1))};
Segment.prototype.loadVideo=function(d){this.player=d;if(null==this.video)d=document.createElement("video"),d.controls=!1,d.volume=1,d.preload="auto",d.style.visibility="hidden",d.style.position="absolute",d.width=this.player.width,d.height=this.player.height,document.body.insertBefore(d,document.getElementById("controlOverlay")),this.video=d;this.video.src=setVideoUrl(this.url);this.video.load()};
Segment.prototype.removeVideo=function(){if(null!=this.video)document.body.removeChild(this.video),this.video=null};var setVideoUrl=function(d){return""==d||null==d?null:isMozilla?"http://static.simply.io/"+d+".ogv":"http://static.simply.io/"+d+".mp4"};var TimedEvent=function(d,l,t,y){this.segment=d;this.startTime=l;this.endTime=t;this.mode=y||0};(function(d){var l=/[\.\/]/,t=function(){},y=function(d,l){return d-l},v,M,R={n:{}},B=function(d,l){var t=M,z=Array.prototype.slice.call(arguments,2),o=B.listeners(d),G=0,r,P=[],K={},I=[];v=d;M=0;for(var C=0,H=o.length;C<H;C++)"zIndex"in o[C]&&(P.push(o[C].zIndex),0>o[C].zIndex&&(K[o[C].zIndex]=o[C]));for(P.sort(y);0>P[G];)if(r=K[P[G++]],I.push(r.apply(l,z)),M)return M=t,I;for(C=0;C<H;C++)if(r=o[C],"zIndex"in r)if(r.zIndex==P[G]){I.push(r.apply(l,z));if(M)return M=t,I;do if(G++,r=K[P[G]],r&&I.push(r.apply(l,
z)),M)return M=t,I;while(r)}else K[r.zIndex]=r;else if(I.push(r.apply(l,z)),M)return M=t,I;M=t;return I.length?I:null};B.listeners=function(d){var d=d.split(l),t=R,v,z,o,G,r,y,B,I,C=[t],H=[];for(G=0,r=d.length;G<r;G++){I=[];for(y=0,B=C.length;y<B;y++)for(t=C[y].n,z=[t[d[G]],t["*"]],o=2;o--;)v=z[o],v&&(I.push(v),H=H.concat(v.f||[]));C=I}return H};B.on=function(d,v){for(var y=d.split(l),z=R,o=0,G=y.length;o<G;o++)z=z.n,!z[y[o]]&&(z[y[o]]={n:{}}),z=z[y[o]];z.f=z.f||[];for(o=0,G=z.f.length;o<G;o++)if(z.f[o]==
v)return t;z.f.push(v);return function(d){+d==+d&&(v.zIndex=+d)}};B.stop=function(){M=1};B.nt=function(d){return d?RegExp("(?:\\.|\\/|^)"+d+"(?:\\.|\\/|$)").test(v):v};B.unbind=function(d,t){var v=d.split(l),z,o,y,r,B,K,I=[R];for(r=0,B=v.length;r<B;r++)for(K=0;K<I.length;K+=y.length-2){y=[K,1];z=I[K].n;if("*"!=v[r])z[v[r]]&&y.push(z[v[r]]);else for(o in z)z.hasOwnProperty(o)&&y.push(z[o]);I.splice.apply(I,y)}for(r=0,B=I.length;r<B;r++)for(z=I[r];z.n;){if(t){if(z.f){for(K=0,v=z.f.length;K<v;K++)if(z.f[K]==
t){z.f.splice(K,1);break}!z.f.length&&delete z.f}for(o in z.n)if(z.n.hasOwnProperty(o)&&z.n[o].f){y=z.n[o].f;for(K=0,v=y.length;K<v;K++)if(y[K]==t){y.splice(K,1);break}!y.length&&delete z.n[o].f}}else for(o in delete z.f,z.n)z.n.hasOwnProperty(o)&&z.n[o].f&&delete z.n[o].f;z=z.n}};B.once=function(d,l){var t=function(){l.apply(this,arguments);B.unbind(d,t)};return B.on(d,t)};B.version="0.4.0";B.toString=function(){return"You are running Eve 0.4.0"};"undefined"!=typeof module&&module.exports?module.exports=
B:d.eve=B})(this);
(function(){function d(a,m,n,x,b,c){var n=N(n),W,d,h,j,g,u,f=a.ms,k={},l={},D={};if(x)for(w=0,o=L.length;w<o;w++){var Q=L[w];if(Q.el.id==m.id&&Q.anim==a){Q.percent!=n?(L.splice(w,1),h=1):d=Q;m.attr(Q.totalOrigin);break}}else x=+l;for(var w=0,o=a.percents.length;w<o;w++){if(a.percents[w]==n||a.percents[w]>x*a.top){n=a.percents[w];g=a.percents[w-1]||0;f=f/a.top*(n-g);j=a.percents[w+1];W=a.anim[n];break}x&&m.attr(a.anim[a.percents[w]])}if(W){if(d)d.initstatus=x,d.start=new Date-d.ms*x;else{for(var q in W)if(W[G](q)&&
(ka[G](q)||m.paper.customAttributes[G](q)))switch(k[q]=m.attr(q),null==k[q]&&(k[q]=Oa[q]),l[q]=W[q],ka[q]){case A:D[q]=(l[q]-k[q])/f;break;case "colour":k[q]=i.getRGB(k[q]);w=i.getRGB(l[q]);D[q]={r:(w.r-k[q].r)/f,g:(w.g-k[q].g)/f,b:(w.b-k[q].b)/f};break;case "path":var w=ba(k[q],l[q]),p=w[1];k[q]=w[0];D[q]=[];for(w=0,o=k[q].length;w<o;w++){D[q][w]=[0];for(var r=1,y=k[q][w].length;r<y;r++)D[q][w][r]=(p[w][r]-k[q][w][r])/f}break;case "transform":w=m._;if(p=Pa(w[q],l[q])){k[q]=p.from;l[q]=p.to;D[q]=
[];D[q].real=!0;for(w=0,o=k[q].length;w<o;w++){D[q][w]=[k[q][w][0]];for(r=1,y=k[q][w].length;r<y;r++)D[q][w][r]=(l[q][w][r]-k[q][w][r])/f}}else p=m.matrix||new v,w={_:{transform:w.transform},getBBox:function(){return m.getBBox(1)}},k[q]=[p.a,p.b,p.c,p.d,p.e,p.f],Qa(w,l[q]),l[q]=w._.transform,D[q]=[(w.matrix.a-p.a)/f,(w.matrix.b-p.b)/f,(w.matrix.c-p.c)/f,(w.matrix.d-p.d)/f,(w.matrix.e-p.e)/f,(w.matrix.e-p.f)/f];break;case "csv":p=F(W[q])[e](X);o=F(k[q])[e](X);if("clip-rect"==q)for(k[q]=o,D[q]=[],w=
o.length;w--;)D[q][w]=(p[w]-k[q][w])/f;l[q]=p;break;default:for(p=[][E](W[q]),o=[][E](k[q]),D[q]=[],w=m.paper.customAttributes[q].length;w--;)D[q][w]=((p[w]||0)-(o[w]||0))/f}q=W.easing;w=i.easing_formulas[q];if(!w)if((w=F(q).match(Ra))&&5==w.length)var z=w,w=function(a){return t(a,+z[1],+z[2],+z[3],+z[4],f)};else w=Sa;u=W.start||a.start||+new Date;Q={anim:a,percent:n,timestamp:u,start:u+(a.del||0),status:0,initstatus:x||0,stop:!1,ms:f,easing:w,from:k,diff:D,to:l,el:m,callback:W.callback,prev:g,next:j,
repeat:c||a.times,origin:m.attr(),totalOrigin:b};L.push(Q);if(x&&!d&&!h&&(Q.stop=!0,Q.start=new Date-f*x,1==L.length))return la();h&&(Q.start=new Date-Q.ms*x);1==L.length&&ya(la)}eve("anim.start."+m.id,m,a)}}function l(a,m){var n=[],x={};this.ms=m;this.times=1;if(a){for(var b in a)a[G](b)&&(x[N(b)]=a[b],n.push(N(b)));n.sort(Ta)}this.anim=x;this.top=n[n.length-1];this.percents=n}function t(a,m,n,x,b,c){function e(a,m){var n,x,b,c;for(b=a,x=0;8>x;x++){c=((j*b+h)*b+d)*b-a;if(u(c)<m)return b;n=(3*j*b+
2*h)*b+d;if(1.0E-6>u(n))break;b-=c/n}n=0;x=1;b=a;if(b<n)return n;if(b>x)return x;for(;n<x;){c=((j*b+h)*b+d)*b;if(u(c-a)<m)break;a>c?n=b:x=b;b=(x-n)/2+n}return b}var d=3*m,h=3*(x-m)-d,j=1-d-h,i=3*n,g=3*(b-n)-i,f=1-i-g;return function(a,m){var n=e(a,m);return((f*n+g)*n+i)*n}(a,1/(200*c))}function y(){return this.x+T+this.y+T+this.width+" \u00d7 "+this.height}function v(a,m,n,x,b,c){null!=a?(this.a=+a,this.b=+m,this.c=+n,this.d=+x,this.e=+b,this.f=+c):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=
0)}function M(a){for(var m=[],n=0,x=a.length;x-2>n;n+=2){var b=[{x:+a[n],y:+a[n+1]},{x:+a[n],y:+a[n+1]},{x:+a[n+2],y:+a[n+3]},{x:+a[n+4],y:+a[n+5]}];x-4==n?(b[0]={x:+a[n-2],y:+a[n-1]},b[3]=b[2]):n&&(b[0]={x:+a[n-2],y:+a[n-1]});m.push(["C",(-b[0].x+6*b[1].x+b[2].x)/6,(-b[0].y+6*b[1].y+b[2].y)/6,(b[1].x+6*b[2].x-b[3].x)/6,(b[1].y+6*b[2].y-b[3].y)/6,b[2].x,b[2].y])}return m}function R(){return this.hex}function B(a,m,n){function x(){var b=Array.prototype.slice.call(arguments,0),c=b.join("\u2400"),e=
x.cache=x.cache||{},d=x.count=x.count||[];if(e[G](c)){a:for(var b=d,d=c,h=0,j=b.length;h<j;h++)if(b[h]===d){b.push(b.splice(h,1)[0]);break a}return n?n(e[c]):e[c]}1E3<=d.length&&delete e[d.shift()];d.push(c);e[c]=a[H](m,b);return n?n(e[c]):e[c]}return x}function i(a){if(i.is(a,"function"))return V?a():eve.on("DOMload",a);if(i.is(a,p))return i._engine.create[H](i,a.splice(0,3+i.is(a[0],A))).add(a);var m=Array.prototype.slice.call(arguments,0);if(i.is(m[m.length-1],"function")){var n=m.pop();return V?
n.call(i._engine.create[H](i,m)):eve.on("DOMload",function(){n.call(i._engine.create[H](i,m))})}return i._engine.create[H](i,arguments)}i.version="2.0.1";i.eve=eve;var V,X=/[, ]+/,z={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},o=/\{(\d+)\}/g,G="hasOwnProperty",r={doc:document,win:window},P=Object.prototype[G].call(r.win,"Raphael"),K=r.win.Raphael,I=function(){this.ca=this.customAttributes={}},C,H="apply",E="concat",O="createTouch"in r.doc,T=" ",F=String,e="split",k="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[e](T),
f={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},b=F.prototype.toLowerCase,c=Math,h=c.max,j=c.min,u=c.abs,g=c.pow,q=c.PI,A="number",p="array",Ua=Object.prototype.toString;i._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i;var Va=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
Wa={NaN:1,Infinity:1,"-Infinity":1},Ra=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ma=c.round,N=parseFloat,Y=parseInt,za=F.prototype.toUpperCase,Oa=i._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,
rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ka=i._availableAnimAttrs={blur:A,"clip-rect":"csv",cx:A,cy:A,fill:"colour","fill-opacity":A,"font-size":A,height:A,opacity:A,path:"path",r:A,rx:A,ry:A,stroke:"colour","stroke-opacity":A,"stroke-width":A,transform:"transform",width:A,x:A,y:A},na=/\s*,\s*/,Xa=
{hs:1,rg:1},Ya=/,?([achlmqrstvxz]),?/gi,Za=/([achlmrqstvz])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,$a=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,Aa=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)\s*,?\s*/ig;i._radial_gradient=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/;var ca={},Ta=function(a,m){return N(a)-N(m)},ab=function(){},Sa=function(a){return a},oa=i._rectPath=function(a,m,n,x,b){return b?[["M",a+b,m],["l",n-2*b,0],["a",b,b,0,0,1,b,b],["l",0,x-2*b],["a",b,b,0,0,1,-b,b],["l",2*b-n,0],["a",
b,b,0,0,1,-b,-b],["l",0,2*b-x],["a",b,b,0,0,1,b,-b],["z"]]:[["M",a,m],["l",n,0],["l",0,x],["l",-n,0],["z"]]},Ba=function(a,m,n,x){null==x&&(x=n);return[["M",a,m],["m",0,-x],["a",n,x,0,1,1,0,2*x],["a",n,x,0,1,1,0,-2*x],["z"]]},pa=i._getPath={path:function(a){return a.attr("path")},circle:function(a){a=a.attrs;return Ba(a.cx,a.cy,a.r)},ellipse:function(a){a=a.attrs;return Ba(a.cx,a.cy,a.rx,a.ry)},rect:function(a){a=a.attrs;return oa(a.x,a.y,a.width,a.height,a.r)},image:function(a){a=a.attrs;return oa(a.x,
a.y,a.width,a.height)},text:function(a){a=a._getBBox();return oa(a.x,a.y,a.width,a.height)}},Ca=i.mapPath=function(a,m){if(!m)return a;var n,x,b,c,e,d,h,a=ba(a);for(b=0,e=a.length;b<e;b++){h=a[b];for(c=1,d=h.length;c<d;c+=2)n=m.x(h[c],h[c+1]),x=m.y(h[c],h[c+1]),h[c]=n,h[c+1]=x}return a};i._g=r;i.type=r.win.SVGAngle||r.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if("VML"==i.type){var qa=r.doc.createElement("div"),ea;qa.innerHTML='<v:shape adj="1"/>';
ea=qa.firstChild;ea.style.behavior="url(#default#VML)";if(!ea||"object"!=typeof ea.adj)return i.type="";qa=null}i.svg=!(i.vml="VML"==i.type);i._Paper=I;i.fn=C=I.prototype=i.prototype;i._id=0;i._oid=0;i.is=function(a,m){m=b.call(m);return"finite"==m?!Wa[G](+a):"array"==m?a instanceof Array:"null"==m&&null===a||m==typeof a&&null!==a||"object"==m&&a===Object(a)||"array"==m&&Array.isArray&&Array.isArray(a)||Ua.call(a).slice(8,-1).toLowerCase()==m};i.angle=function(a,m,n,x,b,e){return null==b?(a-=n,m-=
x,!a&&!m?0:(180*c.atan2(-m,-a)/q+540)%360):i.angle(a,m,b,e)-i.angle(n,x,b,e)};i.rad=function(a){return a%360*q/180};i.deg=function(a){return 180*a/q%360};i.snapTo=function(a,m,n){n=i.is(n,"finite")?n:10;if(i.is(a,p))for(var x=a.length;x--;){if(u(a[x]-m)<=n)return a[x]}else{a=+a;x=m%a;if(x<n)return m-x;if(x>a-n)return m-x+a}return m};i.createUUID=function(a,m){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,m).toUpperCase()}}(/[xy]/g,function(a){var m=16*c.random()|0;return("x"==
a?m:m&3|8).toString(16)});i.setWindow=function(a){eve("setWindow",i,r.win,a);r.win=a;r.doc=r.win.document;i._engine.initWin&&i._engine.initWin(r.win)};var fa=function(a){if(i.vml){var m=/^\s+|\s+$/g,n;try{var x=new ActiveXObject("htmlfile");x.write("<body>");x.close();n=x.body}catch(b){n=createPopup().document.body}var c=n.createTextRange();fa=B(function(a){try{n.style.color=F(a).replace(m,"");var x=c.queryCommandValue("ForeColor");return"#"+("000000"+((x&255)<<16|x&65280|(x&16711680)>>>16).toString(16)).slice(-6)}catch(b){return"none"}})}else{var e=
r.doc.createElement("i");e.title="Rapha\u00ebl Colour Picker";e.style.display="none";r.doc.body.appendChild(e);fa=B(function(a){e.style.color=a;return r.doc.defaultView.getComputedStyle(e,"").getPropertyValue("color")})}return fa(a)},bb=function(){return"hsb("+[this.h,this.s,this.b]+")"},cb=function(){return"hsl("+[this.h,this.s,this.l]+")"},Da=function(){return this.hex},Ea=function(a,m,n){null==m&&i.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(n=a.b,m=a.g,a=a.r);if(null==m&&i.is(a,"string"))n=i.getRGB(a),
a=n.r,m=n.g,n=n.b;if(1<a||1<m||1<n)a/=255,m/=255,n/=255;return[a,m,n]},Fa=function(a,m,n,x){a*=255;m*=255;n*=255;a={r:a,g:m,b:n,hex:i.rgb(a,m,n),toString:Da};i.is(x,"finite")&&(a.opacity=x);return a};i.color=function(a){var m;i.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(m=i.hsb2rgb(a),a.r=m.r,a.g=m.g,a.b=m.b,a.hex=m.hex):i.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(m=i.hsl2rgb(a),a.r=m.r,a.g=m.g,a.b=m.b,a.hex=m.hex):(i.is(a,"string")&&(a=i.getRGB(a)),i.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(m=
i.rgb2hsl(a),a.h=m.h,a.s=m.s,a.l=m.l,m=i.rgb2hsb(a),a.v=m.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1));a.toString=Da;return a};i.hsb2rgb=function(a,m,n,x){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(n=a.b,m=a.s,a=a.h,x=a.o);a*=360;var b,c,e,d,h;a=a%360/60;h=n*m;d=h*(1-u(a%2-1));b=c=e=n-h;a=~~a;b+=[h,d,0,0,d,h][a];c+=[d,h,h,d,0,0][a];e+=[0,0,d,h,h,d][a];return Fa(b,c,e,x)};i.hsl2rgb=function(a,m,n,x){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(n=a.l,m=a.s,a=a.h);if(1<a||1<m||1<n)a/=
360,m/=100,n/=100;var a=360*a,b,c,e,d,h;a=a%360/60;h=2*m*(0.5>n?n:1-n);d=h*(1-u(a%2-1));b=c=e=n-h/2;a=~~a;b+=[h,d,0,0,d,h][a];c+=[d,h,h,d,0,0][a];e+=[0,0,d,h,h,d][a];return Fa(b,c,e,x)};i.rgb2hsb=function(a,m,n){n=Ea(a,m,n);a=n[0];m=n[1];n=n[2];var x,b,c;b=h(a,m,n);c=b-j(a,m,n);x=0==c?null:b==a?(m-n)/c:b==m?(n-a)/c+2:(a-m)/c+4;x=60*((x+360)%6)/360;a=0==c?0:c/b;return{h:x,s:a,b:b,toString:bb}};i.rgb2hsl=function(a,m,n){n=Ea(a,m,n);a=n[0];m=n[1];n=n[2];var x,b,c,e,d;c=h(a,m,n);e=j(a,m,n);d=c-e;x=0==
d?null:c==a?(m-n)/d:c==m?(n-a)/d+2:(a-m)/d+4;x=60*((x+360)%6)/360;b=(c+e)/2;a=0==d?0:0.5>b?d/(2*b):d/(2-2*b);return{h:x,s:a,l:b,toString:cb}};i._path2string=function(){return this.join(",").replace(Ya,"$1")};i._preload=function(a,m){var n=r.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em";n.onload=function(){m.call(this);this.onload=null;r.doc.body.removeChild(this)};n.onerror=function(){r.doc.body.removeChild(this)};r.doc.body.appendChild(n);n.src=a};i.getRGB=
B(function(a){if(!a||(a=F(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:R};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:R};!Xa[G](a.toLowerCase().substring(0,2))&&"#"!=a.charAt()&&(a=fa(a));var m,n,b,c,d,h;if(a=a.match(Va)){a[2]&&(b=Y(a[2].substring(5),16),n=Y(a[2].substring(3,5),16),m=Y(a[2].substring(1,3),16));a[3]&&(b=Y((d=a[3].charAt(3))+d,16),n=Y((d=a[3].charAt(2))+d,16),m=Y((d=a[3].charAt(1))+d,16));a[4]&&(h=a[4][e](na),m=N(h[0]),"%"==h[0].slice(-1)&&(m*=2.55),
n=N(h[1]),"%"==h[1].slice(-1)&&(n*=2.55),b=N(h[2]),"%"==h[2].slice(-1)&&(b*=2.55),"rgba"==a[1].toLowerCase().slice(0,4)&&(c=N(h[3])),h[3]&&"%"==h[3].slice(-1)&&(c/=100));if(a[5])return h=a[5][e](na),m=N(h[0]),"%"==h[0].slice(-1)&&(m*=2.55),n=N(h[1]),"%"==h[1].slice(-1)&&(n*=2.55),b=N(h[2]),"%"==h[2].slice(-1)&&(b*=2.55),("deg"==h[0].slice(-3)||"\u00b0"==h[0].slice(-1))&&(m/=360),"hsba"==a[1].toLowerCase().slice(0,4)&&(c=N(h[3])),h[3]&&"%"==h[3].slice(-1)&&(c/=100),i.hsb2rgb(m,n,b,c);if(a[6])return h=
a[6][e](na),m=N(h[0]),"%"==h[0].slice(-1)&&(m*=2.55),n=N(h[1]),"%"==h[1].slice(-1)&&(n*=2.55),b=N(h[2]),"%"==h[2].slice(-1)&&(b*=2.55),("deg"==h[0].slice(-3)||"\u00b0"==h[0].slice(-1))&&(m/=360),"hsla"==a[1].toLowerCase().slice(0,4)&&(c=N(h[3])),h[3]&&"%"==h[3].slice(-1)&&(c/=100),i.hsl2rgb(m,n,b,c);a={r:m,g:n,b:b,toString:R};a.hex="#"+(16777216|b|n<<8|m<<16).toString(16).slice(1);i.is(c,"finite")&&(a.opacity=c);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:R}},i);i.hsb=B(function(a,
m,n){return i.hsb2rgb(a,m,n).hex});i.hsl=B(function(a,m,n){return i.hsl2rgb(a,m,n).hex});i.rgb=B(function(a,m,n){return"#"+(16777216|n|m<<8|a<<16).toString(16).slice(1)});i.getColor=function(a){var a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75},m=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;1<a.h&&(a.h=0,a.s-=0.2,0>=a.s&&(this.getColor.start={h:0,s:1,b:a.b}));return m.hex};i.getColor.reset=function(){delete this.start};i.parsePathString=B(function(a){if(!a)return null;var m={a:7,c:6,h:1,l:2,
m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];i.is(a,p)&&i.is(a[0],p)&&(n=da(a));n.length||F(a).replace(Za,function(a,b,c){var d=[],a=b.toLowerCase();c.replace(Aa,function(a,m){m&&d.push(+m)});"m"==a&&2<d.length&&(n.push([b][E](d.splice(0,2))),a="l",b="m"==b?"l":"L");if("r"==a)n.push([b][E](d));else for(;d.length>=m[a]&&!(n.push([b][E](d.splice(0,m[a]))),!m[a]););});n.toString=i._path2string;return n});i.parseTransformString=B(function(a){if(!a)return null;var m=[];i.is(a,p)&&i.is(a[0],p)&&(m=da(a));m.length||
F(a).replace($a,function(a,x,c){var d=[];b.call(x);c.replace(Aa,function(a,m){m&&d.push(+m)});m.push([x][E](d))});m.toString=i._path2string;return m});i.findDotsAtSegment=function(a,m,n,b,d,e,h,j,i){var f=1-i,k=g(f,3),u=g(f,2),l=i*i,A=l*i,o=k*a+3*u*i*n+3*f*i*i*d+A*h,k=k*m+3*u*i*b+3*f*i*i*e+A*j,u=a+2*i*(n-a)+l*(d-2*n+a),A=m+2*i*(b-m)+l*(e-2*b+m),D=n+2*i*(d-n)+l*(h-2*d+n),l=b+2*i*(e-b)+l*(j-2*e+b),a=f*a+i*n,m=f*m+i*b,d=f*d+i*h,e=f*e+i*j,j=90-180*c.atan2(u-D,A-l)/q;(u>D||A<l)&&(j+=180);return{x:o,y:k,
m:{x:u,y:A},n:{x:D,y:l},start:{x:a,y:m},end:{x:d,y:e},alpha:j}};i._removedFactory=function(a){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+a+"\u201d of removed object");}};var Ga=B(function(a){if(!a)return{x:0,y:0,width:0,height:0};for(var a=ba(a),m=0,n=0,b=[],c=[],d,e=0,i=a.length;e<i;e++)d=a[e],"M"==d[0]?(m=d[1],n=d[2],b.push(m),c.push(n)):(m=db(m,n,d[1],d[2],d[3],d[4],d[5],d[6]),b=b[E](m.min.x,m.max.x),c=c[E](m.min.y,m.max.y),m=d[5],n=d[6]);a=j[H](0,b);d=j[H](0,
c);return{x:a,y:d,width:h[H](0,b)-a,height:h[H](0,c)-d}},null,function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}}),da=function(a){var m=[];if(!i.is(a,p)||!i.is(a&&a[0],p))a=i.parsePathString(a);for(var b=0,x=a.length;b<x;b++){m[b]=[];for(var c=0,d=a[b].length;c<d;c++)m[b][c]=a[b][c]}m.toString=i._path2string;return m},eb=i._pathToRelative=B(function(a){if(!i.is(a,p)||!i.is(a&&a[0],p))a=i.parsePathString(a);var m=[],n=0,c=0,d=0,e=0,h=0;"M"==a[0][0]&&(n=a[0][1],c=a[0][2],d=n,e=c,h++,m.push(["M",
n,c]));for(var j=a.length;h<j;h++){var f=m[h]=[],g=a[h];if(g[0]!=b.call(g[0]))switch(f[0]=b.call(g[0]),f[0]){case "a":f[1]=g[1];f[2]=g[2];f[3]=g[3];f[4]=g[4];f[5]=g[5];f[6]=+(g[6]-n).toFixed(3);f[7]=+(g[7]-c).toFixed(3);break;case "v":f[1]=+(g[1]-c).toFixed(3);break;case "m":d=g[1],e=g[2];default:for(var k=1,u=g.length;k<u;k++)f[k]=+(g[k]-(k%2?n:c)).toFixed(3)}else{m[h]=[];"m"==g[0]&&(d=g[1]+n,e=g[2]+c);f=0;for(k=g.length;f<k;f++)m[h][f]=g[f]}g=m[h].length;switch(m[h][0]){case "z":n=d;c=e;break;case "h":n+=
+m[h][g-1];break;case "v":c+=+m[h][g-1];break;default:n+=+m[h][g-2],c+=+m[h][g-1]}}m.toString=i._path2string;return m},0,da),Ha=i._pathToAbsolute=B(function(a){if(!i.is(a,p)||!i.is(a&&a[0],p))a=i.parsePathString(a);if(!a||!a.length)return[["M",0,0]];var m=[],b=0,c=0,d=0,h=0,e=0;"M"==a[0][0]&&(b=+a[0][1],c=+a[0][2],d=b,h=c,e++,m[0]=["M",b,c]);for(var j,g=e,f=a.length;g<f;g++){m.push(e=[]);j=a[g];if(j[0]!=za.call(j[0]))switch(e[0]=za.call(j[0]),e[0]){case "A":e[1]=j[1];e[2]=j[2];e[3]=j[3];e[4]=j[4];
e[5]=j[5];e[6]=+(j[6]+b);e[7]=+(j[7]+c);break;case "V":e[1]=+j[1]+c;break;case "H":e[1]=+j[1]+b;break;case "R":for(var k=[b,c][E](j.slice(1)),u=2,q=k.length;u<q;u++)k[u]=+k[u]+b,k[++u]=+k[u]+c;m.pop();m=m[E](M(k));break;case "M":d=+j[1]+b,h=+j[2]+c;default:for(u=1,q=j.length;u<q;u++)e[u]=+j[u]+(u%2?b:c)}else if("R"==j[0])k=[b,c][E](j.slice(1)),m.pop(),m=m[E](M(k)),e=["R"][E](j.slice(-2));else{u=0;for(q=j.length;u<q;u++)e[u]=j[u]}switch(e[0]){case "Z":b=d;c=h;break;case "H":b=e[1];break;case "V":c=
e[1];break;case "M":d=e[e.length-2],h=e[e.length-1];default:b=e[e.length-2],c=e[e.length-1]}}m.toString=i._path2string;return m},null,da),Ia=function(a,m,b,c,d,e){var h=1/3,j=2/3;return[h*a+j*b,h*m+j*c,h*d+j*b,h*e+j*c,d,e]},Ja=function(a,m,b,d,h,j,i,g,f,k){var l=120*q/180,A=q/180*(+h||0),o=[],p,r=B(function(a,b,m){var n=a*c.cos(m)-b*c.sin(m),a=a*c.sin(m)+b*c.cos(m);return{x:n,y:a}});if(k)w=k[0],p=k[1],j=k[2],D=k[3];else{p=r(a,m,-A);a=p.x;m=p.y;p=r(g,f,-A);g=p.x;f=p.y;c.cos(q/180*h);c.sin(q/180*h);
p=(a-g)/2;w=(m-f)/2;D=p*p/(b*b)+w*w/(d*d);1<D&&(D=c.sqrt(D),b*=D,d*=D);var D=b*b,Q=d*d,D=(j==i?-1:1)*c.sqrt(u((D*Q-D*w*w-Q*p*p)/(D*w*w+Q*p*p))),j=D*b*w/d+(a+g)/2,D=D*-d*p/b+(m+f)/2,w=c.asin(((m-D)/d).toFixed(9));p=c.asin(((f-D)/d).toFixed(9));w=a<j?q-w:w;p=g<j?q-p:p;0>w&&(w=2*q+w);0>p&&(p=2*q+p);i&&w>p&&(w-=2*q);!i&&p>w&&(p-=2*q)}if(u(p-w)>l){var o=p,Q=g,t=f;p=w+l*(i&&p>w?1:-1);g=j+b*c.cos(p);f=D+d*c.sin(p);o=Ja(g,f,b,d,h,0,i,Q,t,[p,o,j,D])}j=p-w;h=c.cos(w);l=c.sin(w);i=c.cos(p);p=c.sin(p);j=c.tan(j/
4);b=4/3*b*j;j*=4/3*d;d=[a,m];a=[a+b*l,m-j*h];m=[g+b*p,f-j*i];g=[g,f];a[0]=2*d[0]-a[0];a[1]=2*d[1]-a[1];if(k)return[a,m,g][E](o);o=[a,m,g][E](o).join()[e](",");k=[];g=0;for(f=o.length;g<f;g++)k[g]=g%2?r(o[g-1],o[g],A).y:r(o[g],o[g+1],A).x;return k},ga=function(a,b,n,c,d,e,h,j,i){var f=1-i;return{x:g(f,3)*a+3*g(f,2)*i*n+3*f*i*i*d+g(i,3)*h,y:g(f,3)*b+3*g(f,2)*i*c+3*f*i*i*e+g(i,3)*j}},db=B(function(a,b,n,d,e,i,g,f){var k=e-2*n+a-(g-2*e+n),q=2*(n-a)-2*(e-n),l=a-n,p=(-q+c.sqrt(q*q-4*k*l))/2/k,A=(-q-c.sqrt(q*
q-4*k*l))/2/k,o=[b,f],r=[a,g],D;"1e12"<u(p)&&(p=0.5);"1e12"<u(A)&&(A=0.5);0<p&&1>p&&(D=ga(a,b,n,d,e,i,g,f,p),r.push(D.x),o.push(D.y));0<A&&1>A&&(D=ga(a,b,n,d,e,i,g,f,A),r.push(D.x),o.push(D.y));k=i-2*d+b-(f-2*i+d);q=2*(d-b)-2*(i-d);l=b-d;p=(-q+c.sqrt(q*q-4*k*l))/2/k;A=(-q-c.sqrt(q*q-4*k*l))/2/k;"1e12"<u(p)&&(p=0.5);"1e12"<u(A)&&(A=0.5);0<p&&1>p&&(D=ga(a,b,n,d,e,i,g,f,p),r.push(D.x),o.push(D.y));0<A&&1>A&&(D=ga(a,b,n,d,e,i,g,f,A),r.push(D.x),o.push(D.y));return{min:{x:j[H](0,r),y:j[H](0,o)},max:{x:h[H](0,
r),y:h[H](0,o)}}}),ba=i._path2curve=B(function(a,b){var n=Ha(a),c=b&&Ha(b),d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},j=function(a,b){var m,c;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"][E](Ja[H](0,[b.x,b.y][E](a.slice(1))));break;case "S":m=b.x+(b.x-(b.bx||b.x));c=b.y+(b.y-(b.by||b.y));a=["C",m,c][E](a.slice(1));break;case "T":b.qx=b.x+(b.x-(b.qx||b.x));
b.qy=b.y+(b.y-(b.qy||b.y));a=["C"][E](Ia(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"][E](Ia(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"][E]([b.x,b.y,a[1],a[2],a[1],a[2]]);break;case "H":a=["C"][E]([b.x,b.y,a[1],b.y,a[1],b.y]);break;case "V":a=["C"][E]([b.x,b.y,b.x,a[1],b.x,a[1]]);break;case "Z":a=["C"][E]([b.x,b.y,b.X,b.Y,b.X,b.Y])}return a},i=function(a,b){if(7<a[b].length){a[b].shift();for(var m=a[b];m.length;)a.splice(b++,0,["C"][E](m.splice(0,6)));a.splice(b,
1);k=h(n.length,c&&c.length||0)}},g=function(a,b,m,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),m.bx=0,m.by=0,m.x=a[e][1],m.y=a[e][2],k=h(n.length,c&&c.length||0))},f=0,k=h(n.length,c&&c.length||0);for(;f<k;f++){n[f]=j(n[f],d);i(n,f);c&&(c[f]=j(c[f],e));c&&i(c,f);g(n,c,d,e,f);g(c,n,e,d,f);var u=n[f],q=c&&c[f],l=u.length,p=c&&q.length;d.x=u[l-2];d.y=u[l-1];d.bx=N(u[l-4])||d.x;d.by=N(u[l-3])||d.y;e.bx=c&&(N(q[p-4])||e.x);e.by=c&&(N(q[p-3])||e.y);e.x=c&&q[p-2];e.y=c&&q[p-1]}return c?
[n,c]:n},null,da);i._parseDots=B(function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e={},h=a[c].match(/^([^:]*):?([\d\.]*)/);e.color=i.getRGB(h[1]);if(e.color.error)return null;e.color=e.color.hex;h[2]&&(e.offset=h[2]+"%");b.push(e)}for(c=1,d=b.length-1;c<d;c++)if(!b[c].offset){a=N(b[c-1].offset||0);h=0;for(e=c+1;e<d;e++)if(b[e].offset){h=b[e].offset;break}h||(h=100,e=d);h=N(h);for(h=(h-a)/(e-c+1);c<e;c++)a+=h,b[c].offset=a+"%"}return b});var ha=i._tear=function(a,b){a==b.top&&(b.top=a.prev);a==
b.bottom&&(b.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)};i._tofront=function(a,b){b.top!==a&&(ha(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)};i._toback=function(a,b){b.bottom!==a&&(ha(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)};i._insertafter=function(a,b,c){ha(a,c);b==c.top&&(c.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a};i._insertbefore=function(a,b,c){ha(a,c);b==c.bottom&&(c.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;
b.prev=a;a.next=b};var Qa=i._extractTransform=function(a,b){if(null==b)return a._.transform;var b=F(b).replace(/\.{3}|\u2026/g,a._.transform||""),c=i.parseTransformString(b),d=0,e=0,h=0,j=1,f=1,g=a._,k=new v;g.transform=c||[];if(c)for(var u=0,q=c.length;u<q;u++){var l=c[u],p=l.length,A=F(l[0]).toLowerCase(),o=l[0]!=A,r=o?k.invert():0,w,t,z,y,B;"t"==A&&3==p?o?(w=r.x(0,0),t=r.y(0,0),z=r.x(l[1],l[2]),y=r.y(l[1],l[2]),k.translate(z-w,y-t)):k.translate(l[1],l[2]):"r"==A?2==p?(B=B||a.getBBox(1),k.rotate(l[1],
B.x+B.width/2,B.y+B.height/2),d+=l[1]):4==p&&(o?(z=r.x(l[2],l[3]),y=r.y(l[2],l[3]),k.rotate(l[1],z,y)):k.rotate(l[1],l[2],l[3]),d+=l[1]):"s"==A?2==p||3==p?(B=B||a.getBBox(1),k.scale(l[1],l[p-1],B.x+B.width/2,B.y+B.height/2),j*=l[1],f*=l[p-1]):5==p&&(o?(z=r.x(l[3],l[4]),y=r.y(l[3],l[4]),k.scale(l[1],l[2],z,y)):k.scale(l[1],l[2],l[3],l[4]),j*=l[1],f*=l[2]):"m"==A&&7==p&&k.add(l[1],l[2],l[3],l[4],l[5],l[6]);g.dirtyT=1;a.matrix=k}a.matrix=k;g.sx=j;g.sy=f;g.deg=d;g.dx=e=k.e;g.dy=h=k.f;1==j&&1==f&&!d&&
g.bbox?(g.bbox.x+=+e,g.bbox.y+=+h):g.dirtyT=1},Ka=function(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},Pa=i._equaliseTransform=function(a,b){b=F(b).replace(/\.{3}|\u2026/g,a);a=i.parseTransformString(a)||[];b=i.parseTransformString(b)||[];for(var c=h(a.length,b.length),d=[],e=[],j=0,g,f,k,l;j<c;j++){k=a[j]||Ka(b[j]);l=b[j]||Ka(k);
if(k[0]!=l[0]||"r"==k[0].toLowerCase()&&(k[2]!=l[2]||k[3]!=l[3])||"s"==k[0].toLowerCase()&&(k[3]!=l[3]||k[4]!=l[4]))return;d[j]=[];e[j]=[];for(g=0,f=h(k.length,l.length);g<f;g++)g in k&&(d[j][g]=k[g]),g in l&&(e[j][g]=l[g])}return{from:d,to:e}};i._getContainer=function(a,b,c,d){var e;e=null==d&&!i.is(a,"object")?r.doc.getElementById(a):a;if(null!=e)return e.tagName?null==b?{container:e,width:e.style.pixelWidth||e.offsetWidth,height:e.style.pixelHeight||e.offsetHeight}:{container:e,width:b,height:c}:
{container:1,x:a,y:b,width:c,height:d}};i.pathToRelative=eb;i._engine={};i.path2curve=ba;i.matrix=function(a,b,c,d,e,h){return new v(a,b,c,d,e,h)};(function(a){function b(a){var m=c.sqrt(d(a));a[0]&&(a[0]/=m);a[1]&&(a[1]/=m)}function d(a){return a[0]*a[0]+a[1]*a[1]}a.add=function(a,b,c,m,d,e){var n=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],b=[[a,c,d],[b,m,e],[0,0,1]];a&&a instanceof v&&(b=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(a=0;3>a;a++)for(c=0;3>c;c++){for(m=d=0;3>
m;m++)d+=h[a][m]*b[m][c];n[a][c]=d}this.a=n[0][0];this.b=n[1][0];this.c=n[0][1];this.d=n[1][1];this.e=n[0][2];this.f=n[1][2]};a.invert=function(){var a=this.a*this.d-this.b*this.c;return new v(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c*this.f-this.d*this.e)/a,(this.b*this.e-this.a*this.f)/a)};a.clone=function(){return new v(this.a,this.b,this.c,this.d,this.e,this.f)};a.translate=function(a,b){this.add(1,0,0,1,a,b)};a.scale=function(a,b,c,m){null==b&&(b=a);(c||m)&&this.add(1,0,0,1,c,m);this.add(a,
0,0,b,0,0);(c||m)&&this.add(1,0,0,1,-c,-m)};a.rotate=function(a,b,m){a=i.rad(a);b=b||0;m=m||0;var d=+c.cos(a).toFixed(9),a=+c.sin(a).toFixed(9);this.add(d,a,-a,d,b,m);this.add(1,0,0,1,-b,-m)};a.x=function(a,b){return a*this.a+b*this.c+this.e};a.y=function(a,b){return a*this.b+b*this.d+this.f};a.get=function(a){return+this[F.fromCharCode(97+a)].toFixed(4)};a.toString=function(){return i.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),
this.get(2),this.get(1),this.get(3),0,0].join()};a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};a.split=function(){var a={};a.dx=this.e;a.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];a.scalex=c.sqrt(d(e[0]));b(e[0]);a.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1];
e[1]=[e[1][0]-e[0][0]*a.shear,e[1][1]-e[0][1]*a.shear];a.scaley=c.sqrt(d(e[1]));b(e[1]);a.shear/=a.scaley;var h=-e[0][1],e=e[1][1];0>e?(a.rotate=i.deg(c.acos(e)),0>h&&(a.rotate=360-a.rotate)):a.rotate=i.deg(c.asin(h));a.isSimple=!+a.shear.toFixed(9)&&(a.scalex.toFixed(9)==a.scaley.toFixed(9)||!a.rotate);a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate;a.noRotation=!+a.shear.toFixed(9)&&!a.rotate;return a};a.toTransformString=function(a){a=a||this[e]();return a.isSimple?
(a.scalex=+a.scalex.toFixed(4),a.scaley=+a.scaley.toFixed(4),a.rotate=+a.rotate.toFixed(4),(a.dx&&a.dy?"t"+[a.dx,a.dy]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[a.rotate,0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}})(v.prototype);var ia=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(ia&&4>ia[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==
navigator.vendor&&ia&&8>ia[1]?C.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:C.safari=ab;for(var fb=function(){this.returnValue=!1},gb=function(){return this.originalEvent.preventDefault()},hb=function(){this.cancelBubble=!0},ib=function(){return this.originalEvent.stopPropagation()},jb=function(){if(r.doc.addEventListener)return function(a,b,c,e){var d=O&&f[b]?f[b]:b,h=function(d){var h=d.clientX+(r.doc.documentElement.scrollLeft||
r.doc.body.scrollLeft),j=d.clientY+(r.doc.documentElement.scrollTop||r.doc.body.scrollTop);if(O&&f[G](b))for(var g=0,i=d.targetTouches&&d.targetTouches.length;g<i;g++)if(d.targetTouches[g].target==a){i=d;d=d.targetTouches[g];d.originalEvent=i;d.preventDefault=gb;d.stopPropagation=ib;break}return c.call(e,d,h,j)};a.addEventListener(d,h,!1);return function(){a.removeEventListener(d,h,!1);return!0}};if(r.doc.attachEvent)return function(a,b,c,d){var e=function(a){var a=a||r.win.event,b=a.clientX+(r.doc.documentElement.scrollLeft||
r.doc.body.scrollLeft),e=a.clientY+(r.doc.documentElement.scrollTop||r.doc.body.scrollTop);a.preventDefault=a.preventDefault||fb;a.stopPropagation=a.stopPropagation||hb;return c.call(d,a,b,e)};a.attachEvent("on"+b,e);return function(){a.detachEvent("on"+b,e);return!0}}}(),Z=[],ra=function(a){for(var b=a.clientX,c=a.clientY,d=r.doc.documentElement.scrollTop||r.doc.body.scrollTop,e=r.doc.documentElement.scrollLeft||r.doc.body.scrollLeft,h,j=Z.length;j--;){h=Z[j];if(O)for(var g=a.touches.length,f;g--;){if(f=
a.touches[g],f.identifier==h.el._drag.id){b=f.clientX;c=f.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var g=h.el.node,i;f=g.nextSibling;var k=g.parentNode,l=g.style.display;r.win.opera&&k.removeChild(g);g.style.display="none";i=h.el.paper.getElementByPoint(b,c);g.style.display=l;r.win.opera&&(f?k.insertBefore(g,f):k.appendChild(g));i&&eve("drag.over."+h.el.id,h.el,i);b+=e;c+=d;eve("drag.move."+h.el.id,h.move_scope||h.el,b-h.el._drag.x,c-h.el._drag.y,
b,c,a)}},sa=function(a){i.unmousemove(ra).unmouseup(sa);for(var b=Z.length,c;b--;)c=Z[b],c.el._drag={},eve("drag.end."+c.el.id,c.end_scope||c.start_scope||c.move_scope||c.el,a);Z=[]},J=i.el={},La=k.length;La--;)(function(a){i[a]=J[a]=function(b,c){i.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:jb(this.shape||this.node||r.doc,a,b,c||this)}));return this};i["un"+a]=J["un"+a]=function(b){for(var c=this.events,d=c.length;d--;)if(c[d].name==a&&c[d].f==b){c[d].unbind();
c.splice(d,1);!c.length&&delete this.events;break}return this}})(k[La]);J.data=function(a,b){var c=ca[this.id]=ca[this.id]||{};if(1==arguments.length){if(i.is(a,"object")){for(var d in a)a[G](d)&&this.data(d,a[d]);return this}eve("data.get."+this.id,this,c[a],a);return c[a]}c[a]=b;eve("data.set."+this.id,this,b,a);return this};J.removeData=function(a){null==a?ca[this.id]={}:ca[this.id]&&delete ca[this.id][a];return this};J.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)};J.unhover=
function(a,b){return this.unmouseover(a).unmouseout(b)};var $=[];J.drag=function(a,b,c,d,e,h){function j(g){(g.originalEvent||g).preventDefault();var f=r.doc.documentElement.scrollTop||r.doc.body.scrollTop,k=r.doc.documentElement.scrollLeft||r.doc.body.scrollLeft;this._drag.x=g.clientX+k;this._drag.y=g.clientY+f;this._drag.id=g.identifier;!Z.length&&i.mousemove(ra).mouseup(sa);Z.push({el:this,move_scope:d,start_scope:e,end_scope:h});b&&eve.on("drag.start."+this.id,b);a&&eve.on("drag.move."+this.id,
a);c&&eve.on("drag.end."+this.id,c);eve("drag.start."+this.id,e||d||this,g.clientX+k,g.clientY+f,g)}this._drag={};$.push({el:this,start:j});this.mousedown(j);return this};J.onDragOver=function(a){a?eve.on("drag.over."+this.id,a):eve.unbind("drag.over."+this.id)};J.undrag=function(){for(var a=$.length;a--;)$[a].el==this&&(this.unmousedown($[a].start),$.splice(a,1),eve.unbind("drag.*."+this.id));!$.length&&i.unmousemove(ra).unmouseup(sa)};C.circle=function(a,b,c){a=i._engine.circle(this,a||0,b||0,c||
0);this.__set__&&this.__set__.push(a);return a};C.rect=function(a,b,c,d,e){a=i._engine.rect(this,a||0,b||0,c||0,d||0,e||0);this.__set__&&this.__set__.push(a);return a};C.ellipse=function(a,b,c,d){a=i._engine.ellipse(this,a||0,b||0,c||0,d||0);this.__set__&&this.__set__.push(a);return a};C.path=function(a){a&&!i.is(a,"string")&&!i.is(a[0],p)&&(a+="");var b=i._engine.path(i.format[H](i,arguments),this);this.__set__&&this.__set__.push(b);return b};C.image=function(a,b,c,d,e){a=i._engine.image(this,a||
"about:blank",b||0,c||0,d||0,e||0);this.__set__&&this.__set__.push(a);return a};C.text=function(a,b,c){a=i._engine.text(this,a||0,b||0,F(c));this.__set__&&this.__set__.push(a);return a};C.set=function(a){!i.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new aa(a);this.__set__&&this.__set__.push(b);return b};C.setStart=function(a){this.__set__=a||this.set()};C.setFinish=function(){var a=this.__set__;delete this.__set__;return a};C.setSize=function(a,b){return i._engine.setSize.call(this,
a,b)};C.setViewBox=function(a,b,c,d,e){return i._engine.setViewBox.call(this,a,b,c,d,e)};C.top=C.bottom=null;C.raphael=i;C.getElementByPoint=function(a,b){var c,d,e=this.canvas,h=r.doc.elementFromPoint(a,b);if(r.win.opera&&"svg"==h.tagName){d=e.getBoundingClientRect();c=e.ownerDocument;var j=c.body,g=c.documentElement;c=d.top+(r.win.pageYOffset||g.scrollTop||j.scrollTop)-(g.clientTop||j.clientTop||0);d=d.left+(r.win.pageXOffset||g.scrollLeft||j.scrollLeft)-(g.clientLeft||j.clientLeft||0);j=e.createSVGRect();
j.x=a-d;j.y=b-c;j.width=j.height=1;c=e.getIntersectionList(j,null);c.length&&(h=c[c.length-1])}if(!h)return null;for(;h.parentNode&&h!=e.parentNode&&!h.raphael;)h=h.parentNode;h==this.canvas.parentNode&&(h=e);h=h&&h.raphael?this.getById(h.raphaelid):null;return h};C.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null};C.forEach=function(a,b){for(var c=this.bottom;c&&!(!1===a.call(b,c));)c=c.next;return this};J.getBBox=function(a){if(this.removed)return{};var b=this._;
if(a){if(b.dirty||!b.bboxwt)this.realPath=pa[this.type](this),b.bboxwt=Ga(this.realPath),b.bboxwt.toString=y,b.dirty=0;return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath)b.bboxwt=0,this.realPath=pa[this.type](this);b.bbox=Ga(Ca(this.realPath,this.matrix));b.bbox.toString=y;b.dirty=b.dirtyT=0}return b.bbox};J.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a};J.glow=function(a){if("text"==
this.type)return null;for(var a=a||{},b=(a.width||10)+(+this.attr("stroke-width")||1),c=a.fill||!1,d=a.opacity||0.5,e=a.offsetx||0,h=a.offsety||0,a=a.color||"#000",j=b/2,g=this.paper,f=g.set(),i=this.realPath||pa[this.type](this),i=this.matrix?Ca(i,this.matrix):i,k=1;k<j+1;k++)f.push(g.path(i).attr({stroke:a,fill:c?a:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b/j*k).toFixed(3),opacity:+(d/j).toFixed(3)}));return f.insertBefore(this).translate(e,h)};var ta={},ja=function(a,
b,c,d,e,h,j,f,k){var l=0,u=100,q=[a,b,c,d,e,h,j,f].join(),p=ta[q],A,o;!p&&(ta[q]=p={data:[]});p.timer&&clearTimeout(p.timer);p.timer=setTimeout(function(){delete ta[q]},2E3);if(null!=k&&!p.precision){var r=ja(a,b,c,d,e,h,j,f);p.precision=10*~~r;p.data=[]}u=p.precision||u;for(r=0;r<u+1;r++){p.data[r*u]?o=p.data[r*u]:(o=i.findDotsAtSegment(a,b,c,d,e,h,j,f,r/u),p.data[r*u]=o);r&&(l+=g(g(A.x-o.x,2)+g(A.y-o.y,2),0.5));if(null!=k&&l>=k)return o;A=o}if(null==k)return l},ua=function(a,b){return function(c,
d,e){for(var c=ba(c),h,j,g,f,k="",l={},u,q=0,p=0,A=c.length;p<A;p++){g=c[p];if("M"==g[0])h=+g[1],j=+g[2];else{f=ja(h,j,g[1],g[2],g[3],g[4],g[5],g[6]);if(q+f>d){if(b&&!l.start){u=ja(h,j,g[1],g[2],g[3],g[4],g[5],g[6],d-q);k+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y];if(e)return k;l.start=k;k=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,g[5],g[6]].join();q+=f;h=+g[5];j=+g[6];continue}if(!a&&!b)return u=ja(h,j,g[1],g[2],g[3],g[4],g[5],g[6],d-q),{x:u.x,y:u.y,alpha:u.alpha}}q+=f;h=+g[5];j=+g[6]}k+=
g.shift()+g}l.end=k;u=a?q:b?l:i.findDotsAtSegment(h,j,g[0],g[1],g[2],g[3],g[4],g[5],1);u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha});return u}},Ma=ua(1),Na=ua(),va=ua(0,1);i.getTotalLength=Ma;i.getPointAtLength=Na;i.getSubpath=function(a,b,c){if(1.0E-6>this.getTotalLength(a)-c)return va(a,b).end;a=va(a,c,1);return b?va(a,b).end:a};J.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():Ma(this.attrs.path)};J.getPointAtLength=function(a){if("path"==this.type)return Na(this.attrs.path,
a)};J.getSubpath=function(a,b){if("path"==this.type)return i.getSubpath(this.attrs.path,a,b)};var U=i.easing_formulas={linear:function(a){return a},"<":function(a){return g(a,1.7)},">":function(a){return g(a,0.48)},"<>":function(a){var b=0.48-a/1.04,d=c.sqrt(0.1734+b*b),a=d-b,a=g(u(a),1/3)*(0>a?-1:1),b=-d-b,b=g(u(b),1/3)*(0>b?-1:1),a=a+b+0.5;return 3*(1-a)*a*a+a*a*a},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){return a==
!!a?a:g(2,-10*a)*c.sin(2*(a-0.075)*q/0.3)+1},bounce:function(a){var b;a<1/2.75?b=7.5625*a*a:a<2/2.75?(a-=1.5/2.75,b=7.5625*a*a+0.75):a<2.5/2.75?(a-=2.25/2.75,b=7.5625*a*a+0.9375):(a-=2.625/2.75,b=7.5625*a*a+0.984375);return b}};U.easeIn=U["ease-in"]=U["<"];U.easeOut=U["ease-out"]=U[">"];U.easeInOut=U["ease-in-out"]=U["<>"];U["back-in"]=U.backIn;U["back-out"]=U.backOut;var L=[],ya=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||
window.msRequestAnimationFrame||function(a){setTimeout(a,16)},la=function(){for(var a=+new Date,b=0;b<L.length;b++){var c=L[b];if(!c.el.removed&&!c.paused){var e=a-c.start,h=c.ms,j=c.easing,g=c.from,f=c.diff,k=c.to,u=c.el,l={},q,p={},o;c.initstatus?(e=(c.initstatus*c.anim.top-c.prev)/(c.percent-c.prev)*h,c.status=c.initstatus,delete c.initstatus,c.stop&&L.splice(b--,1)):c.status=(c.prev+(c.percent-c.prev)*(e/h))/c.anim.top;if(!(0>e))if(e<h){var r=j(e/h),t;for(t in g)if(g[G](t)){switch(ka[t]){case A:q=
+g[t]+r*h*f[t];break;case "colour":q="rgb("+[wa(ma(g[t].r+r*h*f[t].r)),wa(ma(g[t].g+r*h*f[t].g)),wa(ma(g[t].b+r*h*f[t].b))].join()+")";break;case "path":q=[];e=0;for(j=g[t].length;e<j;e++){q[e]=[g[t][e][0]];k=1;for(p=g[t][e].length;k<p;k++)q[e][k]=+g[t][e][k]+r*h*f[t][e][k];q[e]=q[e].join(T)}q=q.join(T);break;case "transform":if(f[t].real){q=[];for(e=0,j=g[t].length;e<j;e++){q[e]=[g[t][e][0]];for(k=1,p=g[t][e].length;k<p;k++)q[e][k]=g[t][e][k]+r*h*f[t][e][k]}}else q=function(a){return+g[t][a]+r*h*
f[t][a]},q=[["m",q(0),q(1),q(2),q(3),q(4),q(5)]];break;case "csv":if("clip-rect"==t)for(q=[],e=4;e--;)q[e]=+g[t][e]+r*h*f[t][e];break;default:j=[][E](g[t]);for(q=[],e=u.paper.customAttributes[t].length;e--;)q[e]=+j[e]+r*h*f[t][e]}l[t]=q}u.attr(l);(function(a,b,c){setTimeout(function(){eve("anim.frame."+a,b,c)})})(u.id,u,c.anim)}else{(function(a,b,c){setTimeout(function(){eve("anim.frame."+b.id,b,c);eve("anim.finish."+b.id,b,c);i.is(a,"function")&&a.call(b)})})(c.callback,u,c.anim);u.attr(k);L.splice(b--,
1);if(1<c.repeat&&!c.next){for(o in k)k[G](o)&&(p[o]=c.totalOrigin[o]);c.el.attr(p);d(c.anim,c.el,c.anim.percents[0],null,c.totalOrigin,c.repeat-1)}c.next&&!c.stop&&d(c.anim,c.el,c.next,null,c.totalOrigin,c.repeat)}}}i.svg&&u&&u.paper&&u.paper.safari();L.length&&ya(la)},wa=function(a){return 255<a?255:0>a?0:a};J.animateWith=function(a,b,c,e,d,h){c=c?i.animation(c,e,d,h):b;a=a.status(b);return this.animate(c).status(c,a*b.ms/c.ms)};J.onAnimation=function(a){a?eve.on("anim.frame."+this.id,a):eve.unbind("anim.frame."+
this.id);return this};l.prototype.delay=function(a){var b=new l(this.anim,this.ms);b.times=this.times;b.del=+a||0;return b};l.prototype.repeat=function(a){var b=new l(this.anim,this.ms);b.del=this.del;b.times=c.floor(h(a,0))||1;return b};i.animation=function(a,b,c,e){if(a instanceof l)return a;if(i.is(c,"function")||!c)e=e||c||null,c=null;a=Object(a);b=+b||0;var d={},h,j;for(j in a)a[G](j)&&N(j)!=j&&N(j)+"%"!=j&&(h=!0,d[j]=a[j]);if(!h)return new l(a,b);c&&(d.easing=c);e&&(d.callback=e);return new l({100:d},
b)};J.animate=function(a,b,c,e){if(this.removed)return e&&e.call(this),this;a=a instanceof l?a:i.animation(a,b,c,e);d(a,this,a.percents[0],null,this.attr());return this};J.setTime=function(a,b){a&&null!=b&&this.status(a,j(b,a.ms)/a.ms);return this};J.status=function(a,b){var c=[],e=0,h,g;if(null!=b)return d(a,this,-1,j(b,1)),this;for(h=L.length;e<h;e++)if(g=L[e],g.el.id==this.id&&(!a||g.anim==a)){if(a)return g.status;c.push({anim:g.anim,status:g.status})}return a?0:c};J.pause=function(a){for(var b=
0;b<L.length;b++)L[b].el.id==this.id&&(!a||L[b].anim==a)&&!1!==eve("anim.pause."+this.id,this,L[b].anim)&&(L[b].paused=!0);return this};J.resume=function(a){for(var b=0;b<L.length;b++)if(L[b].el.id==this.id&&(!a||L[b].anim==a)){var c=L[b];!1!==eve("anim.resume."+this.id,this,c.anim)&&(delete c.paused,this.status(c.anim,c.status))}return this};J.stop=function(a){for(var b=0;b<L.length;b++)L[b].el.id==this.id&&(!a||L[b].anim==a)&&!1!==eve("anim.stop."+this.id,this,L[b].anim)&&L.splice(b--,1);return this};
J.toString=function(){return"Rapha\u00ebl\u2019s object"};var aa=function(a){this.items=[];this.length=0;this.type="set";if(a)for(var b=0,c=a.length;b<c;b++)a[b]&&(a[b].constructor==J.constructor||a[b].constructor==aa)&&(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},S=aa.prototype;S.push=function(){for(var a,b,c=0,e=arguments.length;c<e;c++)a=arguments[c],a&&(a.constructor==J.constructor||a.constructor==aa)&&(b=this.items.length,this[b]=this.items[b]=a,this.length++);
return this};S.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};S.forEach=function(a,b){for(var c=0,e=this.items.length;c<e&&!(!1===a.call(b,this.items[c],c));c++);return this};for(var xa in J)J[G](xa)&&(S[xa]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][H](c,b)})}}(xa));S.attr=function(a,b){if(a&&i.is(a,p)&&i.is(a[0],"object"))for(var c=0,e=a.length;c<e;c++)this.items[c].attr(a[c]);else{c=0;for(e=this.items.length;c<e;c++)this.items[c].attr(a,
b)}return this};S.clear=function(){for(;this.length;)this.pop()};S.splice=function(a,b,c){a=0>a?h(this.length+a,0):a;b=h(0,j(this.length-a,b));var e=[],d=[],g=[],f;for(f=2;f<arguments.length;f++)g.push(arguments[f]);for(f=0;f<b;f++)d.push(this[a+f]);for(;f<this.length-a;f++)e.push(this[a+f]);var k=g.length;for(f=0;f<k+e.length;f++)this.items[a+f]=this[a+f]=f<k?g[f]:e[f-k];for(f=this.items.length=this.length-=b-k;this[f];)delete this[f++];return new aa(d)};S.exclude=function(a){for(var b=0,c=this.length;b<
c;b++)if(this[b]==a)return this.splice(b,1),!0};S.animate=function(a,b,c,e){(i.is(c,"function")||!c)&&(e=c||null);var d=this.items.length,h=d,j=this,g;if(!d)return this;e&&(g=function(){!--d&&e.call(j)});c=i.is(c,"string")?c:g;b=i.animation(a,b,c,g);for(a=this.items[--h].animate(b);h--;)this.items[h]&&!this.items[h].removed&&this.items[h].animateWith(a,b);return this};S.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this};S.getBBox=function(){for(var a=
[],b=[],c=[],e=[],d=this.items.length;d--;)if(!this.items[d].removed){var g=this.items[d].getBBox();a.push(g.x);b.push(g.y);c.push(g.x+g.width);e.push(g.y+g.height)}a=j[H](0,a);b=j[H](0,b);return{x:a,y:b,width:h[H](0,c)-a,height:h[H](0,e)-b}};S.clone=function(a){for(var a=new aa,b=0,c=this.items.length;b<c;b++)a.push(this.items[b].clone());return a};S.toString=function(){return"Rapha\u00ebl\u2018s set"};i.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},
glyphs:{}},c=a.face["font-family"],e;for(e in a.face)a.face[G](e)&&(b.face[e]=a.face[e]);this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=Y(a.face["units-per-em"],10);for(var d in a.glyphs)if(a.glyphs[G](d)&&(c=a.glyphs[d],b.glyphs[d]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},c.k))for(var h in c.k)c[G](h)&&(b.glyphs[d].k[h]=c.k[h])}return a};C.getFont=function(a,b,c,e){e=e||"normal";
c=c||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(i.fonts){var d=i.fonts[a];if(!d){var a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i"),h;for(h in i.fonts)if(i.fonts[G](h)&&a.test(h)){d=i.fonts[h];break}}var j;if(d){h=0;for(a=d.length;h<a&&!(j=d[h],j.face["font-weight"]==b&&(j.face["font-style"]==c||!j.face["font-style"])&&j.face["font-stretch"]==e);h++);}return j}};C.print=function(a,b,c,d,g,f,k){f=f||"middle";k=h(j(k||0,1),-1);var u=this.set(),l=F(c)[e](""),
q=0;i.is(d,c)&&(d=this.getFont(d));if(d){for(var c=(g||16)/d.face["units-per-em"],p=d.face.bbox[e](X),g=+p[0],f=+p[1]+("baseline"==f?p[3]-p[1]+ +d.face.descent:(p[3]-p[1])/2),p=0,A=l.length;p<A;p++){var o=p&&d.glyphs[l[p-1]]||{},r=d.glyphs[l[p]];q+=p?(o.w||d.w)+(o.k&&o.k[l[p]]||0)+d.w*k:0;r&&r.d&&u.push(this.path(r.d).attr({fill:"#000",stroke:"none",transform:[["t",q*c,0]]}))}u.transform(["...s",c,c,g,f,"t",(a-g)/c,(b-f)/c])}return u};C.add=function(a){if(i.is(a,"array"))for(var b=this.set(),c=0,
e=a.length,d;c<e;c++)d=a[c]||{},z[G](d.type)&&b.push(this[d.type]().attr(d));return b};i.format=function(a,b){var c=i.is(b,p)?[0][E](b):arguments;a&&i.is(a,"string")&&c.length-1&&(a=a.replace(o,function(a,b){return null==c[++b]?"":c[b]}));return a||""};i.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,e){var d=e;c.replace(b,function(a,b,c,e,h){b=b||e;d&&(b in d&&(d=d[b]),"function"==typeof d&&h&&(d=d()))});d=(null==d||d==e?a:d)+
"";return d};return function(b,d){return(""+b).replace(a,function(a,b){return c(a,b,d)})}}();i.ninja=function(){P?r.win.Raphael=K:delete Raphael;return i};i.st=S;(function(a,b,c){function d(){/in/.test(a.readyState)?setTimeout(d,9):i.eve("DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(b,c=function(){a.removeEventListener(b,c,!1);a.readyState="complete"},!1),a.readyState="loading");d()})(document,"DOMContentLoaded");P?r.win.Raphael=i:Raphael=i;eve.on("DOMload",function(){V=!0})})();
window.Raphael.svg&&function(d){var l=String,t=parseFloat,y=parseInt,v=Math,M=v.max,R=v.abs,B=v.pow,i=/[, ]+/,V=d.eve,X={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},z={};d.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var o=function(e,k){if(k){"string"==typeof e&&(e=o(e));for(var f in k)k.hasOwnProperty(f)&&("xlink:"==
f.substring(0,6)?e.setAttributeNS("http://www.w3.org/1999/xlink",f.substring(6),l(k[f])):e.setAttribute(f,l(k[f])))}else e=d._g.doc.createElementNS("http://www.w3.org/2000/svg",e),e.style&&(e.style.webkitTapHighlightColor="rgba(0,0,0,0)");return e},G=function(e,k){var f="linear",b=e.id+k,c=0.5,h=0.5,j=e.node,i=e.paper,g=j.style,q=d._g.doc.getElementById(b);if(!q){k=l(k).replace(d._radial_gradient,function(b,d,e){f="radial";d&&e&&(c=t(d),h=t(e),b=2*(0.5<h)-1,0.25<B(c-0.5,2)+B(h-0.5,2)&&(h=v.sqrt(0.25-
B(c-0.5,2))*b+0.5)&&0.5!=h&&(h=h.toFixed(5)-1.0E-5*b));return""});k=k.split(/\s*\-\s*/);if("linear"==f){var A=k.shift(),A=-t(A);if(isNaN(A))return null;var p=[0,0,v.cos(d.rad(A)),v.sin(d.rad(A))],A=1/(M(R(p[2]),R(p[3]))||1);p[2]*=A;p[3]*=A;0>p[2]&&(p[0]=-p[2],p[2]=0);0>p[3]&&(p[1]=-p[3],p[3]=0)}A=d._parseDots(k);if(!A)return null;b=b.replace(/[\(\)\s,\xb0#]/g,"_");e.gradient&&b!=e.gradient.id&&(i.defs.removeChild(e.gradient),delete e.gradient);if(!e.gradient){q=o(f+"Gradient",{id:b});e.gradient=q;
o(q,"radial"==f?{fx:c,fy:h}:{x1:p[0],y1:p[1],x2:p[2],y2:p[3],gradientTransform:e.matrix.invert()});i.defs.appendChild(q);i=0;for(p=A.length;i<p;i++)q.appendChild(o("stop",{offset:A[i].offset?A[i].offset:i?"100%":"0%","stop-color":A[i].color||"#fff"}))}}o(j,{fill:"url(#"+b+")",opacity:1,"fill-opacity":1});g.fill="";g.opacity=1;g.fillOpacity=1;return 1},r=function(d){var k=d.getBBox(1);o(d.pattern,{patternTransform:d.matrix.invert()+" translate("+k.x+","+k.y+")"})},P=function(e,k,f){if("path"==e.type){for(var b=
l(k).toLowerCase().split("-"),c=e.paper,h=f?"end":"start",j=e.node,i=e.attrs,g=i["stroke-width"],q=b.length,A="classic",p,r,t,v,y,B=3,C=3,E=5;q--;)switch(b[q]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":A=b[q];break;case "wide":C=5;break;case "narrow":C=2;break;case "long":B=5;break;case "short":B=2}"open"==A?(B+=2,C+=2,E+=2,t=1,v=f?4:1,y={fill:"none",stroke:i.stroke}):(v=t=B/2,y={fill:i.stroke,stroke:"none"});e._.arrows?f?(e._.arrows.endPath&&z[e._.arrows.endPath]--,
e._.arrows.endMarker&&z[e._.arrows.endMarker]--):(e._.arrows.startPath&&z[e._.arrows.startPath]--,e._.arrows.startMarker&&z[e._.arrows.startMarker]--):e._.arrows={};if("none"!=A){b="raphael-marker-"+A;q="raphael-marker-"+h+A+B+C;d._g.doc.getElementById(b)?z[b]++:(c.defs.appendChild(o(o("path"),{"stroke-linecap":"round",d:X[A],id:b})),z[b]=1);var F=d._g.doc.getElementById(q),G;F?(z[q]++,G=F.getElementsByTagName("use")[0]):(F=o(o("marker"),{id:q,markerHeight:C,markerWidth:B,orient:"auto",refX:v,refY:C/
2}),G=o(o("use"),{"xlink:href":"#"+b,transform:(f?" rotate(180 "+B/2+" "+C/2+") ":" ")+"scale("+B/E+","+C/E+")","stroke-width":1/((B/E+C/E)/2)}),F.appendChild(G),c.defs.appendChild(F),z[q]=1);o(G,y);c=t*("diamond"!=A&&"oval"!=A);f?(p=e._.arrows.startdx*g||0,r=d.getTotalLength(i.path)-c*g):(p=c*g,r=d.getTotalLength(i.path)-(e._.arrows.enddx*g||0));y={};y["marker-"+h]="url(#"+q+")";if(r||p)y.d=Raphael.getSubpath(i.path,p,r);o(j,y);e._.arrows[h+"Path"]=b;e._.arrows[h+"Marker"]=q;e._.arrows[h+"dx"]=c;
e._.arrows[h+"Type"]=A;e._.arrows[h+"String"]=k}else f?(p=e._.arrows.startdx*g||0,r=d.getTotalLength(i.path)-p):(p=0,r=d.getTotalLength(i.path)-(e._.arrows.enddx*g||0)),e._.arrows[h+"Path"]&&o(j,{d:Raphael.getSubpath(i.path,p,r)}),delete e._.arrows[h+"Path"],delete e._.arrows[h+"Marker"],delete e._.arrows[h+"dx"],delete e._.arrows[h+"Type"],delete e._.arrows[h+"String"];for(y in z)z.hasOwnProperty(y)&&!z[y]&&(e=d._g.doc.getElementById(y))&&e.parentNode.removeChild(e)}},K={"":[0],none:[0],"-":[3,1],
".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},I=function(d,k,f){if(k=K[l(k).toLowerCase()]){for(var b=d.attrs["stroke-width"]||"1",f={round:b,square:b,butt:0}[d.attrs["stroke-linecap"]||f["stroke-linecap"]]||0,c=[],h=k.length;h--;)c[h]=k[h]*b+(h%2?1:-1)*f;o(d.node,{"stroke-dasharray":c.join(",")})}},C=function(e,k){var f=e.node,b=e.attrs,c=f.style.visibility;f.style.visibility="hidden";for(var h in k)if(k.hasOwnProperty(h)&&
d._availableAttrs.hasOwnProperty(h)){var j=k[h];b[h]=j;switch(h){case "blur":e.blur(j);break;case "href":case "title":case "target":var u=f.parentNode;if("a"!=u.tagName.toLowerCase()){var g=o("a");u.insertBefore(g,f);g.appendChild(f);u=g}"target"==h&&"blank"==j?u.setAttributeNS("http://www.w3.org/1999/xlink","show","new"):u.setAttributeNS("http://www.w3.org/1999/xlink",h,j);break;case "cursor":f.style.cursor=j;break;case "transform":e.transform(j);break;case "arrow-start":P(e,j);break;case "arrow-end":P(e,
j,1);break;case "clip-rect":u=l(j).split(i);if(4==u.length){e.clip&&e.clip.parentNode.parentNode.removeChild(e.clip.parentNode);var g=o("clipPath"),q=o("rect");g.id=d.createUUID();o(q,{x:u[0],y:u[1],width:u[2],height:u[3]});g.appendChild(q);e.paper.defs.appendChild(g);o(f,{"clip-path":"url(#"+g.id+")"});e.clip=q}if(!j&&(j=f.getAttribute("clip-path")))j=d._g.doc.getElementById(j.replace(/(^url\(#|\)$)/g,"")),j&&j.parentNode.removeChild(j),o(f,{"clip-path":""}),delete e.clip;break;case "path":"path"==
e.type&&(o(f,{d:j?b.path=d._pathToAbsolute(j):"M0,0"}),e._.dirty=1,e._.arrows&&("startString"in e._.arrows&&P(e,e._.arrows.startString),"endString"in e._.arrows&&P(e,e._.arrows.endString,1)));break;case "width":if(f.setAttribute(h,j),e._.dirty=1,b.fx)h="x",j=b.x;else break;case "x":b.fx&&(j=-b.x-(b.width||0));case "rx":if("rx"==h&&"rect"==e.type)break;case "cx":f.setAttribute(h,j);e.pattern&&r(e);e._.dirty=1;break;case "height":if(f.setAttribute(h,j),e._.dirty=1,b.fy)h="y",j=b.y;else break;case "y":b.fy&&
(j=-b.y-(b.height||0));case "ry":if("ry"==h&&"rect"==e.type)break;case "cy":f.setAttribute(h,j);e.pattern&&r(e);e._.dirty=1;break;case "r":"rect"==e.type?o(f,{rx:j,ry:j}):f.setAttribute(h,j);e._.dirty=1;break;case "src":"image"==e.type&&f.setAttributeNS("http://www.w3.org/1999/xlink","href",j);break;case "stroke-width":if(1!=e._.sx||1!=e._.sy)j/=M(R(e._.sx),R(e._.sy))||1;e.paper._vbSize&&(j*=e.paper._vbSize);f.setAttribute(h,j);b["stroke-dasharray"]&&I(e,b["stroke-dasharray"],k);e._.arrows&&("startString"in
e._.arrows&&P(e,e._.arrows.startString),"endString"in e._.arrows&&P(e,e._.arrows.endString,1));break;case "stroke-dasharray":I(e,j,k);break;case "fill":var A=l(j).match(d._ISURL);if(A){var g=o("pattern"),p=o("image");g.id=d.createUUID();o(g,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});o(p,{x:0,y:0,"xlink:href":A[1]});g.appendChild(p);(function(b){d._preload(A[1],function(){var c=this.offsetWidth,d=this.offsetHeight;o(b,{width:c,height:d});o(p,{width:c,height:d});e.paper.safari()})})(g);
e.paper.defs.appendChild(g);f.style.fill="url(#"+g.id+")";o(f,{fill:"url(#"+g.id+")"});e.pattern=g;e.pattern&&r(e);break}var t=d.getRGB(j);if(t.error){if(("circle"==e.type||"ellipse"==e.type||"r"!=l(j).charAt())&&G(e,j)){if("opacity"in b||"fill-opacity"in b){var v=d._g.doc.getElementById(f.getAttribute("fill").replace(/^url\(#|\)$/g,""));if(v){var z=v.getElementsByTagName("stop");o(z[z.length-1],{"stop-opacity":("opacity"in b?b.opacity:1)*("fill-opacity"in b?b["fill-opacity"]:1)})}}b.gradient=j;b.fill=
"none";break}}else delete k.gradient,delete b.gradient,!d.is(b.opacity,"undefined")&&d.is(k.opacity,"undefined")&&o(f,{opacity:b.opacity}),!d.is(b["fill-opacity"],"undefined")&&d.is(k["fill-opacity"],"undefined")&&o(f,{"fill-opacity":b["fill-opacity"]});t.hasOwnProperty("opacity")&&o(f,{"fill-opacity":1<t.opacity?t.opacity/100:t.opacity});case "stroke":t=d.getRGB(j);f.setAttribute(h,t.hex);"stroke"==h&&t.hasOwnProperty("opacity")&&o(f,{"stroke-opacity":1<t.opacity?t.opacity/100:t.opacity});"stroke"==
h&&e._.arrows&&("startString"in e._.arrows&&P(e,e._.arrows.startString),"endString"in e._.arrows&&P(e,e._.arrows.endString,1));break;case "gradient":("circle"==e.type||"ellipse"==e.type||"r"!=l(j).charAt())&&G(e,j);break;case "opacity":b.gradient&&!b.hasOwnProperty("stroke-opacity")&&o(f,{"stroke-opacity":1<j?j/100:j});case "fill-opacity":if(b.gradient){v=d._g.doc.getElementById(f.getAttribute("fill").replace(/^url\(#|\)$/g,""));v&&(z=v.getElementsByTagName("stop"),o(z[z.length-1],{"stop-opacity":j}));
break}default:"font-size"==h&&(j=y(j,10)+"px"),u=h.replace(/(\-.)/g,function(b){return b.substring(1).toUpperCase()}),f.style[u]=j,e._.dirty=1,f.setAttribute(h,j)}}H(e,k);f.style.visibility=c},H=function(e,k){if("text"==e.type&&(k.hasOwnProperty("text")||k.hasOwnProperty("font")||k.hasOwnProperty("font-size")||k.hasOwnProperty("x")||k.hasOwnProperty("y"))){var f=e.attrs,b=e.node,c=b.firstChild?y(d._g.doc.defaultView.getComputedStyle(b.firstChild,"").getPropertyValue("font-size"),10):10;if(k.hasOwnProperty("text")){for(f.text=
k.text;b.firstChild;)b.removeChild(b.firstChild);for(var h=l(k.text).split("\n"),j=[],i,g=0,q=h.length;g<q;g++)i=o("tspan"),g&&o(i,{dy:1.2*c,x:f.x}),i.appendChild(d._g.doc.createTextNode(h[g])),b.appendChild(i),j[g]=i}else{j=b.getElementsByTagName("tspan");for(g=0,q=j.length;g<q;g++)g?o(j[g],{dy:1.2*c,x:f.x}):o(j[0],{dy:0})}o(b,{x:f.x,y:f.y});e._.dirty=1;b=e._getBBox();(f=f.y-(b.y+b.height/2))&&d.is(f,"finite")&&o(j[0],{dy:f})}},E=function(e,k){this[0]=this.node=e;e.raphael=!0;this.id=d._oid++;e.raphaelid=
this.id;this.matrix=d.matrix();this.realPath=null;this.paper=k;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!k.bottom&&(k.bottom=this);this.prev=k.top;k.top&&(k.top.next=this);k.top=this;this.next=null},O=d.el;E.prototype=O;O.constructor=E;d._engine.path=function(d,k){var f=o("path");k.canvas&&k.canvas.appendChild(f);f=new E(f,k);f.type="path";C(f,{fill:"none",stroke:"#000",path:d});return f};O.rotate=function(d,k,f){if(this.removed)return this;d=l(d).split(i);
d.length-1&&(k=t(d[1]),f=t(d[2]));d=t(d[0]);null==f&&(k=f);if(null==k||null==f)f=this.getBBox(1),k=f.x+f.width/2,f=f.y+f.height/2;this.transform(this._.transform.concat([["r",d,k,f]]));return this};O.scale=function(d,k,f,b){if(this.removed)return this;d=l(d).split(i);d.length-1&&(k=t(d[1]),f=t(d[2]),b=t(d[3]));d=t(d[0]);null==k&&(k=d);null==b&&(f=b);if(null==f||null==b)var c=this.getBBox(1);f=null==f?c.x+c.width/2:f;b=null==b?c.y+c.height/2:b;this.transform(this._.transform.concat([["s",d,k,f,b]]));
return this};O.translate=function(d,k){if(this.removed)return this;d=l(d).split(i);d.length-1&&(k=t(d[1]));d=t(d[0])||0;k=+k||0;this.transform(this._.transform.concat([["t",d,k]]));return this};O.transform=function(e){var k=this._;if(null==e)return k.transform;d._extractTransform(this,e);this.clip&&o(this.clip,{transform:this.matrix.invert()});this.pattern&&r(this);this.node&&o(this.node,{transform:this.matrix});if(1!=k.sx||1!=k.sy)this.attr({"stroke-width":this.attrs.hasOwnProperty("stroke-width")?
this.attrs["stroke-width"]:1});return this};O.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};O.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};O.remove=function(){if(!this.removed){var e=this.paper;e.__set__&&e.__set__.exclude(this);V.unbind("*.*."+this.id);this.gradient&&e.defs.removeChild(this.gradient);d._tear(this,e);this.node.parentNode.removeChild(this.node);for(var k in this)this[k]="function"==typeof this[k]?
d._removedFactory(k):null;this.removed=!0}};O._getBBox=function(){if("none"==this.node.style.display){this.show();var d=!0}var k={};try{k=this.node.getBBox()}catch(f){}finally{k=k||{}}d&&this.hide();return k};O.attr=function(e,k){if(this.removed)return this;if(null==e){var f={},b;for(b in this.attrs)this.attrs.hasOwnProperty(b)&&(f[b]=this.attrs[b]);f.gradient&&"none"==f.fill&&(f.fill=f.gradient)&&delete f.gradient;f.transform=this._.transform;return f}if(null==k&&d.is(e,"string")){if("fill"==e&&
"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==e)return this._.transform;b=e.split(i);for(var f={},c=0,h=b.length;c<h;c++)e=b[c],e in this.attrs?f[e]=this.attrs[e]:d.is(this.paper.customAttributes[e],"function")?f[e]=this.paper.customAttributes[e].def:f[e]=d._availableAttrs[e];return h-1?f:f[b[0]]}if(null==k&&d.is(e,"array")){f={};for(c=0,h=e.length;c<h;c++)f[e[c]]=this.attr(e[c]);return f}null!=k?(f={},f[e]=k):null!=e&&d.is(e,"object")&&(f=e);for(c in f)V("attr."+
c+"."+this.id,this,f[c]);for(c in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(c)&&f.hasOwnProperty(c)&&d.is(this.paper.customAttributes[c],"function"))for(h in b=this.paper.customAttributes[c].apply(this,[].concat(f[c])),this.attrs[c]=f[c],b)b.hasOwnProperty(h)&&(f[h]=b[h]);C(this,f);return this};O.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);
var e=this.paper;e.top!=this&&d._tofront(this,e);return this};O.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;"a"==e.tagName.toLowerCase()?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild);d._toback(this,this.paper);return this};O.insertAfter=function(e){if(this.removed)return this;var k=e.node||e[e.length-1].node;k.nextSibling?k.parentNode.insertBefore(this.node,
k.nextSibling):k.parentNode.appendChild(this.node);d._insertafter(this,e,this.paper);return this};O.insertBefore=function(e){if(this.removed)return this;var k=e.node||e[0].node;k.parentNode.insertBefore(this.node,k);d._insertbefore(this,e,this.paper);return this};O.blur=function(e){if(0!==+e){var k=o("filter"),f=o("feGaussianBlur");this.attrs.blur=e;k.id=d.createUUID();o(f,{stdDeviation:+e||1.5});k.appendChild(f);this.paper.defs.appendChild(k);this._blur=k;o(this.node,{filter:"url(#"+k.id+")"})}else this._blur&&
(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};d._engine.circle=function(d,k,f,b){var c=o("circle");d.canvas&&d.canvas.appendChild(c);d=new E(c,d);d.attrs={cx:k,cy:f,r:b,fill:"none",stroke:"#000"};d.type="circle";o(c,d.attrs);return d};d._engine.rect=function(d,k,f,b,c,h){var j=o("rect");d.canvas&&d.canvas.appendChild(j);d=new E(j,d);d.attrs={x:k,y:f,width:b,height:c,r:h||0,rx:h||0,ry:h||0,fill:"none",stroke:"#000"};d.type=
"rect";o(j,d.attrs);return d};d._engine.ellipse=function(d,k,f,b,c){var h=o("ellipse");d.canvas&&d.canvas.appendChild(h);d=new E(h,d);d.attrs={cx:k,cy:f,rx:b,ry:c,fill:"none",stroke:"#000"};d.type="ellipse";o(h,d.attrs);return d};d._engine.image=function(d,k,f,b,c,h){var j=o("image");o(j,{x:f,y:b,width:c,height:h,preserveAspectRatio:"none"});j.setAttributeNS("http://www.w3.org/1999/xlink","href",k);d.canvas&&d.canvas.appendChild(j);d=new E(j,d);d.attrs={x:f,y:b,width:c,height:h,src:k};d.type="image";
return d};d._engine.text=function(e,k,f,b){var c=o("text");e.canvas&&e.canvas.appendChild(c);e=new E(c,e);e.attrs={x:k,y:f,"text-anchor":"middle",text:b,font:d._availableAttrs.font,stroke:"none",fill:"#000"};e.type="text";C(e,e.attrs);return e};d._engine.setSize=function(d,k){this.width=d||this.width;this.height=k||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this};d._engine.create=
function(){var e=d._getContainer.apply(0,arguments),k=e&&e.container,f=e.x,b=e.y,c=e.width,e=e.height;if(!k)throw Error("SVG container not found.");var h=o("svg"),j;f=f||0;b=b||0;c=c||512;e=e||342;o(h,{height:e,version:1.1,width:c,xmlns:"http://www.w3.org/2000/svg"});1==k?(h.style.cssText="overflow:hidden;position:absolute;left:"+f+"px;top:"+b+"px",d._g.doc.body.appendChild(h),j=1):(h.style.cssText="overflow:hidden;position:relative",k.firstChild?k.insertBefore(h,k.firstChild):k.appendChild(h));k=
new d._Paper;k.width=c;k.height=e;k.canvas=h;k.clear();k._left=k._top=0;j&&(k.renderfix=function(){});k.renderfix();return k};d._engine.setViewBox=function(d,k,f,b,c){V("setViewBox",this,this._viewBox,[d,k,f,b,c]);var h=M(f/this.width,b/this.height),j=this.top,i,g;for(null==d?(this._vbSize&&(h=1),delete this._vbSize,i="0 0 "+this.width+" "+this.height):(this._vbSize=h,i=d+" "+k+" "+f+" "+b),o(this.canvas,{viewBox:i,preserveAspectRatio:c?"meet":"xMinYMin"});h&&j;)g="stroke-width"in j.attrs?j.attrs["stroke-width"]:
1,j.attr({"stroke-width":g}),j._.dirty=1,j._.dirtyT=1,j=j.prev;this._viewBox=[d,k,f,b,!!c];return this};d.prototype.renderfix=function(){var d=this.canvas,i=d.style,f=d.getScreenCTM()||d.createSVGMatrix(),d=-f.e%1,f=-f.f%1;if(d||f)d&&(this._left=(this._left+d)%1,i.left=this._left+"px"),f&&(this._top=(this._top+f)%1,i.top=this._top+"px")};d.prototype.clear=function(){d.eve("clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null;(this.desc=o("desc")).appendChild(d._g.doc.createTextNode("Created with Rapha\u00ebl "+
d.version));e.appendChild(this.desc);e.appendChild(this.defs=o("defs"))};d.prototype.remove=function(){V("remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?d._removedFactory(e):null};var T=d.st,F;for(F in O)O.hasOwnProperty(F)&&!T.hasOwnProperty(F)&&(T[F]=function(d){return function(){var i=arguments;return this.forEach(function(f){f[d].apply(f,i)})}}(F))}(window.Raphael);
window.Raphael.vml&&function(d){var l=String,t=parseFloat,y=Math,v=y.round,M=y.max,R=y.min,B=y.abs,i=/[, ]+/,V=d.eve,X={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},z=/([clmz]),?([^clmz]*)/gi,o=/ progid:\S+Blur\([^\)]+\)/g,G=/-?[^,\s-]+/g,r={path:1,rect:1,image:1},P={circle:1,ellipse:1},K=function(b){var c=/[ahqstv]/ig,e=d._pathToAbsolute;l(b).match(c)&&(e=d._path2curve);c=/[clmz]/g;if(e==d._pathToAbsolute&&!l(b).match(c))return b=l(b).replace(z,function(b,c,d){var e=[],h="m"==c.toLowerCase(),
j=X[c];d.replace(G,function(b){h&&2==e.length&&(j+=e+X["m"==c?"l":"L"],e=[]);e.push(v(21600*b))});return j+e});for(var c=e(b),j,b=[],f=0,g=c.length;f<g;f++){e=c[f];j=c[f][0].toLowerCase();"z"==j&&(j="x");for(var i=1,k=e.length;i<k;i++)j+=v(21600*e[i])+(i!=k-1?",":"");b.push(j)}return b.join(" ")},I=function(b,c,e){var j=d.matrix();j.rotate(-b,0.5,0.5);return{dx:j.x(c,e),dy:j.y(c,e)}},C=function(b,c,d,e,f,g){var i=b._,k=b.matrix,l=i.fillpos,b=b.node,o=b.style,r=1,t="",v=21600/c,y=21600/d;o.visibility=
"hidden";if(c&&d){b.coordsize=B(v)+" "+B(y);o.rotation=g*(0>c*d?-1:1);if(g){var z=I(g,e,f);e=z.dx;f=z.dy}0>c&&(t+="x");0>d&&(t+=" y")&&(r=-1);o.flip=t;b.coordorigin=e*-v+" "+f*-y;if(l||i.fillsize)e=b.getElementsByTagName("fill"),e=e&&e[0],b.removeChild(e),l&&(z=I(g,k.x(l[0],l[1]),k.y(l[0],l[1])),e.position=z.dx*r+" "+z.dy*r),i.fillsize&&(e.size=i.fillsize[0]*B(c)+" "+i.fillsize[1]*B(d)),b.appendChild(e);o.visibility="visible"}};d.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+
this.version};var H=function(b,c,d){for(var c=l(c).toLowerCase().split("-"),d=d?"end":"start",e=c.length,f="classic",g="medium",i="medium";e--;)switch(c[e]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":f=c[e];break;case "wide":case "narrow":i=c[e];break;case "long":case "short":g=c[e]}b=b.node.getElementsByTagName("stroke")[0];b[d+"arrow"]=f;b[d+"arrowlength"]=g;b[d+"arrowwidth"]=i},E=function(b,c){b.attrs=b.attrs||{};var h=b.node,j=b.attrs,f=h.style,g=r[b.type]&&
(c.x!=j.x||c.y!=j.y||c.width!=j.width||c.height!=j.height||c.cx!=j.cx||c.cy!=j.cy||c.rx!=j.rx||c.ry!=j.ry||c.r!=j.r),k=P[b.type]&&(j.cx!=c.cx||j.cy!=c.cy||j.r!=c.r||j.rx!=c.rx||j.ry!=c.ry),o;for(o in c)c.hasOwnProperty(o)&&(j[o]=c[o]);g&&(j.path=d._getPath[b.type](b),b._.dirty=1);c.href&&(h.href=c.href);c.title&&(h.title=c.title);c.target&&(h.target=c.target);c.cursor&&(f.cursor=c.cursor);"blur"in c&&b.blur(c.blur);if(c.path&&"path"==b.type||g)h.path=K(~l(j.path).toLowerCase().indexOf("r")?d._pathToAbsolute(j.path):
j.path),"image"==b.type&&(b._.fillpos=[j.x,j.y],b._.fillsize=[j.width,j.height],C(b,1,1,0,0,0));"transform"in c&&b.transform(c.transform);if(k){g=+j.cx;k=+j.cy;o=+j.rx||+j.r||0;var p=+j.ry||+j.r||0;h.path=d.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",v(21600*(g-o)),v(21600*(k-p)),v(21600*(g+o)),v(21600*(k+p)),v(21600*g))}if("clip-rect"in c){g=l(c["clip-rect"]).split(i);if(4==g.length)g[2]=+g[2]+ +g[0],g[3]=+g[3]+ +g[1],k=h.clipRect||d._g.doc.createElement("div"),o=k.style,o.clip=d.format("rect({1}px {2}px {3}px {0}px)",
g),h.clipRect||(o.position="absolute",o.top=0,o.left=0,o.width=b.paper.width+"px",o.height=b.paper.height+"px",h.parentNode.insertBefore(k,h),k.appendChild(h),h.clipRect=k);c["clip-rect"]||h.clipRect&&(h.clipRect.style.clip="auto")}if(b.textpath)g=b.textpath.style,c.font&&(g.font=c.font),c["font-family"]&&(g.fontFamily='"'+c["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"'),c["font-size"]&&(g.fontSize=c["font-size"]),c["font-weight"]&&(g.fontWeight=c["font-weight"]),c["font-style"]&&
(g.fontStyle=c["font-style"]);"arrow-start"in c&&H(b,c["arrow-start"]);"arrow-end"in c&&H(b,c["arrow-end"],1);if(null!=c.opacity||null!=c["stroke-width"]||null!=c.fill||null!=c.src||null!=c.stroke||null!=c["stroke-width"]||null!=c["stroke-opacity"]||null!=c["fill-opacity"]||null!=c["stroke-dasharray"]||null!=c["stroke-miterlimit"]||null!=c["stroke-linejoin"]||null!=c["stroke-linecap"]){g=h.getElementsByTagName("fill");g=g&&g[0];!g&&(g=e("fill"));"image"==b.type&&c.src&&(g.src=c.src);c.fill&&(g.on=
!0);if(null==g.on||"none"==c.fill||null===c.fill)g.on=!1;if(g.on&&c.fill)(k=l(c.fill).match(d._ISURL))?(g.parentNode==h&&h.removeChild(g),g.rotate=!0,g.src=k[1],g.type="tile",o=b.getBBox(1),g.position=o.x+" "+o.y,b._.fillpos=[o.x,o.y],d._preload(k[1],function(){b._.fillsize=[this.offsetWidth,this.offsetHeight]})):(g.color=d.getRGB(c.fill).hex,g.src="",g.type="solid",d.getRGB(c.fill).error&&(b.type in{circle:1,ellipse:1}||"r"!=l(c.fill).charAt())&&O(b,c.fill,g)&&(j.fill="none",j.gradient=c.fill,g.rotate=
!1));if("fill-opacity"in c||"opacity"in c)o=((+j["fill-opacity"]+1||2)-1)*((+j.opacity+1||2)-1)*((+d.getRGB(c.fill).o+1||2)-1),o=R(M(o,0),1),g.opacity=o,g.src&&(g.color="none");h.appendChild(g);g=h.getElementsByTagName("stroke")&&h.getElementsByTagName("stroke")[0];k=!1;!g&&(k=g=e("stroke"));if(c.stroke&&"none"!=c.stroke||c["stroke-width"]||null!=c["stroke-opacity"]||c["stroke-dasharray"]||c["stroke-miterlimit"]||c["stroke-linejoin"]||c["stroke-linecap"])g.on=!0;("none"==c.stroke||null===c.stroke||
null==g.on||0==c.stroke||0==c["stroke-width"])&&(g.on=!1);o=d.getRGB(c.stroke);g.on&&c.stroke&&(g.color=o.hex);o=((+j["stroke-opacity"]+1||2)-1)*((+j.opacity+1||2)-1)*((+o.o+1||2)-1);p=0.75*(t(c["stroke-width"])||1);o=R(M(o,0),1);null==c["stroke-width"]&&(p=j["stroke-width"]);c["stroke-width"]&&(g.weight=p);p&&1>p&&(o*=p)&&(g.weight=1);g.opacity=o;c["stroke-linejoin"]&&(g.joinstyle=c["stroke-linejoin"]||"miter");g.miterlimit=c["stroke-miterlimit"]||8;c["stroke-linecap"]&&(g.endcap="butt"==c["stroke-linecap"]?
"flat":"square"==c["stroke-linecap"]?"square":"round");if(c["stroke-dasharray"])o={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},g.dashstyle=o.hasOwnProperty(c["stroke-dasharray"])?o[c["stroke-dasharray"]]:"";k&&h.appendChild(g)}if("text"==b.type){b.paper.canvas.style.display="";h=b.paper.span;g=j.font&&j.font.match(/\d+(?:\.\d*)?(?=px)/);f=h.style;j.font&&(f.font=j.font);
j["font-family"]&&(f.fontFamily=j["font-family"]);j["font-weight"]&&(f.fontWeight=j["font-weight"]);j["font-style"]&&(f.fontStyle=j["font-style"]);g=t(j["font-size"]||g&&g[0])||10;f.fontSize=100*g+"px";b.textpath.string&&(h.innerHTML=l(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));f=h.getBoundingClientRect();b.W=j.w=(f.right-f.left)/100;b.H=j.h=(f.bottom-f.top)/100;b.X=j.x;b.Y=j.y+b.H/2;("x"in c||"y"in c)&&(b.path.v=d.format("m{0},{1}l{2},{1}",v(21600*j.x),
v(21600*j.y),v(21600*j.x)+1));f="x,y,text,font,font-family,font-weight,font-style,font-size".split(",");h=0;for(g=f.length;h<g;h++)if(f[h]in c){b._.dirty=1;break}switch(j["text-anchor"]){case "start":b.textpath.style["v-text-align"]="left";b.bbx=b.W/2;break;case "end":b.textpath.style["v-text-align"]="right";b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},O=function(b,c,e){b.attrs=b.attrs||{};var j=Math.pow,f="linear",g=".5 .5";b.attrs.gradient=
c;c=l(c).replace(d._radial_gradient,function(b,c,d){f="radial";c&&d&&(c=t(c),d=t(d),0.25<j(c-0.5,2)+j(d-0.5,2)&&(d=y.sqrt(0.25-j(c-0.5,2))*(2*(0.5<d)-1)+0.5),g=c+" "+d);return""});c=c.split(/\s*\-\s*/);if("linear"==f){var i=c.shift(),i=-t(i);if(isNaN(i))return null}c=d._parseDots(c);if(!c)return null;b=b.shape||b.node;if(c.length){b.removeChild(e);e.on=!0;e.method="none";e.color=c[0].color;e.color2=c[c.length-1].color;for(var k=[],p=0,o=c.length;p<o;p++)c[p].offset&&k.push(c[p].offset+" "+c[p].color);
e.colors=k.length?k.join():"0% "+e.color;"radial"==f?(e.type="gradientTitle",e.focus="100%",e.focussize="0 0",e.focusposition=g,e.angle=0):(e.type="gradient",e.angle=(270-i)%360);b.appendChild(e)}return 1},T=function(b,c){this[0]=this.node=b;b.raphael=!0;this.id=d._oid++;b.raphaelid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=c;this.matrix=d.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!c.bottom&&(c.bottom=this);this.prev=c.top;c.top&&(c.top.next=this);c.top=this;
this.next=null},F=d.el;T.prototype=F;F.constructor=T;F.transform=function(b){if(null==b)return this._.transform;var c=this.paper._viewBoxShift,e=c?"s"+[c.scale,c.scale]+"-1-1t"+[c.dx,c.dy]:"",j;c&&(j=b=l(b).replace(/\.{3}|\u2026/g,this._.transform||""));d._extractTransform(this,e+b);var c=this.matrix.clone(),f=this.skew,b=this.node,e=~l(this.attrs.fill).indexOf("-"),g=!l(this.attrs.fill).indexOf("url(");c.translate(-0.5,-0.5);g||e||"image"==this.type?(f.matrix="1 0 0 1",f.offset="0 0",f=c.split(),
e&&f.noRotation||!f.isSimple?(b.style.filter=c.toFilter(),e=this.getBBox(),f=this.getBBox(1),c=e.x-f.x,e=e.y-f.y,b.coordorigin=-21600*c+" "+-21600*e,C(this,1,1,c,e,0)):(b.style.filter="",C(this,f.scalex,f.scaley,f.dx,f.dy,f.rotate))):(b.style.filter="",f.matrix=l(c),f.offset=c.offset());j&&(this._.transform=j);return this};F.rotate=function(b,c,d){if(this.removed)return this;if(null!=b){b=l(b).split(i);b.length-1&&(c=t(b[1]),d=t(b[2]));b=t(b[0]);null==d&&(c=d);if(null==c||null==d)d=this.getBBox(1),
c=d.x+d.width/2,d=d.y+d.height/2;this._.dirtyT=1;this.transform(this._.transform.concat([["r",b,c,d]]));return this}};F.translate=function(b,c){if(this.removed)return this;b=l(b).split(i);b.length-1&&(c=t(b[1]));b=t(b[0])||0;c=+c||0;this._.bbox&&(this._.bbox.x+=b,this._.bbox.y+=c);this.transform(this._.transform.concat([["t",b,c]]));return this};F.scale=function(b,c,d,e){if(this.removed)return this;b=l(b).split(i);b.length-1&&(c=t(b[1]),d=t(b[2]),e=t(b[3]),isNaN(d)&&(d=null),isNaN(e)&&(e=null));b=
t(b[0]);null==c&&(c=b);null==e&&(d=e);if(null==d||null==e)var f=this.getBBox(1);d=null==d?f.x+f.width/2:d;e=null==e?f.y+f.height/2:e;this.transform(this._.transform.concat([["s",b,c,d,e]]));this._.dirtyT=1;return this};F.hide=function(){!this.removed&&(this.node.style.display="none");return this};F.show=function(){!this.removed&&(this.node.style.display="");return this};F._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};F.remove=
function(){if(!this.removed){this.paper.__set__&&this.paper.__set__.exclude(this);d.eve.unbind("*.*."+this.id);d._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]="function"==typeof this[b]?d._removedFactory(b):null;this.removed=!0}};F.attr=function(b,c){if(this.removed)return this;if(null==b){var e={},j;for(j in this.attrs)this.attrs.hasOwnProperty(j)&&(e[j]=this.attrs[j]);e.gradient&&"none"==e.fill&&
(e.fill=e.gradient)&&delete e.gradient;e.transform=this._.transform;return e}if(null==c&&d.is(b,"string")){if("fill"==b&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;j=b.split(i);for(var e={},f=0,g=j.length;f<g;f++)b=j[f],b in this.attrs?e[b]=this.attrs[b]:d.is(this.paper.customAttributes[b],"function")?e[b]=this.paper.customAttributes[b].def:e[b]=d._availableAttrs[b];return g-1?e:e[j[0]]}if(this.attrs&&null==c&&d.is(b,"array")){e={};for(f=0,g=b.length;f<g;f++)e[b[f]]=this.attr(b[f]);
return e}null!=c&&(e={},e[b]=c);null==c&&d.is(b,"object")&&(e=b);for(f in e)V("attr."+f+"."+this.id,this,e[f]);if(e){for(f in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(f)&&e.hasOwnProperty(f)&&d.is(this.paper.customAttributes[f],"function"))for(g in j=this.paper.customAttributes[f].apply(this,[].concat(e[f])),this.attrs[f]=e[f],j)j.hasOwnProperty(g)&&(e[g]=j[g]);e.text&&"text"==this.type&&(this.textpath.string=e.text);E(this,e)}return this};F.toFront=function(){!this.removed&&
this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&d._tofront(this,this.paper);return this};F.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),d._toback(this,this.paper));return this};F.insertAfter=function(b){if(this.removed)return this;b.constructor==d.st.constructor&&(b=b[b.length-1]);b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):
b.node.parentNode.appendChild(this.node);d._insertafter(this,b,this.paper);return this};F.insertBefore=function(b){if(this.removed)return this;b.constructor==d.st.constructor&&(b=b[0]);b.node.parentNode.insertBefore(this.node,b.node);d._insertbefore(this,b,this.paper);return this};F.blur=function(b){var c=this.node.runtimeStyle,e=c.filter;e=e.replace(o,"");0!==+b?(this.attrs.blur=b,c.filter=e+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+b||1.5)+")",c.margin=d.format("-{0}px 0 0 -{0}px",
v(+b||1.5))):(c.filter=e,c.margin=0,delete this.attrs.blur)};d._engine.path=function(b,c){var d=e("shape");d.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";d.coordsize="21600 21600";d.coordorigin=c.coordorigin;var f=new T(d,c),i={fill:"none",stroke:"#000"};b&&(i.path=b);f.type="path";f.path=[];f.Path="";E(f,i);c.canvas.appendChild(d);i=e("skew");i.on=!0;d.appendChild(i);f.skew=i;f.transform("");return f};d._engine.rect=function(b,c,e,f,i,g){var k=d._rectPath(c,e,f,i,g),b=b.path(k),
l=b.attrs;b.X=l.x=c;b.Y=l.y=e;b.W=l.width=f;b.H=l.height=i;l.r=g;l.path=k;b.type="rect";return b};d._engine.ellipse=function(b,c,d,e,f){b=b.path();b.X=c-e;b.Y=d-f;b.W=2*e;b.H=2*f;b.type="ellipse";E(b,{cx:c,cy:d,rx:e,ry:f});return b};d._engine.circle=function(b,c,d,e){b=b.path();b.X=c-e;b.Y=d-e;b.W=b.H=2*e;b.type="circle";E(b,{cx:c,cy:d,r:e});return b};d._engine.image=function(b,c,e,f,i,g){var k=d._rectPath(e,f,i,g),b=b.path(k).attr({stroke:"none"}),l=b.attrs,p=b.node,o=p.getElementsByTagName("fill")[0];
l.src=c;b.X=l.x=e;b.Y=l.y=f;b.W=l.width=i;b.H=l.height=g;l.path=k;b.type="image";o.parentNode==p&&p.removeChild(o);o.rotate=!0;o.src=c;o.type="tile";b._.fillpos=[e,f];b._.fillsize=[i,g];p.appendChild(o);C(b,1,1,0,0,0);return b};d._engine.text=function(b,c,f,j){var i=e("shape"),g=e("path"),k=e("textpath");c=c||0;f=f||0;j=j||"";g.v=d.format("m{0},{1}l{2},{1}",v(21600*c),v(21600*f),v(21600*c)+1);g.textpathok=!0;k.string=l(j);k.on=!0;i.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";
i.coordsize="21600 21600";i.coordorigin="0 0";var o=new T(i,b),p={fill:"#000",stroke:"none",font:d._availableAttrs.font,text:j};o.shape=i;o.path=g;o.textpath=k;o.type="text";o.attrs.text=l(j);o.attrs.x=c;o.attrs.y=f;o.attrs.w=1;o.attrs.h=1;E(o,p);i.appendChild(k);i.appendChild(g);b.canvas.appendChild(i);b=e("skew");b.on=!0;i.appendChild(b);o.skew=b;o.transform("");return o};d._engine.setSize=function(b,c){var e=this.canvas.style;this.width=b;this.height=c;b==+b&&(b+="px");c==+c&&(c+="px");e.width=
b;e.height=c;e.clip="rect(0 "+b+" "+c+" 0)";this._viewBox&&d._engine.setViewBox.apply(this,this._viewBox);return this};d._engine.setViewBox=function(b,c,e,f,i){d.eve("setViewBox",this,this._viewBox,[b,c,e,f,i]);var g=this.width,k=this.height,l=1/M(e/g,f/k),o,r;i&&(o=k/f,r=g/e,e*o<g&&(b-=(g-e*o)/2/o),f*r<k&&(c-=(k-f*r)/2/r));this._viewBox=[b,c,e,f,!!i];this._viewBoxShift={dx:-b,dy:-c,scale:l};this.forEach(function(b){b.transform("...")});return this};var e;d._engine.initWin=function(b){var c=b.document;
c.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!c.namespaces.rvml&&c.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),e=function(b){return c.createElement("<rvml:"+b+' class="rvml">')}}catch(d){e=function(b){return c.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};d._engine.initWin(d._g.win);d._engine.create=function(){var b=d._getContainer.apply(0,arguments),c=b.container,e=b.height,f=b.width,i=b.x,b=b.y;if(!c)throw Error("VML container not found.");
var g=new d._Paper,k=g.canvas=d._g.doc.createElement("div"),l=k.style;i=i||0;b=b||0;f=f||512;e=e||342;g.width=f;g.height=e;f==+f&&(f+="px");e==+e&&(e+="px");g.coordsize="21600000 21600000";g.coordorigin="0 0";g.span=d._g.doc.createElement("span");g.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";k.appendChild(g.span);l.cssText=d.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
f,e);1==c?(d._g.doc.body.appendChild(k),l.left=i+"px",l.top=b+"px",l.position="absolute"):c.firstChild?c.insertBefore(k,c.firstChild):c.appendChild(k);g.renderfix=function(){};return g};d.prototype.clear=function(){d.eve("clear",this);this.canvas.innerHTML="";this.span=d._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};d.prototype.remove=function(){d.eve("remove",
this);this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?d._removedFactory(b):null;return!0};var k=d.st,f;for(f in F)F.hasOwnProperty(f)&&!k.hasOwnProperty(f)&&(k[f]=function(b){return function(){var c=arguments;return this.forEach(function(d){d[b].apply(d,c)})}}(f))}(window.Raphael);var ThemeModel=function(d,l,t,y){this.model=d;this.paper=d.paper;this.theme=l;l=t/10;d=0.6*l;this.selx=t/2;this.sely=y-0.7*l;this.selector=this.paper.image("themes/"+this.theme+"/selector.png",this.selx-l/2,this.sely-l/2,l,l);this.icon=this.paper.image("themes/"+this.theme+"/icon.png",this.selx-d/2,this.sely-d/2,d,d);this.selector.hide();this.icon.hide();var d=l/4,v=0.55*l,v=[{type:"text","font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx-0.7*v,y:this.sely-0.7*v,"text-anchor":"end"},
{type:"text","font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx-v,y:this.sely,"text-anchor":"end"},{type:"text","font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx-0.7*v,y:this.sely+0.7*v,"text-anchor":"end"},{type:"text","font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx+0.7*v,y:this.sely+0.7*v,"text-anchor":"start"},{type:"text","font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx+v,y:this.sely,"text-anchor":"start"},{type:"text",
"font-size":d,"font-family":"Arial","font-weight":"bold",x:this.selx+0.7*v,y:this.sely-0.7*v,"text-anchor":"start"}];this.optionShadow=this.paper.add(v);this.options=this.paper.add(v);for(v=0;v<this.options.length;v++){var M=0;(function(d,l,i,t){var v=i[t];v.attr({fill:"rgb(250,250,250)",cursor:"pointer"});v.mousedown(function(){d.selectOption(t)}).mouseover(function(){i[M].animate({fill:"rgb(250,250,250)"},200);v.animate({fill:"rgb(255,166,10)"},200);v.toFront();l.safari();M=t}).mouseout(function(){v.animate({fill:"rgb(250,250,250)"},
200);l.safari()});v.hide()})(this.model,this.paper,this.options,v);this.optionShadow[v].attr({fill:"rgba(0,0,0,0.7)"});this.optionShadow[v].translate(1,1);this.optionShadow[v].hide()}l*=1.5;this.play=this.paper.image("themes/"+this.theme+"/play.png",t/2-l/2,y/2-l/2,l,l);this.play.click(this.model.playClicked.bind(this.model));this.play.node.style.cursor="pointer";this.play.hide();this.eventIndicator=null;t=d/2;y-=1.5*d;this.playControl=this.paper.image("themes/"+this.theme+"/play_control.png",t,y,
d,d).attr({opacity:0});this.pauseControl=this.paper.image("themes/"+this.theme+"/pause_control.png",t,y,d,d).attr({opacity:0});this.playControl.hide();this.pauseControl.hide();this.playControl.click(function(){this.playControl.hide();this.pauseControl.show();this.pauseControl.attr({opacity:1});this.playControl.attr({opacity:0});this.model.playVideo()}.bind(this));this.pauseControl.click(function(){this.pauseControl.hide();this.playControl.show();this.playControl.attr({opacity:1});this.pauseControl.attr({opacity:0});
this.model.pauseVideo()}.bind(this));this.controlsHidden=this.eventIndicatorHidden=!0};ThemeModel.prototype.rotateSelector=function(d){this.selector.attr({transform:"r"+d})};ThemeModel.prototype.showOptions=function(d){this.icon.show();this.selector.show();for(var l=0;l<d.length;l++)void 0!=d[l]&&(this.options[l].attr({text:d[l]}),this.options[l].show(),this.optionShadow[l].attr({text:d[l]}),this.optionShadow[l].show())};
ThemeModel.prototype.hideOptions=function(){this.icon.hide();this.selector.hide();for(var d=0;6>d;d++)this.options[d].hide(),this.optionShadow[d].hide()};ThemeModel.prototype.showControls=function(d){if(!0==this.controlsHidden)d?(this.playControl.show(),this.playControl.animate({opacity:1},200,"<>")):(this.pauseControl.show(),this.pauseControl.animate({opacity:1},200,"<>")),this.controlsHidden=!1};
ThemeModel.prototype.hideControls=function(d){if(!1==this.controlsHidden)d?this.playControl.animate({opacity:0},500,"<>",this.hide):this.pauseControl.animate({opacity:0},500,"<>",this.hide),this.controlsHidden=!0};ThemeModel.prototype.showHomeScreen=function(){this.play.show()};ThemeModel.prototype.hideHomeScreen=function(){this.play.hide()};
ThemeModel.prototype.showEventIndicator=function(){if(null!=this.eventIndicator&&!0==this.eventIndicatorHidden){var d=this.eventIndicator.data("h"),l=this.eventIndicator.data("y");this.eventIndicator.show();this.eventIndicator.animate({height:d,y:l},500,"<>");this.eventIndicatorHidden=!1}};
ThemeModel.prototype.hideEventIndicator=function(){if(null!=this.eventIndicator&&!1==this.eventIndicatorHidden){var d=this.eventIndicator.data("h");this.eventIndicator.animate({height:0,y:this.eventIndicator.data("y")+d},500,"<>",this.hide);this.eventIndicatorHidden=!0}};
