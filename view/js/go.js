var isWebKit="undefined"!==typeof navigator.userAgent.split("WebKit/")[1],isChrome=-1<navigator.userAgent.toLowerCase().indexOf("chrome"),isMozilla=0<=navigator.appVersion.indexOf("Gecko/")||0<=navigator.userAgent.indexOf("Gecko")&&!this.isWebKit&&"undefined"!==typeof navigator.appVersion;isWebKit&&console.log("WebKit browser detected");isChrome&&console.log("Chrome browser detected");isMozilla&&console.log("Mozilla browser detected");!isWebKit&&!isChrome&&!isMozilla&&console.error("Browser unsupported");var Connection=function(e,k,t){this.segment=e;this.option=k;this.position=t};var Stack=function(){this.stack=[]};Stack.prototype.insert=function(e){this.stack.push(e)};Stack.prototype.remove=function(e){for(var k=0;k<this.stack.length;k++)if(this.stack[k]==e){this.stack.splice(k,1);break}};Stack.prototype.pull=function(){return 1<this.stack.length?this.stack.shift():1==this.stack.length?this.stack.pop():null};Stack.prototype.size=function(){return this.stack.length};Function.prototype.bind=function(e){var k=this;return function(){return k.apply(e,arguments)}};var jiffy=0,Model=function(){this.width=window.innerWidth;this.height=window.innerHeight;var e=document.getElementById("controlOverlay");e.width=this.width;e.height=this.height;this.paper=Raphael(e,this.width,this.height);this.scoreElement=parent.document.getElementById("scoreNum");this.score=0;this.theme=new ThemeModel(this,"professional1",this.width,this.height);this.player=new Player(this,this.width,this.height);this.replay=!1;this.mousey=this.mousex=0;this.mouseMoveHandler=this.mouseMove.bind(this);
document.addEventListener("mousemove",this.mouseMoveHandler,!1);this.mouseUpHandler=this.mouseUp.bind(this);document.addEventListener("mouseup",this.mouseUpHandler,!1);this.tickId=setInterval(this.timerTick.bind(this),33);this.idleCounter=15;this.theme.showHomeScreen(this.restart);this.controlsVisible=!1};Model.prototype.mouseMove=function(e){this.mousex=e.pageX;this.mousey=e.pageY;this.idleCounter=15;!0==this.controlsVisible&&this.theme.showControls(this.player.isPaused())};
Model.prototype.mouseUp=function(){this.player.mouseInterrupt()};Model.prototype.playClicked=function(){!0==this.replay&&(this.player.segment.removeVideo(),this.player.reset());this.player.playVideo();this.controlsVisible=!0;this.theme.hideHomeScreen()};Model.prototype.playVideo=function(){this.player.playVideo()};Model.prototype.pauseVideo=function(){this.player.pauseVideo()};Model.prototype.videoComplete=function(){this.replay=!0;this.theme.showHomeScreen(this.restart);this.controlsVisible=!1};
Model.prototype.showOptions=function(e){for(var k=!1,t=Array(6),v=Array(6),y=0;6>y;y++)v[y]=e.getConnectionByPosition(y);if(null!=v[0])t[0]=v[0].option,k=!0;if(null!=v[1])t[1]=v[1].option,k=!0;if(null!=v[2])t[2]=v[2].option,k=!0;if(null!=v[3])t[3]=v[3].option,k=!0;if(null!=v[4])t[4]=v[4].option,k=!0;if(null!=v[5])t[5]=v[5].option,k=!0;if(!k)return!1;this.theme.showOptions(t);this.controlsVisible=!1;this.theme.hideControls(this.player.isPaused());return!0};
Model.prototype.selectOption=function(e){this.theme.hideOptions();this.player.chooseOption(e);this.controlsVisible=!0};Model.prototype.updateScore=function(e){this.score=null==e?0:this.score+e;if(null!=this.scoreElement)this.scoreElement.innerHTML=this.score;console.log("Current score: %d",this.score)};
Model.prototype.timerTick=function(){jiffy++;0>=--this.idleCounter&&this.theme.hideControls(this.player.isPaused());var e=Math.atan((this.theme.sely-this.mousey)/(this.mousex-this.theme.selx))-Math.PI/2;0>this.mousex-this.theme.selx&&(e-=Math.PI);this.theme.rotateSelector(-360*e/(2*Math.PI));this.player.timerEventCanTrigger?this.theme.showEventIndicator():this.theme.hideEventIndicator()};var Player=function(e,k,t){this.width=k;this.height=t;this.model=e;this.segment=null;this.timerEventCanTrigger=!1;this.timerEventSegment=null;this.timerId=setInterval(this.timerTick.bind(this),100);this.timerEventMode=0;this.videoStacked=!1;this.reset()};
Player.prototype.reset=function(){console.log("Resetting player");this.segment=S1;var e=this.segment.score;this.model.updateScore(null);this.model.updateScore(e);0!=this.segment.videoStack.size()?(this.videoStacked=!0,console.log("video is stacked, size: %d",this.segment.videoStack.size())):this.videoStacked=!1;this.segment.loadVideo(this);this.segment.setVisible();this.preloadVideo()};
Player.prototype.preloadVideo=function(){console.log("video has %d connections",this.segment.connections.length);for(var e=0;e<this.segment.connections.length;e++){var k=this.segment.connections[e].segment;k.loadVideo(this)}console.log("video has %d timed events",this.segment.timedEvents.length);for(e=0;e<this.segment.timedEvents.length;e++)k=this.segment.timedEvents[e].segment,k.loadVideo(this)};
Player.prototype.playVideo=function(){this.segment.setVisible();this.segment.play();console.log("Now playing %s, duration: %d seconds",this.segment.url,this.segment.video.duration)};Player.prototype.skipToEnd=function(){};Player.prototype.pauseVideo=function(){this.segment.pause()};Player.prototype.isPaused=function(){return this.segment.video.paused};Player.prototype.setSegment=function(e){this.segment.removeVideo();this.segment=e;this.model.updateScore(this.segment.score);this.preloadVideo();this.playVideo()};
Player.prototype.chooseOption=function(e){console.log("option %d choosen",e);e=this.segment.chooseConnection(e).segment;0!=e.videoStack.size()?(this.videoStacked=!0,console.log("video is stacked, size: %d",this.segment.videoStack.size())):this.videoStacked=!1;this.setSegment(e)};Player.prototype.timerTick=function(){var e=this.segment;null!=e&&null!=e.video&&e.video.currentTime>=e.video.duration&&this.videoEnded()};
Player.prototype.mouseInterrupt=function(){var e=this.segment;if(null!=e&&null!=e.video)for(var k=0;k<e.timedEvents.length;k++){var t=e.timedEvents[k];if(e.video.currentTime>t.startTime&&e.video.currentTime<t.endTime)switch(e=t.segment,t=t.mode,console.log("event executed, mode %d",t),t){case 0:this.setSegment(e);break;case 1:this.segment.videoStack.insert(e);this.videoStacked=!0;break;case 2:this.segment.videoStack.remove(e);this.videoStacked=0==this.segment.videoStack.size?!1:!0;break;default:console.error("Illegal timer event mode")}}};
Player.prototype.videoEnded=function(){if(this.videoStacked){this.videoStacked=!1;console.log("stacked videos detected, unstacking...");var e=this.segment,k=e.connections,t=e.defaultPos,v=e.videoStack;for(e.connections=[];null!=(s=v.pull());)e.insertDirect(s),e=s;e.connections=k;e.defaultPos=t;this.chooseOption(this.segment.defaultPos)}else-1!=this.segment.defaultPos?(console.log("direct video detected, not showing options"),this.chooseOption(this.segment.defaultPos)):this.model.showOptions(this.segment)||
this.model.videoComplete()};var Segment=function(e,k){this.url=e;this.score=k||0;this.defaultPos=-1;this.connections=[];this.timedEvents=[];this.videoStack=new Stack;this.player=this.video=null};Segment.prototype.setVisible=function(){this.video.style.visibility="visible"};Segment.prototype.play=function(){this.video.play()};Segment.prototype.pause=function(){this.video.pause()};
Segment.prototype.getConnectionByPosition=function(e){for(var k=0;k<this.connections.length;k++)if(this.connections[k].position===e)return this.connections[k];return null};Segment.prototype.chooseConnection=function(e){for(var k,t=0;t<this.connections.length;t++)this.connections[t].position===e?k=t:this.connections[t].segment.removeVideo();return this.connections[k]};Segment.prototype.insertDirect=function(e){this.defaultPos++;this.connections.push(new Connection(e,"",this.defaultPos))};
Segment.prototype.insertConnection=function(e,k,t){this.connections.push(new Connection(e,k,t))};Segment.prototype.insertTimedEvent=function(e,k,t){this.timedEvents.push(new TimedEvent(e,k,t))};Segment.prototype.insertTimedStack=function(e,k,t,v){!0===v&&this.videoStack.insert(e);this.timedEvents.push(new TimedEvent(e,k,t,v?2:1))};
Segment.prototype.loadVideo=function(e){this.player=e;if(null==this.video)e=document.createElement("video"),e.controls=!1,e.volume=1,e.preload="auto",e.style.visibility="hidden",e.style.position="absolute",e.width=this.player.width,e.height=this.player.height,document.body.insertBefore(e,document.getElementById("controlOverlay")),this.video=e;this.video.src=setVideoUrl(this.url);this.video.load()};
Segment.prototype.removeVideo=function(){if(null!=this.video)document.body.removeChild(this.video),this.video=null};var setVideoUrl=function(e){return""==e||null==e?null:isMozilla?"http://static.simply.io/"+e+".ogv":"http://static.simply.io/"+e+".mp4"};var TimedEvent=function(e,k,t,v){this.segment=e;this.startTime=k;this.endTime=t;this.mode=v||0};(function(e){var k=/[\.\/]/,t=function(){},v=function(e,k){return e-k},y,M,R={n:{}},B=function(e,k){var t=M,A=Array.prototype.slice.call(arguments,2),q=B.listeners(e),G=0,r,P=[],K={},I=[];y=e;M=0;for(var C=0,H=q.length;C<H;C++)"zIndex"in q[C]&&(P.push(q[C].zIndex),0>q[C].zIndex&&(K[q[C].zIndex]=q[C]));for(P.sort(v);0>P[G];)if(r=K[P[G++]],I.push(r.apply(k,A)),M)return M=t,I;for(C=0;C<H;C++)if(r=q[C],"zIndex"in r)if(r.zIndex==P[G]){I.push(r.apply(k,A));if(M)return M=t,I;do if(G++,r=K[P[G]],r&&I.push(r.apply(k,
A)),M)return M=t,I;while(r)}else K[r.zIndex]=r;else if(I.push(r.apply(k,A)),M)return M=t,I;M=t;return I.length?I:null};B.listeners=function(e){var e=e.split(k),t=R,y,A,q,G,r,v,B,I,C=[t],H=[];for(G=0,r=e.length;G<r;G++){I=[];for(v=0,B=C.length;v<B;v++)for(t=C[v].n,A=[t[e[G]],t["*"]],q=2;q--;)y=A[q],y&&(I.push(y),H=H.concat(y.f||[]));C=I}return H};B.on=function(e,y){for(var v=e.split(k),A=R,q=0,G=v.length;q<G;q++)A=A.n,!A[v[q]]&&(A[v[q]]={n:{}}),A=A[v[q]];A.f=A.f||[];for(q=0,G=A.f.length;q<G;q++)if(A.f[q]==
y)return t;A.f.push(y);return function(e){+e==+e&&(y.zIndex=+e)}};B.stop=function(){M=1};B.nt=function(e){return e?RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(y):y};B.unbind=function(e,t){var y=e.split(k),A,q,v,r,B,K,I=[R];for(r=0,B=y.length;r<B;r++)for(K=0;K<I.length;K+=v.length-2){v=[K,1];A=I[K].n;if("*"!=y[r])A[y[r]]&&v.push(A[y[r]]);else for(q in A)A.hasOwnProperty(q)&&v.push(A[q]);I.splice.apply(I,v)}for(r=0,B=I.length;r<B;r++)for(A=I[r];A.n;){if(t){if(A.f){for(K=0,y=A.f.length;K<y;K++)if(A.f[K]==
t){A.f.splice(K,1);break}!A.f.length&&delete A.f}for(q in A.n)if(A.n.hasOwnProperty(q)&&A.n[q].f){v=A.n[q].f;for(K=0,y=v.length;K<y;K++)if(v[K]==t){v.splice(K,1);break}!v.length&&delete A.n[q].f}}else for(q in delete A.f,A.n)A.n.hasOwnProperty(q)&&A.n[q].f&&delete A.n[q].f;A=A.n}};B.once=function(e,k){var t=function(){k.apply(this,arguments);B.unbind(e,t)};return B.on(e,t)};B.version="0.4.0";B.toString=function(){return"You are running Eve 0.4.0"};"undefined"!=typeof module&&module.exports?module.exports=
B:e.eve=B})(this);
(function(){function e(a,l,n,x,b,d){var n=N(n),W,e,i,j,g,u,h=a.ms,m={},k={},D={};if(x)for(w=0,q=L.length;w<q;w++){var Q=L[w];if(Q.el.id==l.id&&Q.anim==a){Q.percent!=n?(L.splice(w,1),i=1):e=Q;l.attr(Q.totalOrigin);break}}else x=+k;for(var w=0,q=a.percents.length;w<q;w++){if(a.percents[w]==n||a.percents[w]>x*a.top){n=a.percents[w];g=a.percents[w-1]||0;h=h/a.top*(n-g);j=a.percents[w+1];W=a.anim[n];break}x&&l.attr(a.anim[a.percents[w]])}if(W){if(e)e.initstatus=x,e.start=new Date-e.ms*x;else{for(var p in W)if(W[G](p)&&
(ka[G](p)||l.paper.customAttributes[G](p)))switch(m[p]=l.attr(p),null==m[p]&&(m[p]=Oa[p]),k[p]=W[p],ka[p]){case z:D[p]=(k[p]-m[p])/h;break;case "colour":m[p]=f.getRGB(m[p]);w=f.getRGB(k[p]);D[p]={r:(w.r-m[p].r)/h,g:(w.g-m[p].g)/h,b:(w.b-m[p].b)/h};break;case "path":var w=ba(m[p],k[p]),o=w[1];m[p]=w[0];D[p]=[];for(w=0,q=m[p].length;w<q;w++){D[p][w]=[0];for(var r=1,v=m[p][w].length;r<v;r++)D[p][w][r]=(o[w][r]-m[p][w][r])/h}break;case "transform":w=l._;if(o=Pa(w[p],k[p])){m[p]=o.from;k[p]=o.to;D[p]=
[];D[p].real=!0;for(w=0,q=m[p].length;w<q;w++){D[p][w]=[m[p][w][0]];for(r=1,v=m[p][w].length;r<v;r++)D[p][w][r]=(k[p][w][r]-m[p][w][r])/h}}else o=l.matrix||new y,w={_:{transform:w.transform},getBBox:function(){return l.getBBox(1)}},m[p]=[o.a,o.b,o.c,o.d,o.e,o.f],Qa(w,k[p]),k[p]=w._.transform,D[p]=[(w.matrix.a-o.a)/h,(w.matrix.b-o.b)/h,(w.matrix.c-o.c)/h,(w.matrix.d-o.d)/h,(w.matrix.e-o.e)/h,(w.matrix.e-o.f)/h];break;case "csv":o=F(W[p])[c](X);q=F(m[p])[c](X);if("clip-rect"==p)for(m[p]=q,D[p]=[],w=
q.length;w--;)D[p][w]=(o[w]-m[p][w])/h;k[p]=o;break;default:for(o=[][E](W[p]),q=[][E](m[p]),D[p]=[],w=l.paper.customAttributes[p].length;w--;)D[p][w]=((o[w]||0)-(q[w]||0))/h}p=W.easing;w=f.easing_formulas[p];if(!w)if((w=F(p).match(Ra))&&5==w.length)var A=w,w=function(a){return t(a,+A[1],+A[2],+A[3],+A[4],h)};else w=Sa;u=W.start||a.start||+new Date;Q={anim:a,percent:n,timestamp:u,start:u+(a.del||0),status:0,initstatus:x||0,stop:!1,ms:h,easing:w,from:m,diff:D,to:k,el:l,callback:W.callback,prev:g,next:j,
repeat:d||a.times,origin:l.attr(),totalOrigin:b};L.push(Q);if(x&&!e&&!i&&(Q.stop=!0,Q.start=new Date-h*x,1==L.length))return la();i&&(Q.start=new Date-Q.ms*x);1==L.length&&ya(la)}eve("anim.start."+l.id,l,a)}}function k(a,l){var n=[],x={};this.ms=l;this.times=1;if(a){for(var b in a)a[G](b)&&(x[N(b)]=a[b],n.push(N(b)));n.sort(Ta)}this.anim=x;this.top=n[n.length-1];this.percents=n}function t(a,l,n,x,b,d){function c(a,l){var n,x,b,d;for(b=a,x=0;8>x;x++){d=((j*b+i)*b+e)*b-a;if(u(d)<l)return b;n=(3*j*b+
2*i)*b+e;if(1.0E-6>u(n))break;b-=d/n}n=0;x=1;b=a;if(b<n)return n;if(b>x)return x;for(;n<x;){d=((j*b+i)*b+e)*b;if(u(d-a)<l)break;a>d?n=b:x=b;b=(x-n)/2+n}return b}var e=3*l,i=3*(x-l)-e,j=1-e-i,f=3*n,g=3*(b-n)-f,h=1-f-g;return function(a,l){var n=c(a,l);return((h*n+g)*n+f)*n}(a,1/(200*d))}function v(){return this.x+T+this.y+T+this.width+" \u00d7 "+this.height}function y(a,l,n,x,b,d){null!=a?(this.a=+a,this.b=+l,this.c=+n,this.d=+x,this.e=+b,this.f=+d):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=
0)}function M(a){for(var l=[],n=0,x=a.length;x-2>n;n+=2){var b=[{x:+a[n],y:+a[n+1]},{x:+a[n],y:+a[n+1]},{x:+a[n+2],y:+a[n+3]},{x:+a[n+4],y:+a[n+5]}];x-4==n?(b[0]={x:+a[n-2],y:+a[n-1]},b[3]=b[2]):n&&(b[0]={x:+a[n-2],y:+a[n-1]});l.push(["C",(-b[0].x+6*b[1].x+b[2].x)/6,(-b[0].y+6*b[1].y+b[2].y)/6,(b[1].x+6*b[2].x-b[3].x)/6,(b[1].y+6*b[2].y-b[3].y)/6,b[2].x,b[2].y])}return l}function R(){return this.hex}function B(a,l,n){function x(){var b=Array.prototype.slice.call(arguments,0),d=b.join("\u2400"),c=
x.cache=x.cache||{},e=x.count=x.count||[];if(c[G](d)){a:for(var b=e,e=d,i=0,j=b.length;i<j;i++)if(b[i]===e){b.push(b.splice(i,1)[0]);break a}return n?n(c[d]):c[d]}1E3<=e.length&&delete c[e.shift()];e.push(d);c[d]=a[H](l,b);return n?n(c[d]):c[d]}return x}function f(a){if(f.is(a,"function"))return V?a():eve.on("DOMload",a);if(f.is(a,o))return f._engine.create[H](f,a.splice(0,3+f.is(a[0],z))).add(a);var l=Array.prototype.slice.call(arguments,0);if(f.is(l[l.length-1],"function")){var n=l.pop();return V?
n.call(f._engine.create[H](f,l)):eve.on("DOMload",function(){n.call(f._engine.create[H](f,l))})}return f._engine.create[H](f,arguments)}f.version="2.0.1";f.eve=eve;var V,X=/[, ]+/,A={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},q=/\{(\d+)\}/g,G="hasOwnProperty",r={doc:document,win:window},P=Object.prototype[G].call(r.win,"Raphael"),K=r.win.Raphael,I=function(){this.ca=this.customAttributes={}},C,H="apply",E="concat",O="createTouch"in r.doc,T=" ",F=String,c="split",m="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[c](T),
h={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},b=F.prototype.toLowerCase,d=Math,i=d.max,j=d.min,u=d.abs,g=d.pow,p=d.PI,z="number",o="array",Ua=Object.prototype.toString;f._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i;var Va=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
Wa={NaN:1,Infinity:1,"-Infinity":1},Ra=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ma=d.round,N=parseFloat,Y=parseInt,za=F.prototype.toUpperCase,Oa=f._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,
rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ka=f._availableAnimAttrs={blur:z,"clip-rect":"csv",cx:z,cy:z,fill:"colour","fill-opacity":z,"font-size":z,height:z,opacity:z,path:"path",r:z,rx:z,ry:z,stroke:"colour","stroke-opacity":z,"stroke-width":z,transform:"transform",width:z,x:z,y:z},na=/\s*,\s*/,Xa=
{hs:1,rg:1},Ya=/,?([achlmqrstvxz]),?/gi,Za=/([achlmrqstvz])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,$a=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,Aa=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)\s*,?\s*/ig;f._radial_gradient=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/;var ca={},Ta=function(a,l){return N(a)-N(l)},ab=function(){},Sa=function(a){return a},oa=f._rectPath=function(a,l,n,x,b){return b?[["M",a+b,l],["l",n-2*b,0],["a",b,b,0,0,1,b,b],["l",0,x-2*b],["a",b,b,0,0,1,-b,b],["l",2*b-n,0],["a",
b,b,0,0,1,-b,-b],["l",0,2*b-x],["a",b,b,0,0,1,b,-b],["z"]]:[["M",a,l],["l",n,0],["l",0,x],["l",-n,0],["z"]]},Ba=function(a,l,n,x){null==x&&(x=n);return[["M",a,l],["m",0,-x],["a",n,x,0,1,1,0,2*x],["a",n,x,0,1,1,0,-2*x],["z"]]},pa=f._getPath={path:function(a){return a.attr("path")},circle:function(a){a=a.attrs;return Ba(a.cx,a.cy,a.r)},ellipse:function(a){a=a.attrs;return Ba(a.cx,a.cy,a.rx,a.ry)},rect:function(a){a=a.attrs;return oa(a.x,a.y,a.width,a.height,a.r)},image:function(a){a=a.attrs;return oa(a.x,
a.y,a.width,a.height)},text:function(a){a=a._getBBox();return oa(a.x,a.y,a.width,a.height)}},Ca=f.mapPath=function(a,l){if(!l)return a;var n,x,b,d,c,e,i,a=ba(a);for(b=0,c=a.length;b<c;b++){i=a[b];for(d=1,e=i.length;d<e;d+=2)n=l.x(i[d],i[d+1]),x=l.y(i[d],i[d+1]),i[d]=n,i[d+1]=x}return a};f._g=r;f.type=r.win.SVGAngle||r.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if("VML"==f.type){var qa=r.doc.createElement("div"),ea;qa.innerHTML='<v:shape adj="1"/>';
ea=qa.firstChild;ea.style.behavior="url(#default#VML)";if(!ea||"object"!=typeof ea.adj)return f.type="";qa=null}f.svg=!(f.vml="VML"==f.type);f._Paper=I;f.fn=C=I.prototype=f.prototype;f._id=0;f._oid=0;f.is=function(a,l){l=b.call(l);return"finite"==l?!Wa[G](+a):"array"==l?a instanceof Array:"null"==l&&null===a||l==typeof a&&null!==a||"object"==l&&a===Object(a)||"array"==l&&Array.isArray&&Array.isArray(a)||Ua.call(a).slice(8,-1).toLowerCase()==l};f.angle=function(a,l,n,x,b,c){return null==b?(a-=n,l-=
x,!a&&!l?0:(180*d.atan2(-l,-a)/p+540)%360):f.angle(a,l,b,c)-f.angle(n,x,b,c)};f.rad=function(a){return a%360*p/180};f.deg=function(a){return 180*a/p%360};f.snapTo=function(a,l,n){n=f.is(n,"finite")?n:10;if(f.is(a,o))for(var x=a.length;x--;){if(u(a[x]-l)<=n)return a[x]}else{a=+a;x=l%a;if(x<n)return l-x;if(x>a-n)return l-x+a}return l};f.createUUID=function(a,l){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,l).toUpperCase()}}(/[xy]/g,function(a){var l=16*d.random()|0;return("x"==
a?l:l&3|8).toString(16)});f.setWindow=function(a){eve("setWindow",f,r.win,a);r.win=a;r.doc=r.win.document;f._engine.initWin&&f._engine.initWin(r.win)};var fa=function(a){if(f.vml){var l=/^\s+|\s+$/g,n;try{var x=new ActiveXObject("htmlfile");x.write("<body>");x.close();n=x.body}catch(b){n=createPopup().document.body}var d=n.createTextRange();fa=B(function(a){try{n.style.color=F(a).replace(l,"");var x=d.queryCommandValue("ForeColor");return"#"+("000000"+((x&255)<<16|x&65280|(x&16711680)>>>16).toString(16)).slice(-6)}catch(b){return"none"}})}else{var c=
r.doc.createElement("i");c.title="Rapha\u00ebl Colour Picker";c.style.display="none";r.doc.body.appendChild(c);fa=B(function(a){c.style.color=a;return r.doc.defaultView.getComputedStyle(c,"").getPropertyValue("color")})}return fa(a)},bb=function(){return"hsb("+[this.h,this.s,this.b]+")"},cb=function(){return"hsl("+[this.h,this.s,this.l]+")"},Da=function(){return this.hex},Ea=function(a,l,n){null==l&&f.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(n=a.b,l=a.g,a=a.r);if(null==l&&f.is(a,"string"))n=f.getRGB(a),
a=n.r,l=n.g,n=n.b;if(1<a||1<l||1<n)a/=255,l/=255,n/=255;return[a,l,n]},Fa=function(a,l,n,x){a*=255;l*=255;n*=255;a={r:a,g:l,b:n,hex:f.rgb(a,l,n),toString:Da};f.is(x,"finite")&&(a.opacity=x);return a};f.color=function(a){var l;f.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(l=f.hsb2rgb(a),a.r=l.r,a.g=l.g,a.b=l.b,a.hex=l.hex):f.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(l=f.hsl2rgb(a),a.r=l.r,a.g=l.g,a.b=l.b,a.hex=l.hex):(f.is(a,"string")&&(a=f.getRGB(a)),f.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(l=
f.rgb2hsl(a),a.h=l.h,a.s=l.s,a.l=l.l,l=f.rgb2hsb(a),a.v=l.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1));a.toString=Da;return a};f.hsb2rgb=function(a,l,n,x){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(n=a.b,l=a.s,a=a.h,x=a.o);a*=360;var b,d,c,e,i;a=a%360/60;i=n*l;e=i*(1-u(a%2-1));b=d=c=n-i;a=~~a;b+=[i,e,0,0,e,i][a];d+=[e,i,i,e,0,0][a];c+=[0,0,e,i,i,e][a];return Fa(b,d,c,x)};f.hsl2rgb=function(a,l,n,x){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(n=a.l,l=a.s,a=a.h);if(1<a||1<l||1<n)a/=
360,l/=100,n/=100;var a=360*a,b,d,c,e,i;a=a%360/60;i=2*l*(0.5>n?n:1-n);e=i*(1-u(a%2-1));b=d=c=n-i/2;a=~~a;b+=[i,e,0,0,e,i][a];d+=[e,i,i,e,0,0][a];c+=[0,0,e,i,i,e][a];return Fa(b,d,c,x)};f.rgb2hsb=function(a,l,n){n=Ea(a,l,n);a=n[0];l=n[1];n=n[2];var x,b,d;b=i(a,l,n);d=b-j(a,l,n);x=0==d?null:b==a?(l-n)/d:b==l?(n-a)/d+2:(a-l)/d+4;x=60*((x+360)%6)/360;a=0==d?0:d/b;return{h:x,s:a,b:b,toString:bb}};f.rgb2hsl=function(a,l,n){n=Ea(a,l,n);a=n[0];l=n[1];n=n[2];var x,b,d,c,e;d=i(a,l,n);c=j(a,l,n);e=d-c;x=0==
e?null:d==a?(l-n)/e:d==l?(n-a)/e+2:(a-l)/e+4;x=60*((x+360)%6)/360;b=(d+c)/2;a=0==e?0:0.5>b?e/(2*b):e/(2-2*b);return{h:x,s:a,l:b,toString:cb}};f._path2string=function(){return this.join(",").replace(Ya,"$1")};f._preload=function(a,l){var n=r.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em";n.onload=function(){l.call(this);this.onload=null;r.doc.body.removeChild(this)};n.onerror=function(){r.doc.body.removeChild(this)};r.doc.body.appendChild(n);n.src=a};f.getRGB=
B(function(a){if(!a||(a=F(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:R};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:R};!Xa[G](a.toLowerCase().substring(0,2))&&"#"!=a.charAt()&&(a=fa(a));var l,n,b,d,e,i;if(a=a.match(Va)){a[2]&&(b=Y(a[2].substring(5),16),n=Y(a[2].substring(3,5),16),l=Y(a[2].substring(1,3),16));a[3]&&(b=Y((e=a[3].charAt(3))+e,16),n=Y((e=a[3].charAt(2))+e,16),l=Y((e=a[3].charAt(1))+e,16));a[4]&&(i=a[4][c](na),l=N(i[0]),"%"==i[0].slice(-1)&&(l*=2.55),
n=N(i[1]),"%"==i[1].slice(-1)&&(n*=2.55),b=N(i[2]),"%"==i[2].slice(-1)&&(b*=2.55),"rgba"==a[1].toLowerCase().slice(0,4)&&(d=N(i[3])),i[3]&&"%"==i[3].slice(-1)&&(d/=100));if(a[5])return i=a[5][c](na),l=N(i[0]),"%"==i[0].slice(-1)&&(l*=2.55),n=N(i[1]),"%"==i[1].slice(-1)&&(n*=2.55),b=N(i[2]),"%"==i[2].slice(-1)&&(b*=2.55),("deg"==i[0].slice(-3)||"\u00b0"==i[0].slice(-1))&&(l/=360),"hsba"==a[1].toLowerCase().slice(0,4)&&(d=N(i[3])),i[3]&&"%"==i[3].slice(-1)&&(d/=100),f.hsb2rgb(l,n,b,d);if(a[6])return i=
a[6][c](na),l=N(i[0]),"%"==i[0].slice(-1)&&(l*=2.55),n=N(i[1]),"%"==i[1].slice(-1)&&(n*=2.55),b=N(i[2]),"%"==i[2].slice(-1)&&(b*=2.55),("deg"==i[0].slice(-3)||"\u00b0"==i[0].slice(-1))&&(l/=360),"hsla"==a[1].toLowerCase().slice(0,4)&&(d=N(i[3])),i[3]&&"%"==i[3].slice(-1)&&(d/=100),f.hsl2rgb(l,n,b,d);a={r:l,g:n,b:b,toString:R};a.hex="#"+(16777216|b|n<<8|l<<16).toString(16).slice(1);f.is(d,"finite")&&(a.opacity=d);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:R}},f);f.hsb=B(function(a,
l,n){return f.hsb2rgb(a,l,n).hex});f.hsl=B(function(a,l,n){return f.hsl2rgb(a,l,n).hex});f.rgb=B(function(a,l,n){return"#"+(16777216|n|l<<8|a<<16).toString(16).slice(1)});f.getColor=function(a){var a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75},l=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;1<a.h&&(a.h=0,a.s-=0.2,0>=a.s&&(this.getColor.start={h:0,s:1,b:a.b}));return l.hex};f.getColor.reset=function(){delete this.start};f.parsePathString=B(function(a){if(!a)return null;var l={a:7,c:6,h:1,l:2,
m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];f.is(a,o)&&f.is(a[0],o)&&(n=da(a));n.length||F(a).replace(Za,function(a,b,d){var e=[],a=b.toLowerCase();d.replace(Aa,function(a,l){l&&e.push(+l)});"m"==a&&2<e.length&&(n.push([b][E](e.splice(0,2))),a="l",b="m"==b?"l":"L");if("r"==a)n.push([b][E](e));else for(;e.length>=l[a]&&!(n.push([b][E](e.splice(0,l[a]))),!l[a]););});n.toString=f._path2string;return n});f.parseTransformString=B(function(a){if(!a)return null;var l=[];f.is(a,o)&&f.is(a[0],o)&&(l=da(a));l.length||
F(a).replace($a,function(a,x,d){var e=[];b.call(x);d.replace(Aa,function(a,l){l&&e.push(+l)});l.push([x][E](e))});l.toString=f._path2string;return l});f.findDotsAtSegment=function(a,l,n,b,e,c,i,j,f){var h=1-f,m=g(h,3),u=g(h,2),k=f*f,z=k*f,q=m*a+3*u*f*n+3*h*f*f*e+z*i,m=m*l+3*u*f*b+3*h*f*f*c+z*j,u=a+2*f*(n-a)+k*(e-2*n+a),z=l+2*f*(b-l)+k*(c-2*b+l),D=n+2*f*(e-n)+k*(i-2*e+n),k=b+2*f*(c-b)+k*(j-2*c+b),a=h*a+f*n,l=h*l+f*b,e=h*e+f*i,c=h*c+f*j,j=90-180*d.atan2(u-D,z-k)/p;(u>D||z<k)&&(j+=180);return{x:q,y:m,
m:{x:u,y:z},n:{x:D,y:k},start:{x:a,y:l},end:{x:e,y:c},alpha:j}};f._removedFactory=function(a){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+a+"\u201d of removed object");}};var Ga=B(function(a){if(!a)return{x:0,y:0,width:0,height:0};for(var a=ba(a),l=0,n=0,b=[],d=[],e,c=0,f=a.length;c<f;c++)e=a[c],"M"==e[0]?(l=e[1],n=e[2],b.push(l),d.push(n)):(l=db(l,n,e[1],e[2],e[3],e[4],e[5],e[6]),b=b[E](l.min.x,l.max.x),d=d[E](l.min.y,l.max.y),l=e[5],n=e[6]);a=j[H](0,b);e=j[H](0,
d);return{x:a,y:e,width:i[H](0,b)-a,height:i[H](0,d)-e}},null,function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}}),da=function(a){var l=[];if(!f.is(a,o)||!f.is(a&&a[0],o))a=f.parsePathString(a);for(var b=0,x=a.length;b<x;b++){l[b]=[];for(var d=0,e=a[b].length;d<e;d++)l[b][d]=a[b][d]}l.toString=f._path2string;return l},eb=f._pathToRelative=B(function(a){if(!f.is(a,o)||!f.is(a&&a[0],o))a=f.parsePathString(a);var l=[],n=0,d=0,e=0,c=0,i=0;"M"==a[0][0]&&(n=a[0][1],d=a[0][2],e=n,c=d,i++,l.push(["M",
n,d]));for(var j=a.length;i<j;i++){var h=l[i]=[],g=a[i];if(g[0]!=b.call(g[0]))switch(h[0]=b.call(g[0]),h[0]){case "a":h[1]=g[1];h[2]=g[2];h[3]=g[3];h[4]=g[4];h[5]=g[5];h[6]=+(g[6]-n).toFixed(3);h[7]=+(g[7]-d).toFixed(3);break;case "v":h[1]=+(g[1]-d).toFixed(3);break;case "m":e=g[1],c=g[2];default:for(var m=1,u=g.length;m<u;m++)h[m]=+(g[m]-(m%2?n:d)).toFixed(3)}else{l[i]=[];"m"==g[0]&&(e=g[1]+n,c=g[2]+d);h=0;for(m=g.length;h<m;h++)l[i][h]=g[h]}g=l[i].length;switch(l[i][0]){case "z":n=e;d=c;break;case "h":n+=
+l[i][g-1];break;case "v":d+=+l[i][g-1];break;default:n+=+l[i][g-2],d+=+l[i][g-1]}}l.toString=f._path2string;return l},0,da),Ha=f._pathToAbsolute=B(function(a){if(!f.is(a,o)||!f.is(a&&a[0],o))a=f.parsePathString(a);if(!a||!a.length)return[["M",0,0]];var l=[],b=0,d=0,e=0,i=0,c=0;"M"==a[0][0]&&(b=+a[0][1],d=+a[0][2],e=b,i=d,c++,l[0]=["M",b,d]);for(var j,g=c,h=a.length;g<h;g++){l.push(c=[]);j=a[g];if(j[0]!=za.call(j[0]))switch(c[0]=za.call(j[0]),c[0]){case "A":c[1]=j[1];c[2]=j[2];c[3]=j[3];c[4]=j[4];
c[5]=j[5];c[6]=+(j[6]+b);c[7]=+(j[7]+d);break;case "V":c[1]=+j[1]+d;break;case "H":c[1]=+j[1]+b;break;case "R":for(var m=[b,d][E](j.slice(1)),u=2,p=m.length;u<p;u++)m[u]=+m[u]+b,m[++u]=+m[u]+d;l.pop();l=l[E](M(m));break;case "M":e=+j[1]+b,i=+j[2]+d;default:for(u=1,p=j.length;u<p;u++)c[u]=+j[u]+(u%2?b:d)}else if("R"==j[0])m=[b,d][E](j.slice(1)),l.pop(),l=l[E](M(m)),c=["R"][E](j.slice(-2));else{u=0;for(p=j.length;u<p;u++)c[u]=j[u]}switch(c[0]){case "Z":b=e;d=i;break;case "H":b=c[1];break;case "V":d=
c[1];break;case "M":e=c[c.length-2],i=c[c.length-1];default:b=c[c.length-2],d=c[c.length-1]}}l.toString=f._path2string;return l},null,da),Ia=function(a,l,b,d,e,c){var i=1/3,j=2/3;return[i*a+j*b,i*l+j*d,i*e+j*b,i*c+j*d,e,c]},Ja=function(a,l,b,e,i,j,f,g,h,m){var k=120*p/180,z=p/180*(+i||0),q=[],o,r=B(function(a,b,l){var n=a*d.cos(l)-b*d.sin(l),a=a*d.sin(l)+b*d.cos(l);return{x:n,y:a}});if(m)w=m[0],o=m[1],j=m[2],D=m[3];else{o=r(a,l,-z);a=o.x;l=o.y;o=r(g,h,-z);g=o.x;h=o.y;d.cos(p/180*i);d.sin(p/180*i);
o=(a-g)/2;w=(l-h)/2;D=o*o/(b*b)+w*w/(e*e);1<D&&(D=d.sqrt(D),b*=D,e*=D);var D=b*b,Q=e*e,D=(j==f?-1:1)*d.sqrt(u((D*Q-D*w*w-Q*o*o)/(D*w*w+Q*o*o))),j=D*b*w/e+(a+g)/2,D=D*-e*o/b+(l+h)/2,w=d.asin(((l-D)/e).toFixed(9));o=d.asin(((h-D)/e).toFixed(9));w=a<j?p-w:w;o=g<j?p-o:o;0>w&&(w=2*p+w);0>o&&(o=2*p+o);f&&w>o&&(w-=2*p);!f&&o>w&&(o-=2*p)}if(u(o-w)>k){var q=o,Q=g,t=h;o=w+k*(f&&o>w?1:-1);g=j+b*d.cos(o);h=D+e*d.sin(o);q=Ja(g,h,b,e,i,0,f,Q,t,[o,q,j,D])}j=o-w;i=d.cos(w);k=d.sin(w);f=d.cos(o);o=d.sin(o);j=d.tan(j/
4);b=4/3*b*j;j*=4/3*e;e=[a,l];a=[a+b*k,l-j*i];l=[g+b*o,h-j*f];g=[g,h];a[0]=2*e[0]-a[0];a[1]=2*e[1]-a[1];if(m)return[a,l,g][E](q);q=[a,l,g][E](q).join()[c](",");m=[];g=0;for(h=q.length;g<h;g++)m[g]=g%2?r(q[g-1],q[g],z).y:r(q[g],q[g+1],z).x;return m},ga=function(a,b,n,d,e,c,i,j,f){var h=1-f;return{x:g(h,3)*a+3*g(h,2)*f*n+3*h*f*f*e+g(f,3)*i,y:g(h,3)*b+3*g(h,2)*f*d+3*h*f*f*c+g(f,3)*j}},db=B(function(a,b,n,e,c,f,g,h){var m=c-2*n+a-(g-2*c+n),p=2*(n-a)-2*(c-n),k=a-n,o=(-p+d.sqrt(p*p-4*m*k))/2/m,z=(-p-d.sqrt(p*
p-4*m*k))/2/m,q=[b,h],r=[a,g],D;"1e12"<u(o)&&(o=0.5);"1e12"<u(z)&&(z=0.5);0<o&&1>o&&(D=ga(a,b,n,e,c,f,g,h,o),r.push(D.x),q.push(D.y));0<z&&1>z&&(D=ga(a,b,n,e,c,f,g,h,z),r.push(D.x),q.push(D.y));m=f-2*e+b-(h-2*f+e);p=2*(e-b)-2*(f-e);k=b-e;o=(-p+d.sqrt(p*p-4*m*k))/2/m;z=(-p-d.sqrt(p*p-4*m*k))/2/m;"1e12"<u(o)&&(o=0.5);"1e12"<u(z)&&(z=0.5);0<o&&1>o&&(D=ga(a,b,n,e,c,f,g,h,o),r.push(D.x),q.push(D.y));0<z&&1>z&&(D=ga(a,b,n,e,c,f,g,h,z),r.push(D.x),q.push(D.y));return{min:{x:j[H](0,r),y:j[H](0,q)},max:{x:i[H](0,
r),y:i[H](0,q)}}}),ba=f._path2curve=B(function(a,b){var n=Ha(a),d=b&&Ha(b),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},j=function(a,b){var l,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"][E](Ja[H](0,[b.x,b.y][E](a.slice(1))));break;case "S":l=b.x+(b.x-(b.bx||b.x));d=b.y+(b.y-(b.by||b.y));a=["C",l,d][E](a.slice(1));break;case "T":b.qx=b.x+(b.x-(b.qx||b.x));
b.qy=b.y+(b.y-(b.qy||b.y));a=["C"][E](Ia(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"][E](Ia(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"][E]([b.x,b.y,a[1],a[2],a[1],a[2]]);break;case "H":a=["C"][E]([b.x,b.y,a[1],b.y,a[1],b.y]);break;case "V":a=["C"][E]([b.x,b.y,b.x,a[1],b.x,a[1]]);break;case "Z":a=["C"][E]([b.x,b.y,b.X,b.Y,b.X,b.Y])}return a},f=function(a,b){if(7<a[b].length){a[b].shift();for(var l=a[b];l.length;)a.splice(b++,0,["C"][E](l.splice(0,6)));a.splice(b,
1);m=i(n.length,d&&d.length||0)}},g=function(a,b,l,e,c){a&&b&&"M"==a[c][0]&&"M"!=b[c][0]&&(b.splice(c,0,["M",e.x,e.y]),l.bx=0,l.by=0,l.x=a[c][1],l.y=a[c][2],m=i(n.length,d&&d.length||0))},h=0,m=i(n.length,d&&d.length||0);for(;h<m;h++){n[h]=j(n[h],e);f(n,h);d&&(d[h]=j(d[h],c));d&&f(d,h);g(n,d,e,c,h);g(d,n,c,e,h);var u=n[h],p=d&&d[h],k=u.length,o=d&&p.length;e.x=u[k-2];e.y=u[k-1];e.bx=N(u[k-4])||e.x;e.by=N(u[k-3])||e.y;c.bx=d&&(N(p[o-4])||c.x);c.by=d&&(N(p[o-3])||c.y);c.x=d&&p[o-2];c.y=d&&p[o-1]}return d?
[n,d]:n},null,da);f._parseDots=B(function(a){for(var b=[],d=0,e=a.length;d<e;d++){var c={},i=a[d].match(/^([^:]*):?([\d\.]*)/);c.color=f.getRGB(i[1]);if(c.color.error)return null;c.color=c.color.hex;i[2]&&(c.offset=i[2]+"%");b.push(c)}for(d=1,e=b.length-1;d<e;d++)if(!b[d].offset){a=N(b[d-1].offset||0);i=0;for(c=d+1;c<e;c++)if(b[c].offset){i=b[c].offset;break}i||(i=100,c=e);i=N(i);for(i=(i-a)/(c-d+1);d<c;d++)a+=i,b[d].offset=a+"%"}return b});var ha=f._tear=function(a,b){a==b.top&&(b.top=a.prev);a==
b.bottom&&(b.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)};f._tofront=function(a,b){b.top!==a&&(ha(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)};f._toback=function(a,b){b.bottom!==a&&(ha(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)};f._insertafter=function(a,b,d){ha(a,d);b==d.top&&(d.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a};f._insertbefore=function(a,b,d){ha(a,d);b==d.bottom&&(d.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;
b.prev=a;a.next=b};var Qa=f._extractTransform=function(a,b){if(null==b)return a._.transform;var b=F(b).replace(/\.{3}|\u2026/g,a._.transform||""),d=f.parseTransformString(b),e=0,c=0,i=0,j=1,h=1,g=a._,m=new y;g.transform=d||[];if(d)for(var u=0,p=d.length;u<p;u++){var k=d[u],o=k.length,z=F(k[0]).toLowerCase(),q=k[0]!=z,r=q?m.invert():0,w,t,A,v,B;"t"==z&&3==o?q?(w=r.x(0,0),t=r.y(0,0),A=r.x(k[1],k[2]),v=r.y(k[1],k[2]),m.translate(A-w,v-t)):m.translate(k[1],k[2]):"r"==z?2==o?(B=B||a.getBBox(1),m.rotate(k[1],
B.x+B.width/2,B.y+B.height/2),e+=k[1]):4==o&&(q?(A=r.x(k[2],k[3]),v=r.y(k[2],k[3]),m.rotate(k[1],A,v)):m.rotate(k[1],k[2],k[3]),e+=k[1]):"s"==z?2==o||3==o?(B=B||a.getBBox(1),m.scale(k[1],k[o-1],B.x+B.width/2,B.y+B.height/2),j*=k[1],h*=k[o-1]):5==o&&(q?(A=r.x(k[3],k[4]),v=r.y(k[3],k[4]),m.scale(k[1],k[2],A,v)):m.scale(k[1],k[2],k[3],k[4]),j*=k[1],h*=k[2]):"m"==z&&7==o&&m.add(k[1],k[2],k[3],k[4],k[5],k[6]);g.dirtyT=1;a.matrix=m}a.matrix=m;g.sx=j;g.sy=h;g.deg=e;g.dx=c=m.e;g.dy=i=m.f;1==j&&1==h&&!e&&
g.bbox?(g.bbox.x+=+c,g.bbox.y+=+i):g.dirtyT=1},Ka=function(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},Pa=f._equaliseTransform=function(a,b){b=F(b).replace(/\.{3}|\u2026/g,a);a=f.parseTransformString(a)||[];b=f.parseTransformString(b)||[];for(var d=i(a.length,b.length),e=[],c=[],j=0,g,h,m,k;j<d;j++){m=a[j]||Ka(b[j]);k=b[j]||Ka(m);
if(m[0]!=k[0]||"r"==m[0].toLowerCase()&&(m[2]!=k[2]||m[3]!=k[3])||"s"==m[0].toLowerCase()&&(m[3]!=k[3]||m[4]!=k[4]))return;e[j]=[];c[j]=[];for(g=0,h=i(m.length,k.length);g<h;g++)g in m&&(e[j][g]=m[g]),g in k&&(c[j][g]=k[g])}return{from:e,to:c}};f._getContainer=function(a,b,d,e){var c;c=null==e&&!f.is(a,"object")?r.doc.getElementById(a):a;if(null!=c)return c.tagName?null==b?{container:c,width:c.style.pixelWidth||c.offsetWidth,height:c.style.pixelHeight||c.offsetHeight}:{container:c,width:b,height:d}:
{container:1,x:a,y:b,width:d,height:e}};f.pathToRelative=eb;f._engine={};f.path2curve=ba;f.matrix=function(a,b,d,e,c,i){return new y(a,b,d,e,c,i)};(function(a){function b(a){var l=d.sqrt(e(a));a[0]&&(a[0]/=l);a[1]&&(a[1]/=l)}function e(a){return a[0]*a[0]+a[1]*a[1]}a.add=function(a,b,d,l,e,c){var n=[[],[],[]],i=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],b=[[a,d,e],[b,l,c],[0,0,1]];a&&a instanceof y&&(b=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(a=0;3>a;a++)for(d=0;3>d;d++){for(l=e=0;3>
l;l++)e+=i[a][l]*b[l][d];n[a][d]=e}this.a=n[0][0];this.b=n[1][0];this.c=n[0][1];this.d=n[1][1];this.e=n[0][2];this.f=n[1][2]};a.invert=function(){var a=this.a*this.d-this.b*this.c;return new y(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c*this.f-this.d*this.e)/a,(this.b*this.e-this.a*this.f)/a)};a.clone=function(){return new y(this.a,this.b,this.c,this.d,this.e,this.f)};a.translate=function(a,b){this.add(1,0,0,1,a,b)};a.scale=function(a,b,d,l){null==b&&(b=a);(d||l)&&this.add(1,0,0,1,d,l);this.add(a,
0,0,b,0,0);(d||l)&&this.add(1,0,0,1,-d,-l)};a.rotate=function(a,b,l){a=f.rad(a);b=b||0;l=l||0;var e=+d.cos(a).toFixed(9),a=+d.sin(a).toFixed(9);this.add(e,a,-a,e,b,l);this.add(1,0,0,1,-b,-l)};a.x=function(a,b){return a*this.a+b*this.c+this.e};a.y=function(a,b){return a*this.b+b*this.d+this.f};a.get=function(a){return+this[F.fromCharCode(97+a)].toFixed(4)};a.toString=function(){return f.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),
this.get(2),this.get(1),this.get(3),0,0].join()};a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};a.split=function(){var a={};a.dx=this.e;a.dy=this.f;var c=[[this.a,this.c],[this.b,this.d]];a.scalex=d.sqrt(e(c[0]));b(c[0]);a.shear=c[0][0]*c[1][0]+c[0][1]*c[1][1];
c[1]=[c[1][0]-c[0][0]*a.shear,c[1][1]-c[0][1]*a.shear];a.scaley=d.sqrt(e(c[1]));b(c[1]);a.shear/=a.scaley;var i=-c[0][1],c=c[1][1];0>c?(a.rotate=f.deg(d.acos(c)),0>i&&(a.rotate=360-a.rotate)):a.rotate=f.deg(d.asin(i));a.isSimple=!+a.shear.toFixed(9)&&(a.scalex.toFixed(9)==a.scaley.toFixed(9)||!a.rotate);a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate;a.noRotation=!+a.shear.toFixed(9)&&!a.rotate;return a};a.toTransformString=function(a){a=a||this[c]();return a.isSimple?
(a.scalex=+a.scalex.toFixed(4),a.scaley=+a.scaley.toFixed(4),a.rotate=+a.rotate.toFixed(4),(a.dx&&a.dy?"t"+[a.dx,a.dy]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[a.rotate,0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}})(y.prototype);var ia=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(ia&&4>ia[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==
navigator.vendor&&ia&&8>ia[1]?C.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:C.safari=ab;for(var fb=function(){this.returnValue=!1},gb=function(){return this.originalEvent.preventDefault()},hb=function(){this.cancelBubble=!0},ib=function(){return this.originalEvent.stopPropagation()},jb=function(){if(r.doc.addEventListener)return function(a,b,d,e){var c=O&&h[b]?h[b]:b,i=function(c){var i=c.clientX+(r.doc.documentElement.scrollLeft||
r.doc.body.scrollLeft),j=c.clientY+(r.doc.documentElement.scrollTop||r.doc.body.scrollTop);if(O&&h[G](b))for(var g=0,f=c.targetTouches&&c.targetTouches.length;g<f;g++)if(c.targetTouches[g].target==a){f=c;c=c.targetTouches[g];c.originalEvent=f;c.preventDefault=gb;c.stopPropagation=ib;break}return d.call(e,c,i,j)};a.addEventListener(c,i,!1);return function(){a.removeEventListener(c,i,!1);return!0}};if(r.doc.attachEvent)return function(a,b,d,c){var e=function(a){var a=a||r.win.event,b=a.clientX+(r.doc.documentElement.scrollLeft||
r.doc.body.scrollLeft),e=a.clientY+(r.doc.documentElement.scrollTop||r.doc.body.scrollTop);a.preventDefault=a.preventDefault||fb;a.stopPropagation=a.stopPropagation||hb;return d.call(c,a,b,e)};a.attachEvent("on"+b,e);return function(){a.detachEvent("on"+b,e);return!0}}}(),Z=[],ra=function(a){for(var b=a.clientX,d=a.clientY,c=r.doc.documentElement.scrollTop||r.doc.body.scrollTop,e=r.doc.documentElement.scrollLeft||r.doc.body.scrollLeft,i,j=Z.length;j--;){i=Z[j];if(O)for(var g=a.touches.length,h;g--;){if(h=
a.touches[g],h.identifier==i.el._drag.id){b=h.clientX;d=h.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var g=i.el.node,f;h=g.nextSibling;var m=g.parentNode,k=g.style.display;r.win.opera&&m.removeChild(g);g.style.display="none";f=i.el.paper.getElementByPoint(b,d);g.style.display=k;r.win.opera&&(h?m.insertBefore(g,h):m.appendChild(g));f&&eve("drag.over."+i.el.id,i.el,f);b+=e;d+=c;eve("drag.move."+i.el.id,i.move_scope||i.el,b-i.el._drag.x,d-i.el._drag.y,
b,d,a)}},sa=function(a){f.unmousemove(ra).unmouseup(sa);for(var b=Z.length,d;b--;)d=Z[b],d.el._drag={},eve("drag.end."+d.el.id,d.end_scope||d.start_scope||d.move_scope||d.el,a);Z=[]},J=f.el={},La=m.length;La--;)(function(a){f[a]=J[a]=function(b,d){f.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:jb(this.shape||this.node||r.doc,a,b,d||this)}));return this};f["un"+a]=J["un"+a]=function(b){for(var d=this.events,c=d.length;c--;)if(d[c].name==a&&d[c].f==b){d[c].unbind();
d.splice(c,1);!d.length&&delete this.events;break}return this}})(m[La]);J.data=function(a,b){var d=ca[this.id]=ca[this.id]||{};if(1==arguments.length){if(f.is(a,"object")){for(var c in a)a[G](c)&&this.data(c,a[c]);return this}eve("data.get."+this.id,this,d[a],a);return d[a]}d[a]=b;eve("data.set."+this.id,this,b,a);return this};J.removeData=function(a){null==a?ca[this.id]={}:ca[this.id]&&delete ca[this.id][a];return this};J.hover=function(a,b,d,c){return this.mouseover(a,d).mouseout(b,c||d)};J.unhover=
function(a,b){return this.unmouseover(a).unmouseout(b)};var $=[];J.drag=function(a,b,d,c,e,i){function j(g){(g.originalEvent||g).preventDefault();var h=r.doc.documentElement.scrollTop||r.doc.body.scrollTop,m=r.doc.documentElement.scrollLeft||r.doc.body.scrollLeft;this._drag.x=g.clientX+m;this._drag.y=g.clientY+h;this._drag.id=g.identifier;!Z.length&&f.mousemove(ra).mouseup(sa);Z.push({el:this,move_scope:c,start_scope:e,end_scope:i});b&&eve.on("drag.start."+this.id,b);a&&eve.on("drag.move."+this.id,
a);d&&eve.on("drag.end."+this.id,d);eve("drag.start."+this.id,e||c||this,g.clientX+m,g.clientY+h,g)}this._drag={};$.push({el:this,start:j});this.mousedown(j);return this};J.onDragOver=function(a){a?eve.on("drag.over."+this.id,a):eve.unbind("drag.over."+this.id)};J.undrag=function(){for(var a=$.length;a--;)$[a].el==this&&(this.unmousedown($[a].start),$.splice(a,1),eve.unbind("drag.*."+this.id));!$.length&&f.unmousemove(ra).unmouseup(sa)};C.circle=function(a,b,d){a=f._engine.circle(this,a||0,b||0,d||
0);this.__set__&&this.__set__.push(a);return a};C.rect=function(a,b,d,c,e){a=f._engine.rect(this,a||0,b||0,d||0,c||0,e||0);this.__set__&&this.__set__.push(a);return a};C.ellipse=function(a,b,d,c){a=f._engine.ellipse(this,a||0,b||0,d||0,c||0);this.__set__&&this.__set__.push(a);return a};C.path=function(a){a&&!f.is(a,"string")&&!f.is(a[0],o)&&(a+="");var b=f._engine.path(f.format[H](f,arguments),this);this.__set__&&this.__set__.push(b);return b};C.image=function(a,b,d,c,e){a=f._engine.image(this,a||
"about:blank",b||0,d||0,c||0,e||0);this.__set__&&this.__set__.push(a);return a};C.text=function(a,b,d){a=f._engine.text(this,a||0,b||0,F(d));this.__set__&&this.__set__.push(a);return a};C.set=function(a){!f.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new aa(a);this.__set__&&this.__set__.push(b);return b};C.setStart=function(a){this.__set__=a||this.set()};C.setFinish=function(){var a=this.__set__;delete this.__set__;return a};C.setSize=function(a,b){return f._engine.setSize.call(this,
a,b)};C.setViewBox=function(a,b,d,c,e){return f._engine.setViewBox.call(this,a,b,d,c,e)};C.top=C.bottom=null;C.raphael=f;C.getElementByPoint=function(a,b){var d,c,e=this.canvas,i=r.doc.elementFromPoint(a,b);if(r.win.opera&&"svg"==i.tagName){c=e.getBoundingClientRect();d=e.ownerDocument;var j=d.body,g=d.documentElement;d=c.top+(r.win.pageYOffset||g.scrollTop||j.scrollTop)-(g.clientTop||j.clientTop||0);c=c.left+(r.win.pageXOffset||g.scrollLeft||j.scrollLeft)-(g.clientLeft||j.clientLeft||0);j=e.createSVGRect();
j.x=a-c;j.y=b-d;j.width=j.height=1;d=e.getIntersectionList(j,null);d.length&&(i=d[d.length-1])}if(!i)return null;for(;i.parentNode&&i!=e.parentNode&&!i.raphael;)i=i.parentNode;i==this.canvas.parentNode&&(i=e);i=i&&i.raphael?this.getById(i.raphaelid):null;return i};C.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null};C.forEach=function(a,b){for(var d=this.bottom;d&&!(!1===a.call(b,d));)d=d.next;return this};J.getBBox=function(a){if(this.removed)return{};var b=this._;
if(a){if(b.dirty||!b.bboxwt)this.realPath=pa[this.type](this),b.bboxwt=Ga(this.realPath),b.bboxwt.toString=v,b.dirty=0;return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath)b.bboxwt=0,this.realPath=pa[this.type](this);b.bbox=Ga(Ca(this.realPath,this.matrix));b.bbox.toString=v;b.dirty=b.dirtyT=0}return b.bbox};J.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a};J.glow=function(a){if("text"==
this.type)return null;for(var a=a||{},b=(a.width||10)+(+this.attr("stroke-width")||1),d=a.fill||!1,c=a.opacity||0.5,e=a.offsetx||0,i=a.offsety||0,a=a.color||"#000",j=b/2,g=this.paper,h=g.set(),f=this.realPath||pa[this.type](this),f=this.matrix?Ca(f,this.matrix):f,m=1;m<j+1;m++)h.push(g.path(f).attr({stroke:a,fill:d?a:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b/j*m).toFixed(3),opacity:+(c/j).toFixed(3)}));return h.insertBefore(this).translate(e,i)};var ta={},ja=function(a,
b,d,c,e,i,j,h,m){var k=0,u=100,p=[a,b,d,c,e,i,j,h].join(),o=ta[p],z,q;!o&&(ta[p]=o={data:[]});o.timer&&clearTimeout(o.timer);o.timer=setTimeout(function(){delete ta[p]},2E3);if(null!=m&&!o.precision){var r=ja(a,b,d,c,e,i,j,h);o.precision=10*~~r;o.data=[]}u=o.precision||u;for(r=0;r<u+1;r++){o.data[r*u]?q=o.data[r*u]:(q=f.findDotsAtSegment(a,b,d,c,e,i,j,h,r/u),o.data[r*u]=q);r&&(k+=g(g(z.x-q.x,2)+g(z.y-q.y,2),0.5));if(null!=m&&k>=m)return q;z=q}if(null==m)return k},ua=function(a,b){return function(d,
c,e){for(var d=ba(d),i,j,g,h,m="",k={},u,p=0,o=0,z=d.length;o<z;o++){g=d[o];if("M"==g[0])i=+g[1],j=+g[2];else{h=ja(i,j,g[1],g[2],g[3],g[4],g[5],g[6]);if(p+h>c){if(b&&!k.start){u=ja(i,j,g[1],g[2],g[3],g[4],g[5],g[6],c-p);m+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y];if(e)return m;k.start=m;m=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,g[5],g[6]].join();p+=h;i=+g[5];j=+g[6];continue}if(!a&&!b)return u=ja(i,j,g[1],g[2],g[3],g[4],g[5],g[6],c-p),{x:u.x,y:u.y,alpha:u.alpha}}p+=h;i=+g[5];j=+g[6]}m+=
g.shift()+g}k.end=m;u=a?p:b?k:f.findDotsAtSegment(i,j,g[0],g[1],g[2],g[3],g[4],g[5],1);u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha});return u}},Ma=ua(1),Na=ua(),va=ua(0,1);f.getTotalLength=Ma;f.getPointAtLength=Na;f.getSubpath=function(a,b,d){if(1.0E-6>this.getTotalLength(a)-d)return va(a,b).end;a=va(a,d,1);return b?va(a,b).end:a};J.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():Ma(this.attrs.path)};J.getPointAtLength=function(a){if("path"==this.type)return Na(this.attrs.path,
a)};J.getSubpath=function(a,b){if("path"==this.type)return f.getSubpath(this.attrs.path,a,b)};var U=f.easing_formulas={linear:function(a){return a},"<":function(a){return g(a,1.7)},">":function(a){return g(a,0.48)},"<>":function(a){var b=0.48-a/1.04,c=d.sqrt(0.1734+b*b),a=c-b,a=g(u(a),1/3)*(0>a?-1:1),b=-c-b,b=g(u(b),1/3)*(0>b?-1:1),a=a+b+0.5;return 3*(1-a)*a*a+a*a*a},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){return a==
!!a?a:g(2,-10*a)*d.sin(2*(a-0.075)*p/0.3)+1},bounce:function(a){var b;a<1/2.75?b=7.5625*a*a:a<2/2.75?(a-=1.5/2.75,b=7.5625*a*a+0.75):a<2.5/2.75?(a-=2.25/2.75,b=7.5625*a*a+0.9375):(a-=2.625/2.75,b=7.5625*a*a+0.984375);return b}};U.easeIn=U["ease-in"]=U["<"];U.easeOut=U["ease-out"]=U[">"];U.easeInOut=U["ease-in-out"]=U["<>"];U["back-in"]=U.backIn;U["back-out"]=U.backOut;var L=[],ya=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||
window.msRequestAnimationFrame||function(a){setTimeout(a,16)},la=function(){for(var a=+new Date,b=0;b<L.length;b++){var d=L[b];if(!d.el.removed&&!d.paused){var c=a-d.start,i=d.ms,j=d.easing,g=d.from,h=d.diff,m=d.to,u=d.el,k={},p,o={},q;d.initstatus?(c=(d.initstatus*d.anim.top-d.prev)/(d.percent-d.prev)*i,d.status=d.initstatus,delete d.initstatus,d.stop&&L.splice(b--,1)):d.status=(d.prev+(d.percent-d.prev)*(c/i))/d.anim.top;if(!(0>c))if(c<i){var r=j(c/i),t;for(t in g)if(g[G](t)){switch(ka[t]){case z:p=
+g[t]+r*i*h[t];break;case "colour":p="rgb("+[wa(ma(g[t].r+r*i*h[t].r)),wa(ma(g[t].g+r*i*h[t].g)),wa(ma(g[t].b+r*i*h[t].b))].join()+")";break;case "path":p=[];c=0;for(j=g[t].length;c<j;c++){p[c]=[g[t][c][0]];m=1;for(o=g[t][c].length;m<o;m++)p[c][m]=+g[t][c][m]+r*i*h[t][c][m];p[c]=p[c].join(T)}p=p.join(T);break;case "transform":if(h[t].real){p=[];for(c=0,j=g[t].length;c<j;c++){p[c]=[g[t][c][0]];for(m=1,o=g[t][c].length;m<o;m++)p[c][m]=g[t][c][m]+r*i*h[t][c][m]}}else p=function(a){return+g[t][a]+r*i*
h[t][a]},p=[["m",p(0),p(1),p(2),p(3),p(4),p(5)]];break;case "csv":if("clip-rect"==t)for(p=[],c=4;c--;)p[c]=+g[t][c]+r*i*h[t][c];break;default:j=[][E](g[t]);for(p=[],c=u.paper.customAttributes[t].length;c--;)p[c]=+j[c]+r*i*h[t][c]}k[t]=p}u.attr(k);(function(a,b,d){setTimeout(function(){eve("anim.frame."+a,b,d)})})(u.id,u,d.anim)}else{(function(a,b,d){setTimeout(function(){eve("anim.frame."+b.id,b,d);eve("anim.finish."+b.id,b,d);f.is(a,"function")&&a.call(b)})})(d.callback,u,d.anim);u.attr(m);L.splice(b--,
1);if(1<d.repeat&&!d.next){for(q in m)m[G](q)&&(o[q]=d.totalOrigin[q]);d.el.attr(o);e(d.anim,d.el,d.anim.percents[0],null,d.totalOrigin,d.repeat-1)}d.next&&!d.stop&&e(d.anim,d.el,d.next,null,d.totalOrigin,d.repeat)}}}f.svg&&u&&u.paper&&u.paper.safari();L.length&&ya(la)},wa=function(a){return 255<a?255:0>a?0:a};J.animateWith=function(a,b,d,c,e,i){d=d?f.animation(d,c,e,i):b;a=a.status(b);return this.animate(d).status(d,a*b.ms/d.ms)};J.onAnimation=function(a){a?eve.on("anim.frame."+this.id,a):eve.unbind("anim.frame."+
this.id);return this};k.prototype.delay=function(a){var b=new k(this.anim,this.ms);b.times=this.times;b.del=+a||0;return b};k.prototype.repeat=function(a){var b=new k(this.anim,this.ms);b.del=this.del;b.times=d.floor(i(a,0))||1;return b};f.animation=function(a,b,d,c){if(a instanceof k)return a;if(f.is(d,"function")||!d)c=c||d||null,d=null;a=Object(a);b=+b||0;var e={},i,j;for(j in a)a[G](j)&&N(j)!=j&&N(j)+"%"!=j&&(i=!0,e[j]=a[j]);if(!i)return new k(a,b);d&&(e.easing=d);c&&(e.callback=c);return new k({100:e},
b)};J.animate=function(a,b,d,c){if(this.removed)return c&&c.call(this),this;a=a instanceof k?a:f.animation(a,b,d,c);e(a,this,a.percents[0],null,this.attr());return this};J.setTime=function(a,b){a&&null!=b&&this.status(a,j(b,a.ms)/a.ms);return this};J.status=function(a,b){var d=[],c=0,i,g;if(null!=b)return e(a,this,-1,j(b,1)),this;for(i=L.length;c<i;c++)if(g=L[c],g.el.id==this.id&&(!a||g.anim==a)){if(a)return g.status;d.push({anim:g.anim,status:g.status})}return a?0:d};J.pause=function(a){for(var b=
0;b<L.length;b++)L[b].el.id==this.id&&(!a||L[b].anim==a)&&!1!==eve("anim.pause."+this.id,this,L[b].anim)&&(L[b].paused=!0);return this};J.resume=function(a){for(var b=0;b<L.length;b++)if(L[b].el.id==this.id&&(!a||L[b].anim==a)){var d=L[b];!1!==eve("anim.resume."+this.id,this,d.anim)&&(delete d.paused,this.status(d.anim,d.status))}return this};J.stop=function(a){for(var b=0;b<L.length;b++)L[b].el.id==this.id&&(!a||L[b].anim==a)&&!1!==eve("anim.stop."+this.id,this,L[b].anim)&&L.splice(b--,1);return this};
J.toString=function(){return"Rapha\u00ebl\u2019s object"};var aa=function(a){this.items=[];this.length=0;this.type="set";if(a)for(var b=0,d=a.length;b<d;b++)a[b]&&(a[b].constructor==J.constructor||a[b].constructor==aa)&&(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},S=aa.prototype;S.push=function(){for(var a,b,d=0,c=arguments.length;d<c;d++)a=arguments[d],a&&(a.constructor==J.constructor||a.constructor==aa)&&(b=this.items.length,this[b]=this.items[b]=a,this.length++);
return this};S.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};S.forEach=function(a,b){for(var d=0,c=this.items.length;d<c&&!(!1===a.call(b,this.items[d],d));d++);return this};for(var xa in J)J[G](xa)&&(S[xa]=function(a){return function(){var b=arguments;return this.forEach(function(d){d[a][H](d,b)})}}(xa));S.attr=function(a,b){if(a&&f.is(a,o)&&f.is(a[0],"object"))for(var d=0,c=a.length;d<c;d++)this.items[d].attr(a[d]);else{d=0;for(c=this.items.length;d<c;d++)this.items[d].attr(a,
b)}return this};S.clear=function(){for(;this.length;)this.pop()};S.splice=function(a,b,d){a=0>a?i(this.length+a,0):a;b=i(0,j(this.length-a,b));var c=[],e=[],g=[],h;for(h=2;h<arguments.length;h++)g.push(arguments[h]);for(h=0;h<b;h++)e.push(this[a+h]);for(;h<this.length-a;h++)c.push(this[a+h]);var m=g.length;for(h=0;h<m+c.length;h++)this.items[a+h]=this[a+h]=h<m?g[h]:c[h-m];for(h=this.items.length=this.length-=b-m;this[h];)delete this[h++];return new aa(e)};S.exclude=function(a){for(var b=0,d=this.length;b<
d;b++)if(this[b]==a)return this.splice(b,1),!0};S.animate=function(a,b,d,c){(f.is(d,"function")||!d)&&(c=d||null);var e=this.items.length,i=e,j=this,g;if(!e)return this;c&&(g=function(){!--e&&c.call(j)});d=f.is(d,"string")?d:g;b=f.animation(a,b,d,g);for(a=this.items[--i].animate(b);i--;)this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(a,b);return this};S.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this};S.getBBox=function(){for(var a=
[],b=[],d=[],c=[],e=this.items.length;e--;)if(!this.items[e].removed){var g=this.items[e].getBBox();a.push(g.x);b.push(g.y);d.push(g.x+g.width);c.push(g.y+g.height)}a=j[H](0,a);b=j[H](0,b);return{x:a,y:b,width:i[H](0,d)-a,height:i[H](0,c)-b}};S.clone=function(a){for(var a=new aa,b=0,d=this.items.length;b<d;b++)a.push(this.items[b].clone());return a};S.toString=function(){return"Rapha\u00ebl\u2018s set"};f.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},
glyphs:{}},d=a.face["font-family"],c;for(c in a.face)a.face[G](c)&&(b.face[c]=a.face[c]);this.fonts[d]?this.fonts[d].push(b):this.fonts[d]=[b];if(!a.svg){b.face["units-per-em"]=Y(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[G](e)&&(d=a.glyphs[e],b.glyphs[e]={w:d.w,k:{},d:d.d&&"M"+d.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},d.k))for(var i in d.k)d[G](i)&&(b.glyphs[e].k[i]=d.k[i])}return a};C.getFont=function(a,b,d,c){c=c||"normal";
d=d||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(f.fonts){var e=f.fonts[a];if(!e){var a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i"),i;for(i in f.fonts)if(f.fonts[G](i)&&a.test(i)){e=f.fonts[i];break}}var j;if(e){i=0;for(a=e.length;i<a&&!(j=e[i],j.face["font-weight"]==b&&(j.face["font-style"]==d||!j.face["font-style"])&&j.face["font-stretch"]==c);i++);}return j}};C.print=function(a,b,d,e,g,h,m){h=h||"middle";m=i(j(m||0,1),-1);var u=this.set(),k=F(d)[c](""),
p=0;f.is(e,d)&&(e=this.getFont(e));if(e){for(var d=(g||16)/e.face["units-per-em"],o=e.face.bbox[c](X),g=+o[0],h=+o[1]+("baseline"==h?o[3]-o[1]+ +e.face.descent:(o[3]-o[1])/2),o=0,z=k.length;o<z;o++){var q=o&&e.glyphs[k[o-1]]||{},r=e.glyphs[k[o]];p+=o?(q.w||e.w)+(q.k&&q.k[k[o]]||0)+e.w*m:0;r&&r.d&&u.push(this.path(r.d).attr({fill:"#000",stroke:"none",transform:[["t",p*d,0]]}))}u.transform(["...s",d,d,g,h,"t",(a-g)/d,(b-h)/d])}return u};C.add=function(a){if(f.is(a,"array"))for(var b=this.set(),d=0,
c=a.length,e;d<c;d++)e=a[d]||{},A[G](e.type)&&b.push(this[e.type]().attr(e));return b};f.format=function(a,b){var d=f.is(b,o)?[0][E](b):arguments;a&&f.is(a,"string")&&d.length-1&&(a=a.replace(q,function(a,b){return null==d[++b]?"":d[b]}));return a||""};f.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,d=function(a,d,c){var e=c;d.replace(b,function(a,b,d,c,i){b=b||c;e&&(b in e&&(e=e[b]),"function"==typeof e&&i&&(e=e()))});e=(null==e||e==c?a:e)+
"";return e};return function(b,c){return(""+b).replace(a,function(a,b){return d(a,b,c)})}}();f.ninja=function(){P?r.win.Raphael=K:delete Raphael;return f};f.st=S;(function(a,b,d){function c(){/in/.test(a.readyState)?setTimeout(c,9):f.eve("DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(b,d=function(){a.removeEventListener(b,d,!1);a.readyState="complete"},!1),a.readyState="loading");c()})(document,"DOMContentLoaded");P?r.win.Raphael=f:Raphael=f;eve.on("DOMload",function(){V=!0})})();
window.Raphael.svg&&function(e){var k=String,t=parseFloat,v=parseInt,y=Math,M=y.max,R=y.abs,B=y.pow,f=/[, ]+/,V=e.eve,X={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},A={};e.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var q=function(c,m){if(m){"string"==typeof c&&(c=q(c));for(var h in m)m.hasOwnProperty(h)&&("xlink:"==
h.substring(0,6)?c.setAttributeNS("http://www.w3.org/1999/xlink",h.substring(6),k(m[h])):c.setAttribute(h,k(m[h])))}else c=e._g.doc.createElementNS("http://www.w3.org/2000/svg",c),c.style&&(c.style.webkitTapHighlightColor="rgba(0,0,0,0)");return c},G=function(c,m){var h="linear",b=c.id+m,d=0.5,i=0.5,j=c.node,f=c.paper,g=j.style,p=e._g.doc.getElementById(b);if(!p){m=k(m).replace(e._radial_gradient,function(b,c,e){h="radial";c&&e&&(d=t(c),i=t(e),b=2*(0.5<i)-1,0.25<B(d-0.5,2)+B(i-0.5,2)&&(i=y.sqrt(0.25-
B(d-0.5,2))*b+0.5)&&0.5!=i&&(i=i.toFixed(5)-1.0E-5*b));return""});m=m.split(/\s*\-\s*/);if("linear"==h){var z=m.shift(),z=-t(z);if(isNaN(z))return null;var o=[0,0,y.cos(e.rad(z)),y.sin(e.rad(z))],z=1/(M(R(o[2]),R(o[3]))||1);o[2]*=z;o[3]*=z;0>o[2]&&(o[0]=-o[2],o[2]=0);0>o[3]&&(o[1]=-o[3],o[3]=0)}z=e._parseDots(m);if(!z)return null;b=b.replace(/[\(\)\s,\xb0#]/g,"_");c.gradient&&b!=c.gradient.id&&(f.defs.removeChild(c.gradient),delete c.gradient);if(!c.gradient){p=q(h+"Gradient",{id:b});c.gradient=p;
q(p,"radial"==h?{fx:d,fy:i}:{x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientTransform:c.matrix.invert()});f.defs.appendChild(p);f=0;for(o=z.length;f<o;f++)p.appendChild(q("stop",{offset:z[f].offset?z[f].offset:f?"100%":"0%","stop-color":z[f].color||"#fff"}))}}q(j,{fill:"url(#"+b+")",opacity:1,"fill-opacity":1});g.fill="";g.opacity=1;g.fillOpacity=1;return 1},r=function(c){var e=c.getBBox(1);q(c.pattern,{patternTransform:c.matrix.invert()+" translate("+e.x+","+e.y+")"})},P=function(c,m,h){if("path"==c.type){for(var b=
k(m).toLowerCase().split("-"),d=c.paper,i=h?"end":"start",j=c.node,f=c.attrs,g=f["stroke-width"],p=b.length,z="classic",o,r,t,y,v,B=3,C=3,E=5;p--;)switch(b[p]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":z=b[p];break;case "wide":C=5;break;case "narrow":C=2;break;case "long":B=5;break;case "short":B=2}"open"==z?(B+=2,C+=2,E+=2,t=1,y=h?4:1,v={fill:"none",stroke:f.stroke}):(y=t=B/2,v={fill:f.stroke,stroke:"none"});c._.arrows?h?(c._.arrows.endPath&&A[c._.arrows.endPath]--,
c._.arrows.endMarker&&A[c._.arrows.endMarker]--):(c._.arrows.startPath&&A[c._.arrows.startPath]--,c._.arrows.startMarker&&A[c._.arrows.startMarker]--):c._.arrows={};if("none"!=z){b="raphael-marker-"+z;p="raphael-marker-"+i+z+B+C;e._g.doc.getElementById(b)?A[b]++:(d.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:X[z],id:b})),A[b]=1);var F=e._g.doc.getElementById(p),G;F?(A[p]++,G=F.getElementsByTagName("use")[0]):(F=q(q("marker"),{id:p,markerHeight:C,markerWidth:B,orient:"auto",refX:y,refY:C/
2}),G=q(q("use"),{"xlink:href":"#"+b,transform:(h?" rotate(180 "+B/2+" "+C/2+") ":" ")+"scale("+B/E+","+C/E+")","stroke-width":1/((B/E+C/E)/2)}),F.appendChild(G),d.defs.appendChild(F),A[p]=1);q(G,v);d=t*("diamond"!=z&&"oval"!=z);h?(o=c._.arrows.startdx*g||0,r=e.getTotalLength(f.path)-d*g):(o=d*g,r=e.getTotalLength(f.path)-(c._.arrows.enddx*g||0));v={};v["marker-"+i]="url(#"+p+")";if(r||o)v.d=Raphael.getSubpath(f.path,o,r);q(j,v);c._.arrows[i+"Path"]=b;c._.arrows[i+"Marker"]=p;c._.arrows[i+"dx"]=d;
c._.arrows[i+"Type"]=z;c._.arrows[i+"String"]=m}else h?(o=c._.arrows.startdx*g||0,r=e.getTotalLength(f.path)-o):(o=0,r=e.getTotalLength(f.path)-(c._.arrows.enddx*g||0)),c._.arrows[i+"Path"]&&q(j,{d:Raphael.getSubpath(f.path,o,r)}),delete c._.arrows[i+"Path"],delete c._.arrows[i+"Marker"],delete c._.arrows[i+"dx"],delete c._.arrows[i+"Type"],delete c._.arrows[i+"String"];for(v in A)A.hasOwnProperty(v)&&!A[v]&&(c=e._g.doc.getElementById(v))&&c.parentNode.removeChild(c)}},K={"":[0],none:[0],"-":[3,1],
".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},I=function(c,e,h){if(e=K[k(e).toLowerCase()]){for(var b=c.attrs["stroke-width"]||"1",h={round:b,square:b,butt:0}[c.attrs["stroke-linecap"]||h["stroke-linecap"]]||0,d=[],i=e.length;i--;)d[i]=e[i]*b+(i%2?1:-1)*h;q(c.node,{"stroke-dasharray":d.join(",")})}},C=function(c,m){var h=c.node,b=c.attrs,d=h.style.visibility;h.style.visibility="hidden";for(var i in m)if(m.hasOwnProperty(i)&&
e._availableAttrs.hasOwnProperty(i)){var j=m[i];b[i]=j;switch(i){case "blur":c.blur(j);break;case "href":case "title":case "target":var u=h.parentNode;if("a"!=u.tagName.toLowerCase()){var g=q("a");u.insertBefore(g,h);g.appendChild(h);u=g}"target"==i&&"blank"==j?u.setAttributeNS("http://www.w3.org/1999/xlink","show","new"):u.setAttributeNS("http://www.w3.org/1999/xlink",i,j);break;case "cursor":h.style.cursor=j;break;case "transform":c.transform(j);break;case "arrow-start":P(c,j);break;case "arrow-end":P(c,
j,1);break;case "clip-rect":u=k(j).split(f);if(4==u.length){c.clip&&c.clip.parentNode.parentNode.removeChild(c.clip.parentNode);var g=q("clipPath"),p=q("rect");g.id=e.createUUID();q(p,{x:u[0],y:u[1],width:u[2],height:u[3]});g.appendChild(p);c.paper.defs.appendChild(g);q(h,{"clip-path":"url(#"+g.id+")"});c.clip=p}if(!j&&(j=h.getAttribute("clip-path")))j=e._g.doc.getElementById(j.replace(/(^url\(#|\)$)/g,"")),j&&j.parentNode.removeChild(j),q(h,{"clip-path":""}),delete c.clip;break;case "path":"path"==
c.type&&(q(h,{d:j?b.path=e._pathToAbsolute(j):"M0,0"}),c._.dirty=1,c._.arrows&&("startString"in c._.arrows&&P(c,c._.arrows.startString),"endString"in c._.arrows&&P(c,c._.arrows.endString,1)));break;case "width":if(h.setAttribute(i,j),c._.dirty=1,b.fx)i="x",j=b.x;else break;case "x":b.fx&&(j=-b.x-(b.width||0));case "rx":if("rx"==i&&"rect"==c.type)break;case "cx":h.setAttribute(i,j);c.pattern&&r(c);c._.dirty=1;break;case "height":if(h.setAttribute(i,j),c._.dirty=1,b.fy)i="y",j=b.y;else break;case "y":b.fy&&
(j=-b.y-(b.height||0));case "ry":if("ry"==i&&"rect"==c.type)break;case "cy":h.setAttribute(i,j);c.pattern&&r(c);c._.dirty=1;break;case "r":"rect"==c.type?q(h,{rx:j,ry:j}):h.setAttribute(i,j);c._.dirty=1;break;case "src":"image"==c.type&&h.setAttributeNS("http://www.w3.org/1999/xlink","href",j);break;case "stroke-width":if(1!=c._.sx||1!=c._.sy)j/=M(R(c._.sx),R(c._.sy))||1;c.paper._vbSize&&(j*=c.paper._vbSize);h.setAttribute(i,j);b["stroke-dasharray"]&&I(c,b["stroke-dasharray"],m);c._.arrows&&("startString"in
c._.arrows&&P(c,c._.arrows.startString),"endString"in c._.arrows&&P(c,c._.arrows.endString,1));break;case "stroke-dasharray":I(c,j,m);break;case "fill":var z=k(j).match(e._ISURL);if(z){var g=q("pattern"),o=q("image");g.id=e.createUUID();q(g,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});q(o,{x:0,y:0,"xlink:href":z[1]});g.appendChild(o);(function(b){e._preload(z[1],function(){var d=this.offsetWidth,e=this.offsetHeight;q(b,{width:d,height:e});q(o,{width:d,height:e});c.paper.safari()})})(g);
c.paper.defs.appendChild(g);h.style.fill="url(#"+g.id+")";q(h,{fill:"url(#"+g.id+")"});c.pattern=g;c.pattern&&r(c);break}var t=e.getRGB(j);if(t.error){if(("circle"==c.type||"ellipse"==c.type||"r"!=k(j).charAt())&&G(c,j)){if("opacity"in b||"fill-opacity"in b){var y=e._g.doc.getElementById(h.getAttribute("fill").replace(/^url\(#|\)$/g,""));if(y){var A=y.getElementsByTagName("stop");q(A[A.length-1],{"stop-opacity":("opacity"in b?b.opacity:1)*("fill-opacity"in b?b["fill-opacity"]:1)})}}b.gradient=j;b.fill=
"none";break}}else delete m.gradient,delete b.gradient,!e.is(b.opacity,"undefined")&&e.is(m.opacity,"undefined")&&q(h,{opacity:b.opacity}),!e.is(b["fill-opacity"],"undefined")&&e.is(m["fill-opacity"],"undefined")&&q(h,{"fill-opacity":b["fill-opacity"]});t.hasOwnProperty("opacity")&&q(h,{"fill-opacity":1<t.opacity?t.opacity/100:t.opacity});case "stroke":t=e.getRGB(j);h.setAttribute(i,t.hex);"stroke"==i&&t.hasOwnProperty("opacity")&&q(h,{"stroke-opacity":1<t.opacity?t.opacity/100:t.opacity});"stroke"==
i&&c._.arrows&&("startString"in c._.arrows&&P(c,c._.arrows.startString),"endString"in c._.arrows&&P(c,c._.arrows.endString,1));break;case "gradient":("circle"==c.type||"ellipse"==c.type||"r"!=k(j).charAt())&&G(c,j);break;case "opacity":b.gradient&&!b.hasOwnProperty("stroke-opacity")&&q(h,{"stroke-opacity":1<j?j/100:j});case "fill-opacity":if(b.gradient){y=e._g.doc.getElementById(h.getAttribute("fill").replace(/^url\(#|\)$/g,""));y&&(A=y.getElementsByTagName("stop"),q(A[A.length-1],{"stop-opacity":j}));
break}default:"font-size"==i&&(j=v(j,10)+"px"),u=i.replace(/(\-.)/g,function(b){return b.substring(1).toUpperCase()}),h.style[u]=j,c._.dirty=1,h.setAttribute(i,j)}}H(c,m);h.style.visibility=d},H=function(c,f){if("text"==c.type&&(f.hasOwnProperty("text")||f.hasOwnProperty("font")||f.hasOwnProperty("font-size")||f.hasOwnProperty("x")||f.hasOwnProperty("y"))){var h=c.attrs,b=c.node,d=b.firstChild?v(e._g.doc.defaultView.getComputedStyle(b.firstChild,"").getPropertyValue("font-size"),10):10;if(f.hasOwnProperty("text")){for(h.text=
f.text;b.firstChild;)b.removeChild(b.firstChild);for(var i=k(f.text).split("\n"),j=[],u,g=0,p=i.length;g<p;g++)u=q("tspan"),g&&q(u,{dy:1.2*d,x:h.x}),u.appendChild(e._g.doc.createTextNode(i[g])),b.appendChild(u),j[g]=u}else{j=b.getElementsByTagName("tspan");for(g=0,p=j.length;g<p;g++)g?q(j[g],{dy:1.2*d,x:h.x}):q(j[0],{dy:0})}q(b,{x:h.x,y:h.y});c._.dirty=1;b=c._getBBox();(h=h.y-(b.y+b.height/2))&&e.is(h,"finite")&&q(j[0],{dy:h})}},E=function(c,f){this[0]=this.node=c;c.raphael=!0;this.id=e._oid++;c.raphaelid=
this.id;this.matrix=e.matrix();this.realPath=null;this.paper=f;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!f.bottom&&(f.bottom=this);this.prev=f.top;f.top&&(f.top.next=this);f.top=this;this.next=null},O=e.el;E.prototype=O;O.constructor=E;e._engine.path=function(c,e){var h=q("path");e.canvas&&e.canvas.appendChild(h);h=new E(h,e);h.type="path";C(h,{fill:"none",stroke:"#000",path:c});return h};O.rotate=function(c,e,h){if(this.removed)return this;c=k(c).split(f);
c.length-1&&(e=t(c[1]),h=t(c[2]));c=t(c[0]);null==h&&(e=h);if(null==e||null==h)h=this.getBBox(1),e=h.x+h.width/2,h=h.y+h.height/2;this.transform(this._.transform.concat([["r",c,e,h]]));return this};O.scale=function(c,e,h,b){if(this.removed)return this;c=k(c).split(f);c.length-1&&(e=t(c[1]),h=t(c[2]),b=t(c[3]));c=t(c[0]);null==e&&(e=c);null==b&&(h=b);if(null==h||null==b)var d=this.getBBox(1);h=null==h?d.x+d.width/2:h;b=null==b?d.y+d.height/2:b;this.transform(this._.transform.concat([["s",c,e,h,b]]));
return this};O.translate=function(c,e){if(this.removed)return this;c=k(c).split(f);c.length-1&&(e=t(c[1]));c=t(c[0])||0;e=+e||0;this.transform(this._.transform.concat([["t",c,e]]));return this};O.transform=function(c){var f=this._;if(null==c)return f.transform;e._extractTransform(this,c);this.clip&&q(this.clip,{transform:this.matrix.invert()});this.pattern&&r(this);this.node&&q(this.node,{transform:this.matrix});if(1!=f.sx||1!=f.sy)this.attr({"stroke-width":this.attrs.hasOwnProperty("stroke-width")?
this.attrs["stroke-width"]:1});return this};O.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};O.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};O.remove=function(){if(!this.removed){var c=this.paper;c.__set__&&c.__set__.exclude(this);V.unbind("*.*."+this.id);this.gradient&&c.defs.removeChild(this.gradient);e._tear(this,c);this.node.parentNode.removeChild(this.node);for(var f in this)this[f]="function"==typeof this[f]?
e._removedFactory(f):null;this.removed=!0}};O._getBBox=function(){if("none"==this.node.style.display){this.show();var c=!0}var e={};try{e=this.node.getBBox()}catch(h){}finally{e=e||{}}c&&this.hide();return e};O.attr=function(c,k){if(this.removed)return this;if(null==c){var h={},b;for(b in this.attrs)this.attrs.hasOwnProperty(b)&&(h[b]=this.attrs[b]);h.gradient&&"none"==h.fill&&(h.fill=h.gradient)&&delete h.gradient;h.transform=this._.transform;return h}if(null==k&&e.is(c,"string")){if("fill"==c&&
"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==c)return this._.transform;b=c.split(f);for(var h={},d=0,i=b.length;d<i;d++)c=b[d],c in this.attrs?h[c]=this.attrs[c]:e.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=e._availableAttrs[c];return i-1?h:h[b[0]]}if(null==k&&e.is(c,"array")){h={};for(d=0,i=c.length;d<i;d++)h[c[d]]=this.attr(c[d]);return h}null!=k?(h={},h[c]=k):null!=c&&e.is(c,"object")&&(h=c);for(d in h)V("attr."+
d+"."+this.id,this,h[d]);for(d in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(d)&&h.hasOwnProperty(d)&&e.is(this.paper.customAttributes[d],"function"))for(i in b=this.paper.customAttributes[d].apply(this,[].concat(h[d])),this.attrs[d]=h[d],b)b.hasOwnProperty(i)&&(h[i]=b[i]);C(this,h);return this};O.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);
var c=this.paper;c.top!=this&&e._tofront(this,c);return this};O.toBack=function(){if(this.removed)return this;var c=this.node.parentNode;"a"==c.tagName.toLowerCase()?c.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):c.firstChild!=this.node&&c.insertBefore(this.node,this.node.parentNode.firstChild);e._toback(this,this.paper);return this};O.insertAfter=function(c){if(this.removed)return this;var f=c.node||c[c.length-1].node;f.nextSibling?f.parentNode.insertBefore(this.node,
f.nextSibling):f.parentNode.appendChild(this.node);e._insertafter(this,c,this.paper);return this};O.insertBefore=function(c){if(this.removed)return this;var f=c.node||c[0].node;f.parentNode.insertBefore(this.node,f);e._insertbefore(this,c,this.paper);return this};O.blur=function(c){if(0!==+c){var f=q("filter"),h=q("feGaussianBlur");this.attrs.blur=c;f.id=e.createUUID();q(h,{stdDeviation:+c||1.5});f.appendChild(h);this.paper.defs.appendChild(f);this._blur=f;q(this.node,{filter:"url(#"+f.id+")"})}else this._blur&&
(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};e._engine.circle=function(c,e,f,b){var d=q("circle");c.canvas&&c.canvas.appendChild(d);c=new E(d,c);c.attrs={cx:e,cy:f,r:b,fill:"none",stroke:"#000"};c.type="circle";q(d,c.attrs);return c};e._engine.rect=function(c,e,f,b,d,i){var j=q("rect");c.canvas&&c.canvas.appendChild(j);c=new E(j,c);c.attrs={x:e,y:f,width:b,height:d,r:i||0,rx:i||0,ry:i||0,fill:"none",stroke:"#000"};c.type=
"rect";q(j,c.attrs);return c};e._engine.ellipse=function(c,e,f,b,d){var i=q("ellipse");c.canvas&&c.canvas.appendChild(i);c=new E(i,c);c.attrs={cx:e,cy:f,rx:b,ry:d,fill:"none",stroke:"#000"};c.type="ellipse";q(i,c.attrs);return c};e._engine.image=function(c,e,f,b,d,i){var j=q("image");q(j,{x:f,y:b,width:d,height:i,preserveAspectRatio:"none"});j.setAttributeNS("http://www.w3.org/1999/xlink","href",e);c.canvas&&c.canvas.appendChild(j);c=new E(j,c);c.attrs={x:f,y:b,width:d,height:i,src:e};c.type="image";
return c};e._engine.text=function(c,f,h,b){var d=q("text");c.canvas&&c.canvas.appendChild(d);c=new E(d,c);c.attrs={x:f,y:h,"text-anchor":"middle",text:b,font:e._availableAttrs.font,stroke:"none",fill:"#000"};c.type="text";C(c,c.attrs);return c};e._engine.setSize=function(c,e){this.width=c||this.width;this.height=e||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this};e._engine.create=
function(){var c=e._getContainer.apply(0,arguments),f=c&&c.container,h=c.x,b=c.y,d=c.width,c=c.height;if(!f)throw Error("SVG container not found.");var i=q("svg"),j;h=h||0;b=b||0;d=d||512;c=c||342;q(i,{height:c,version:1.1,width:d,xmlns:"http://www.w3.org/2000/svg"});1==f?(i.style.cssText="overflow:hidden;position:absolute;left:"+h+"px;top:"+b+"px",e._g.doc.body.appendChild(i),j=1):(i.style.cssText="overflow:hidden;position:relative",f.firstChild?f.insertBefore(i,f.firstChild):f.appendChild(i));f=
new e._Paper;f.width=d;f.height=c;f.canvas=i;f.clear();f._left=f._top=0;j&&(f.renderfix=function(){});f.renderfix();return f};e._engine.setViewBox=function(c,e,f,b,d){V("setViewBox",this,this._viewBox,[c,e,f,b,d]);var i=M(f/this.width,b/this.height),j=this.top,k,g;for(null==c?(this._vbSize&&(i=1),delete this._vbSize,k="0 0 "+this.width+" "+this.height):(this._vbSize=i,k=c+" "+e+" "+f+" "+b),q(this.canvas,{viewBox:k,preserveAspectRatio:d?"meet":"xMinYMin"});i&&j;)g="stroke-width"in j.attrs?j.attrs["stroke-width"]:
1,j.attr({"stroke-width":g}),j._.dirty=1,j._.dirtyT=1,j=j.prev;this._viewBox=[c,e,f,b,!!d];return this};e.prototype.renderfix=function(){var c=this.canvas,e=c.style,f=c.getScreenCTM()||c.createSVGMatrix(),c=-f.e%1,f=-f.f%1;if(c||f)c&&(this._left=(this._left+c)%1,e.left=this._left+"px"),f&&(this._top=(this._top+f)%1,e.top=this._top+"px")};e.prototype.clear=function(){e.eve("clear",this);for(var c=this.canvas;c.firstChild;)c.removeChild(c.firstChild);this.bottom=this.top=null;(this.desc=q("desc")).appendChild(e._g.doc.createTextNode("Created with Rapha\u00ebl "+
e.version));c.appendChild(this.desc);c.appendChild(this.defs=q("defs"))};e.prototype.remove=function(){V("remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var c in this)this[c]="function"==typeof this[c]?e._removedFactory(c):null};var T=e.st,F;for(F in O)O.hasOwnProperty(F)&&!T.hasOwnProperty(F)&&(T[F]=function(c){return function(){var e=arguments;return this.forEach(function(f){f[c].apply(f,e)})}}(F))}(window.Raphael);
window.Raphael.vml&&function(e){var k=String,t=parseFloat,v=Math,y=v.round,M=v.max,R=v.min,B=v.abs,f=/[, ]+/,V=e.eve,X={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},A=/([clmz]),?([^clmz]*)/gi,q=/ progid:\S+Blur\([^\)]+\)/g,G=/-?[^,\s-]+/g,r={path:1,rect:1,image:1},P={circle:1,ellipse:1},K=function(b){var d=/[ahqstv]/ig,c=e._pathToAbsolute;k(b).match(d)&&(c=e._path2curve);d=/[clmz]/g;if(c==e._pathToAbsolute&&!k(b).match(d))return b=k(b).replace(A,function(b,d,c){var e=[],i="m"==d.toLowerCase(),
j=X[d];c.replace(G,function(b){i&&2==e.length&&(j+=e+X["m"==d?"l":"L"],e=[]);e.push(y(21600*b))});return j+e});for(var d=c(b),j,b=[],f=0,g=d.length;f<g;f++){c=d[f];j=d[f][0].toLowerCase();"z"==j&&(j="x");for(var h=1,m=c.length;h<m;h++)j+=y(21600*c[h])+(h!=m-1?",":"");b.push(j)}return b.join(" ")},I=function(b,d,c){var j=e.matrix();j.rotate(-b,0.5,0.5);return{dx:j.x(d,c),dy:j.y(d,c)}},C=function(b,d,c,e,f,g){var h=b._,k=b.matrix,o=h.fillpos,b=b.node,m=b.style,q=1,r="",t=21600/d,y=21600/c;m.visibility=
"hidden";if(d&&c){b.coordsize=B(t)+" "+B(y);m.rotation=g*(0>d*c?-1:1);if(g){var v=I(g,e,f);e=v.dx;f=v.dy}0>d&&(r+="x");0>c&&(r+=" y")&&(q=-1);m.flip=r;b.coordorigin=e*-t+" "+f*-y;if(o||h.fillsize)e=b.getElementsByTagName("fill"),e=e&&e[0],b.removeChild(e),o&&(v=I(g,k.x(o[0],o[1]),k.y(o[0],o[1])),e.position=v.dx*q+" "+v.dy*q),h.fillsize&&(e.size=h.fillsize[0]*B(d)+" "+h.fillsize[1]*B(c)),b.appendChild(e);m.visibility="visible"}};e.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+
this.version};var H=function(b,d,c){for(var d=k(d).toLowerCase().split("-"),c=c?"end":"start",e=d.length,f="classic",g="medium",h="medium";e--;)switch(d[e]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":f=d[e];break;case "wide":case "narrow":h=d[e];break;case "long":case "short":g=d[e]}b=b.node.getElementsByTagName("stroke")[0];b[c+"arrow"]=f;b[c+"arrowlength"]=g;b[c+"arrowwidth"]=h},E=function(b,d){b.attrs=b.attrs||{};var i=b.node,j=b.attrs,h=i.style,g=r[b.type]&&
(d.x!=j.x||d.y!=j.y||d.width!=j.width||d.height!=j.height||d.cx!=j.cx||d.cy!=j.cy||d.rx!=j.rx||d.ry!=j.ry||d.r!=j.r),p=P[b.type]&&(j.cx!=d.cx||j.cy!=d.cy||j.r!=d.r||j.rx!=d.rx||j.ry!=d.ry),m;for(m in d)d.hasOwnProperty(m)&&(j[m]=d[m]);g&&(j.path=e._getPath[b.type](b),b._.dirty=1);d.href&&(i.href=d.href);d.title&&(i.title=d.title);d.target&&(i.target=d.target);d.cursor&&(h.cursor=d.cursor);"blur"in d&&b.blur(d.blur);if(d.path&&"path"==b.type||g)i.path=K(~k(j.path).toLowerCase().indexOf("r")?e._pathToAbsolute(j.path):
j.path),"image"==b.type&&(b._.fillpos=[j.x,j.y],b._.fillsize=[j.width,j.height],C(b,1,1,0,0,0));"transform"in d&&b.transform(d.transform);if(p){g=+j.cx;p=+j.cy;m=+j.rx||+j.r||0;var o=+j.ry||+j.r||0;i.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",y(21600*(g-m)),y(21600*(p-o)),y(21600*(g+m)),y(21600*(p+o)),y(21600*g))}if("clip-rect"in d){g=k(d["clip-rect"]).split(f);if(4==g.length)g[2]=+g[2]+ +g[0],g[3]=+g[3]+ +g[1],p=i.clipRect||e._g.doc.createElement("div"),m=p.style,m.clip=e.format("rect({1}px {2}px {3}px {0}px)",
g),i.clipRect||(m.position="absolute",m.top=0,m.left=0,m.width=b.paper.width+"px",m.height=b.paper.height+"px",i.parentNode.insertBefore(p,i),p.appendChild(i),i.clipRect=p);d["clip-rect"]||i.clipRect&&(i.clipRect.style.clip="auto")}if(b.textpath)g=b.textpath.style,d.font&&(g.font=d.font),d["font-family"]&&(g.fontFamily='"'+d["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"'),d["font-size"]&&(g.fontSize=d["font-size"]),d["font-weight"]&&(g.fontWeight=d["font-weight"]),d["font-style"]&&
(g.fontStyle=d["font-style"]);"arrow-start"in d&&H(b,d["arrow-start"]);"arrow-end"in d&&H(b,d["arrow-end"],1);if(null!=d.opacity||null!=d["stroke-width"]||null!=d.fill||null!=d.src||null!=d.stroke||null!=d["stroke-width"]||null!=d["stroke-opacity"]||null!=d["fill-opacity"]||null!=d["stroke-dasharray"]||null!=d["stroke-miterlimit"]||null!=d["stroke-linejoin"]||null!=d["stroke-linecap"]){g=i.getElementsByTagName("fill");g=g&&g[0];!g&&(g=c("fill"));"image"==b.type&&d.src&&(g.src=d.src);d.fill&&(g.on=
!0);if(null==g.on||"none"==d.fill||null===d.fill)g.on=!1;if(g.on&&d.fill)(p=k(d.fill).match(e._ISURL))?(g.parentNode==i&&i.removeChild(g),g.rotate=!0,g.src=p[1],g.type="tile",m=b.getBBox(1),g.position=m.x+" "+m.y,b._.fillpos=[m.x,m.y],e._preload(p[1],function(){b._.fillsize=[this.offsetWidth,this.offsetHeight]})):(g.color=e.getRGB(d.fill).hex,g.src="",g.type="solid",e.getRGB(d.fill).error&&(b.type in{circle:1,ellipse:1}||"r"!=k(d.fill).charAt())&&O(b,d.fill,g)&&(j.fill="none",j.gradient=d.fill,g.rotate=
!1));if("fill-opacity"in d||"opacity"in d)m=((+j["fill-opacity"]+1||2)-1)*((+j.opacity+1||2)-1)*((+e.getRGB(d.fill).o+1||2)-1),m=R(M(m,0),1),g.opacity=m,g.src&&(g.color="none");i.appendChild(g);g=i.getElementsByTagName("stroke")&&i.getElementsByTagName("stroke")[0];p=!1;!g&&(p=g=c("stroke"));if(d.stroke&&"none"!=d.stroke||d["stroke-width"]||null!=d["stroke-opacity"]||d["stroke-dasharray"]||d["stroke-miterlimit"]||d["stroke-linejoin"]||d["stroke-linecap"])g.on=!0;("none"==d.stroke||null===d.stroke||
null==g.on||0==d.stroke||0==d["stroke-width"])&&(g.on=!1);m=e.getRGB(d.stroke);g.on&&d.stroke&&(g.color=m.hex);m=((+j["stroke-opacity"]+1||2)-1)*((+j.opacity+1||2)-1)*((+m.o+1||2)-1);o=0.75*(t(d["stroke-width"])||1);m=R(M(m,0),1);null==d["stroke-width"]&&(o=j["stroke-width"]);d["stroke-width"]&&(g.weight=o);o&&1>o&&(m*=o)&&(g.weight=1);g.opacity=m;d["stroke-linejoin"]&&(g.joinstyle=d["stroke-linejoin"]||"miter");g.miterlimit=d["stroke-miterlimit"]||8;d["stroke-linecap"]&&(g.endcap="butt"==d["stroke-linecap"]?
"flat":"square"==d["stroke-linecap"]?"square":"round");if(d["stroke-dasharray"])m={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},g.dashstyle=m.hasOwnProperty(d["stroke-dasharray"])?m[d["stroke-dasharray"]]:"";p&&i.appendChild(g)}if("text"==b.type){b.paper.canvas.style.display="";i=b.paper.span;g=j.font&&j.font.match(/\d+(?:\.\d*)?(?=px)/);h=i.style;j.font&&(h.font=j.font);
j["font-family"]&&(h.fontFamily=j["font-family"]);j["font-weight"]&&(h.fontWeight=j["font-weight"]);j["font-style"]&&(h.fontStyle=j["font-style"]);g=t(j["font-size"]||g&&g[0])||10;h.fontSize=100*g+"px";b.textpath.string&&(i.innerHTML=k(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));h=i.getBoundingClientRect();b.W=j.w=(h.right-h.left)/100;b.H=j.h=(h.bottom-h.top)/100;b.X=j.x;b.Y=j.y+b.H/2;("x"in d||"y"in d)&&(b.path.v=e.format("m{0},{1}l{2},{1}",y(21600*j.x),
y(21600*j.y),y(21600*j.x)+1));h="x,y,text,font,font-family,font-weight,font-style,font-size".split(",");i=0;for(g=h.length;i<g;i++)if(h[i]in d){b._.dirty=1;break}switch(j["text-anchor"]){case "start":b.textpath.style["v-text-align"]="left";b.bbx=b.W/2;break;case "end":b.textpath.style["v-text-align"]="right";b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},O=function(b,d,c){b.attrs=b.attrs||{};var j=Math.pow,f="linear",g=".5 .5";b.attrs.gradient=
d;d=k(d).replace(e._radial_gradient,function(b,d,c){f="radial";d&&c&&(d=t(d),c=t(c),0.25<j(d-0.5,2)+j(c-0.5,2)&&(c=v.sqrt(0.25-j(d-0.5,2))*(2*(0.5<c)-1)+0.5),g=d+" "+c);return""});d=d.split(/\s*\-\s*/);if("linear"==f){var h=d.shift(),h=-t(h);if(isNaN(h))return null}d=e._parseDots(d);if(!d)return null;b=b.shape||b.node;if(d.length){b.removeChild(c);c.on=!0;c.method="none";c.color=d[0].color;c.color2=d[d.length-1].color;for(var m=[],o=0,q=d.length;o<q;o++)d[o].offset&&m.push(d[o].offset+" "+d[o].color);
c.colors=m.length?m.join():"0% "+c.color;"radial"==f?(c.type="gradientTitle",c.focus="100%",c.focussize="0 0",c.focusposition=g,c.angle=0):(c.type="gradient",c.angle=(270-h)%360);b.appendChild(c)}return 1},T=function(b,d){this[0]=this.node=b;b.raphael=!0;this.id=e._oid++;b.raphaelid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=d;this.matrix=e.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!d.bottom&&(d.bottom=this);this.prev=d.top;d.top&&(d.top.next=this);d.top=this;
this.next=null},F=e.el;T.prototype=F;F.constructor=T;F.transform=function(b){if(null==b)return this._.transform;var d=this.paper._viewBoxShift,c=d?"s"+[d.scale,d.scale]+"-1-1t"+[d.dx,d.dy]:"",j;d&&(j=b=k(b).replace(/\.{3}|\u2026/g,this._.transform||""));e._extractTransform(this,c+b);var d=this.matrix.clone(),f=this.skew,b=this.node,c=~k(this.attrs.fill).indexOf("-"),g=!k(this.attrs.fill).indexOf("url(");d.translate(-0.5,-0.5);g||c||"image"==this.type?(f.matrix="1 0 0 1",f.offset="0 0",f=d.split(),
c&&f.noRotation||!f.isSimple?(b.style.filter=d.toFilter(),c=this.getBBox(),f=this.getBBox(1),d=c.x-f.x,c=c.y-f.y,b.coordorigin=-21600*d+" "+-21600*c,C(this,1,1,d,c,0)):(b.style.filter="",C(this,f.scalex,f.scaley,f.dx,f.dy,f.rotate))):(b.style.filter="",f.matrix=k(d),f.offset=d.offset());j&&(this._.transform=j);return this};F.rotate=function(b,d,c){if(this.removed)return this;if(null!=b){b=k(b).split(f);b.length-1&&(d=t(b[1]),c=t(b[2]));b=t(b[0]);null==c&&(d=c);if(null==d||null==c)c=this.getBBox(1),
d=c.x+c.width/2,c=c.y+c.height/2;this._.dirtyT=1;this.transform(this._.transform.concat([["r",b,d,c]]));return this}};F.translate=function(b,d){if(this.removed)return this;b=k(b).split(f);b.length-1&&(d=t(b[1]));b=t(b[0])||0;d=+d||0;this._.bbox&&(this._.bbox.x+=b,this._.bbox.y+=d);this.transform(this._.transform.concat([["t",b,d]]));return this};F.scale=function(b,d,c,e){if(this.removed)return this;b=k(b).split(f);b.length-1&&(d=t(b[1]),c=t(b[2]),e=t(b[3]),isNaN(c)&&(c=null),isNaN(e)&&(e=null));b=
t(b[0]);null==d&&(d=b);null==e&&(c=e);if(null==c||null==e)var h=this.getBBox(1);c=null==c?h.x+h.width/2:c;e=null==e?h.y+h.height/2:e;this.transform(this._.transform.concat([["s",b,d,c,e]]));this._.dirtyT=1;return this};F.hide=function(){!this.removed&&(this.node.style.display="none");return this};F.show=function(){!this.removed&&(this.node.style.display="");return this};F._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};F.remove=
function(){if(!this.removed){this.paper.__set__&&this.paper.__set__.exclude(this);e.eve.unbind("*.*."+this.id);e._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]="function"==typeof this[b]?e._removedFactory(b):null;this.removed=!0}};F.attr=function(b,d){if(this.removed)return this;if(null==b){var c={},j;for(j in this.attrs)this.attrs.hasOwnProperty(j)&&(c[j]=this.attrs[j]);c.gradient&&"none"==c.fill&&
(c.fill=c.gradient)&&delete c.gradient;c.transform=this._.transform;return c}if(null==d&&e.is(b,"string")){if("fill"==b&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;j=b.split(f);for(var c={},h=0,g=j.length;h<g;h++)b=j[h],b in this.attrs?c[b]=this.attrs[b]:e.is(this.paper.customAttributes[b],"function")?c[b]=this.paper.customAttributes[b].def:c[b]=e._availableAttrs[b];return g-1?c:c[j[0]]}if(this.attrs&&null==d&&e.is(b,"array")){c={};for(h=0,g=b.length;h<g;h++)c[b[h]]=this.attr(b[h]);
return c}null!=d&&(c={},c[b]=d);null==d&&e.is(b,"object")&&(c=b);for(h in c)V("attr."+h+"."+this.id,this,c[h]);if(c){for(h in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(h)&&c.hasOwnProperty(h)&&e.is(this.paper.customAttributes[h],"function"))for(g in j=this.paper.customAttributes[h].apply(this,[].concat(c[h])),this.attrs[h]=c[h],j)j.hasOwnProperty(g)&&(c[g]=j[g]);c.text&&"text"==this.type&&(this.textpath.string=c.text);E(this,c)}return this};F.toFront=function(){!this.removed&&
this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&e._tofront(this,this.paper);return this};F.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper));return this};F.insertAfter=function(b){if(this.removed)return this;b.constructor==e.st.constructor&&(b=b[b.length-1]);b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):
b.node.parentNode.appendChild(this.node);e._insertafter(this,b,this.paper);return this};F.insertBefore=function(b){if(this.removed)return this;b.constructor==e.st.constructor&&(b=b[0]);b.node.parentNode.insertBefore(this.node,b.node);e._insertbefore(this,b,this.paper);return this};F.blur=function(b){var d=this.node.runtimeStyle,c=d.filter;c=c.replace(q,"");0!==+b?(this.attrs.blur=b,d.filter=c+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+b||1.5)+")",d.margin=e.format("-{0}px 0 0 -{0}px",
y(+b||1.5))):(d.filter=c,d.margin=0,delete this.attrs.blur)};e._engine.path=function(b,d){var e=c("shape");e.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";e.coordsize="21600 21600";e.coordorigin=d.coordorigin;var f=new T(e,d),h={fill:"none",stroke:"#000"};b&&(h.path=b);f.type="path";f.path=[];f.Path="";E(f,h);d.canvas.appendChild(e);h=c("skew");h.on=!0;e.appendChild(h);f.skew=h;f.transform("");return f};e._engine.rect=function(b,d,c,f,h,g){var k=e._rectPath(d,c,f,h,g),b=b.path(k),
m=b.attrs;b.X=m.x=d;b.Y=m.y=c;b.W=m.width=f;b.H=m.height=h;m.r=g;m.path=k;b.type="rect";return b};e._engine.ellipse=function(b,d,c,e,f){b=b.path();b.X=d-e;b.Y=c-f;b.W=2*e;b.H=2*f;b.type="ellipse";E(b,{cx:d,cy:c,rx:e,ry:f});return b};e._engine.circle=function(b,d,c,e){b=b.path();b.X=d-e;b.Y=c-e;b.W=b.H=2*e;b.type="circle";E(b,{cx:d,cy:c,r:e});return b};e._engine.image=function(b,d,c,f,h,g){var k=e._rectPath(c,f,h,g),b=b.path(k).attr({stroke:"none"}),m=b.attrs,o=b.node,q=o.getElementsByTagName("fill")[0];
m.src=d;b.X=m.x=c;b.Y=m.y=f;b.W=m.width=h;b.H=m.height=g;m.path=k;b.type="image";q.parentNode==o&&o.removeChild(q);q.rotate=!0;q.src=d;q.type="tile";b._.fillpos=[c,f];b._.fillsize=[h,g];o.appendChild(q);C(b,1,1,0,0,0);return b};e._engine.text=function(b,d,f,h){var m=c("shape"),g=c("path"),p=c("textpath");d=d||0;f=f||0;h=h||"";g.v=e.format("m{0},{1}l{2},{1}",y(21600*d),y(21600*f),y(21600*d)+1);g.textpathok=!0;p.string=k(h);p.on=!0;m.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";
m.coordsize="21600 21600";m.coordorigin="0 0";var q=new T(m,b),o={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:h};q.shape=m;q.path=g;q.textpath=p;q.type="text";q.attrs.text=k(h);q.attrs.x=d;q.attrs.y=f;q.attrs.w=1;q.attrs.h=1;E(q,o);m.appendChild(p);m.appendChild(g);b.canvas.appendChild(m);b=c("skew");b.on=!0;m.appendChild(b);q.skew=b;q.transform("");return q};e._engine.setSize=function(b,d){var c=this.canvas.style;this.width=b;this.height=d;b==+b&&(b+="px");d==+d&&(d+="px");c.width=
b;c.height=d;c.clip="rect(0 "+b+" "+d+" 0)";this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox);return this};e._engine.setViewBox=function(b,d,c,f,h){e.eve("setViewBox",this,this._viewBox,[b,d,c,f,h]);var g=this.width,k=this.height,m=1/M(c/g,f/k),o,q;h&&(o=k/f,q=g/c,c*o<g&&(b-=(g-c*o)/2/o),f*q<k&&(d-=(k-f*q)/2/q));this._viewBox=[b,d,c,f,!!h];this._viewBoxShift={dx:-b,dy:-d,scale:m};this.forEach(function(b){b.transform("...")});return this};var c;e._engine.initWin=function(b){var d=b.document;
d.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!d.namespaces.rvml&&d.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),c=function(b){return d.createElement("<rvml:"+b+' class="rvml">')}}catch(e){c=function(b){return d.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};e._engine.initWin(e._g.win);e._engine.create=function(){var b=e._getContainer.apply(0,arguments),d=b.container,c=b.height,f=b.width,h=b.x,b=b.y;if(!d)throw Error("VML container not found.");
var g=new e._Paper,k=g.canvas=e._g.doc.createElement("div"),m=k.style;h=h||0;b=b||0;f=f||512;c=c||342;g.width=f;g.height=c;f==+f&&(f+="px");c==+c&&(c+="px");g.coordsize="21600000 21600000";g.coordorigin="0 0";g.span=e._g.doc.createElement("span");g.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";k.appendChild(g.span);m.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
f,c);1==d?(e._g.doc.body.appendChild(k),m.left=h+"px",m.top=b+"px",m.position="absolute"):d.firstChild?d.insertBefore(k,d.firstChild):d.appendChild(k);g.renderfix=function(){};return g};e.prototype.clear=function(){e.eve("clear",this);this.canvas.innerHTML="";this.span=e._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};e.prototype.remove=function(){e.eve("remove",
this);this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?e._removedFactory(b):null;return!0};var m=e.st,h;for(h in F)F.hasOwnProperty(h)&&!m.hasOwnProperty(h)&&(m[h]=function(b){return function(){var c=arguments;return this.forEach(function(e){e[b].apply(e,c)})}}(h))}(window.Raphael);var ThemeModel=function(e,k,t,v){this.model=e;this.paper=e.paper;this.theme=k;k=t/10;e=0.6*k;this.selx=t/2;this.sely=v-0.7*k;this.selector=this.paper.image("themes/"+this.theme+"/selector.png",this.selx-k/2,this.sely-k/2,k,k);this.icon=this.paper.image("themes/"+this.theme+"/icon.png",this.selx-e/2,this.sely-e/2,e,e);this.selector.hide();this.icon.hide();var e=k/4,y=0.55*k,y=[{type:"text","font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx-0.7*y,y:this.sely-0.7*y,"text-anchor":"end"},
{type:"text","font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx-y,y:this.sely,"text-anchor":"end"},{type:"text","font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx-0.7*y,y:this.sely+0.7*y,"text-anchor":"end"},{type:"text","font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx+0.7*y,y:this.sely+0.7*y,"text-anchor":"start"},{type:"text","font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx+y,y:this.sely,"text-anchor":"start"},{type:"text",
"font-size":e,"font-family":"Arial","font-weight":"bold",x:this.selx+0.7*y,y:this.sely-0.7*y,"text-anchor":"start"}];this.optionShadow=this.paper.add(y);this.options=this.paper.add(y);for(y=0;y<this.options.length;y++){var M=0;(function(e,k,f,t){var v=f[t];v.attr({fill:"rgb(250,250,250)",cursor:"pointer"});v.mousedown(function(){e.selectOption(t)}).mouseover(function(){f[M].animate({fill:"rgb(250,250,250)"},200);v.animate({fill:"rgb(255,166,10)"},200);v.toFront();k.safari();M=t}).mouseout(function(){v.animate({fill:"rgb(250,250,250)"},
200);k.safari()});v.hide()})(this.model,this.paper,this.options,y);this.optionShadow[y].attr({fill:"rgba(0,0,0,0.7)"});this.optionShadow[y].translate(1,1);this.optionShadow[y].hide()}k*=1.5;this.play=this.paper.image("themes/"+this.theme+"/play.png",t/2-k/2,v/2-k/2,k,k);this.play.click(this.model.playClicked.bind(this.model));this.play.node.style.cursor="pointer";this.play.hide();this.eventIndicator=null;t=e/2;v-=1.5*e;this.playControl=this.paper.image("themes/"+this.theme+"/play_control.png",t,v,
e,e).attr({opacity:0});this.pauseControl=this.paper.image("themes/"+this.theme+"/pause_control.png",t,v,e,e).attr({opacity:0});this.playControl.hide();this.pauseControl.hide();this.playControl.click(function(){this.playControl.hide();this.pauseControl.show();this.pauseControl.attr({opacity:1});this.playControl.attr({opacity:0});this.model.playVideo()}.bind(this));this.pauseControl.click(function(){this.pauseControl.hide();this.playControl.show();this.playControl.attr({opacity:1});this.pauseControl.attr({opacity:0});
this.model.pauseVideo()}.bind(this));this.controlsHidden=this.eventIndicatorHidden=!0};ThemeModel.prototype.rotateSelector=function(e){this.selector.attr({transform:"r"+e})};ThemeModel.prototype.showOptions=function(e){this.icon.show();this.selector.show();for(var k=0;k<e.length;k++)void 0!=e[k]&&(this.options[k].attr({text:e[k]}),this.options[k].show(),this.optionShadow[k].attr({text:e[k]}),this.optionShadow[k].show())};
ThemeModel.prototype.hideOptions=function(){this.icon.hide();this.selector.hide();for(var e=0;6>e;e++)this.options[e].hide(),this.optionShadow[e].hide()};ThemeModel.prototype.showControls=function(e){if(!0==this.controlsHidden)e?(this.playControl.show(),this.playControl.animate({opacity:1},200,"<>")):(this.pauseControl.show(),this.pauseControl.animate({opacity:1},200,"<>")),this.controlsHidden=!1};
ThemeModel.prototype.hideControls=function(e){if(!1==this.controlsHidden)e?this.playControl.animate({opacity:0},500,"<>",this.hide):this.pauseControl.animate({opacity:0},500,"<>",this.hide),this.controlsHidden=!0};ThemeModel.prototype.showHomeScreen=function(){this.play.show()};ThemeModel.prototype.hideHomeScreen=function(){this.play.hide()};
ThemeModel.prototype.showEventIndicator=function(){if(null!=this.eventIndicator&&!0==this.eventIndicatorHidden){var e=this.eventIndicator.data("h"),k=this.eventIndicator.data("y");this.eventIndicator.show();this.eventIndicator.animate({height:e,y:k},500,"<>");this.eventIndicatorHidden=!1}};
ThemeModel.prototype.hideEventIndicator=function(){if(null!=this.eventIndicator&&!1==this.eventIndicatorHidden){var e=this.eventIndicator.data("h");this.eventIndicator.animate({height:0,y:this.eventIndicator.data("y")+e},500,"<>",this.hide);this.eventIndicatorHidden=!0}};
